# Efficient rhythms settings

<!-- This file was auto-generated by get_settings_md_and_html.py and pandoc from er_settings.py -->

The many settings below control the behavior of this script. The
recommended way of using the script is to store the desired settings as
a Python dictionary in a file and then pass the file into the script
with the `--settings` flag. For examples, see the files in the
`docs/examples/` directory. For a high-level overview of the script, see
`docs/general.html`

### Note on “per-voice sequences” and other “looping sequences”

Many arguments below can take “per-voice sequences” as arguments. These
are sequences (e.g., tuples or lists) that assign a different setting to
each voice. Importantly, however, it is possible to provide a sequence
that is shorter than the number of voices. In this case, the sequence
will be looped through as many times as is necessary. For example, if
`num_voices == 5`, but `len(pattern_len) == 2`, voices 0, 2, and 4 will
be assigned the first value in <a href="#pattern_len">`pattern_len`</a>,
while voices 1 and 3 will be assigned the second value. (The voices are
zero-indexed.)

There are also a number of arguments that take sequences that, if
necessary, will be looped through in a similar manner, but where the
items of the sequence are not applied to voices, but to something else.
An example is <a href="#harmony_len">`harmony_len`</a>. I refer to these
as “looping sequences”.

### Note on specifying pitches and intervals

For most use cases, it will be most convenient to specify pitch
materials using strings denoting constants which are provided in
`efficient_rhythms/er_constants.py` and documented in
`docs/constants.md` and `[docs/constants.html](constants.html)`. A few
examples: `"PERFECT_4TH"`, `"C# * OCTAVE4"`, `"F * PHRYGIAN"`, etc.

Otherwise, pitch materials can be specified either as integers, or as
other numeric types (e.g., floats). **If you don’t care about tuning or
temperament, just specify all intervals and pitches as integers** (e.g.,
one semitone = `1`, “middle C” = `60`). Otherwise, read on:

  - integers specify equal-tempered intervals. For example, in 12-tet
    (the usual temperament employed in Western music), an interval of
    `7` corresponds to a perfect fifth. How exactly integers function in
    other temperaments depends on the setting
    <a href="#integers_in_12_tet">`integers_in_12_tet`</a>; see its
    documentation below for details.

  - other numeric types are interpreted as just intervals, and then
    approximated in the specified equal-division-of-the-octave
    temperament (the default being 12). Thus an interval of 1.5 (which
    in tuning theory is more often specified as a ratio of 3:2)
    corresponds to a perfect fifth. If `tet = 12`, this will be
    approximated as 7 semitones (7/12ths of an octave). If `tet = 31`,
    on the other hand, this will be approximated as 18/31sts of an
    octave.

### “Generic” and “specific” intervals

In the settings below, I sometimes use the terms “generic” or “specific”
in reference to intervals. These terms come from academic music theory
(e.g., Clough and Myerson 1985).

A “generic” interval defines an interval with respect to some reference
scale, by counting the number of scale steps the interval contains. They
might also be called “scalar” intervals (using “scalar” in a completely
different sense from its linear algebra meaning). “Specific” intervals
define intervals “absolutely”, by simply counting the number of
semitones the interval comprises, irrespective of any reference scale.

In typical musical usage, “thirds”, “fifths”, and the like refer to
generic intervals: a third is the distance between any pitch in a scale
and the pitch two steps above or below it. (It would be more practical
to call a “third” a “second” but, unfortunately, this usage has now been
established for many centuries\!) Depending on the structure of the
scale, and the location of the interval within it, the exact pitch
distance connoted by one and the same generic interval may vary. For
instance, in the C major scale, the third from C to E is 4 semitones,
but the third from D to F is 3 semitones. To distinguish these cases,
music theory has developed an armory of interval “qualities” like
“major”, “minor”, “diminished”, and so on. A generic interval
together with a quality, like “minor third”, is somewhat like a specific
interval, but it is not quite the same thing, because there can be more
than one generic interval + quality that correspond to one specific
interval. For example, both “minor thirds” and “augmented seconds”
comprise 3 semitones. (Thus, the mapping from generic intervals with
qualities to specific intervals is onto but not one-to-one.)

### General settings

Less often used general settings are under
“<a href="#miscellaneous-settings">Miscellaneous settings</a>” below.

  - <span id="seed">**`seed`**</span>: int. Seed for random number
    generation.

  - <span id="output_path">**`output_path`**</span>: str. Path for
    output midi file. If a relative path, will be created relative to
    the current directory, unless the path begins with the string
    “EFFRHY/”, in which case “EFFRHY/” will be replaced with the
    directory of the efficient\_rhythms script. If any folder in the
    path does not exist, it will be created. If the path is a directory
    (ending with `"/"`), a midi file will be created within that
    directory with the same basename as the last settings file, but with
    the extension `.mid`. (If there are no settings files, the basename
    will be `effrhy.mid`.)
    
    See also <a href="#overwrite">`overwrite`</a>.
    
    *Default*: `"EFFRHY/output_midi/effrhy.mid"`

  - <span id="tet">**`tet`**</span>: int. Specifies equal division of
    the octave.
    
    *Default*: `12`

  - <span id="num_voices">**`num_voices`**</span>: int. The number of
    “voices” (or “parts”) to be created. If
    <a href="#existing_voices">`existing_voices`</a> below is passed,
    then <a href="#num_voices">`num_voices`</a> specifies the number of
    *new* voices to be added, and doesn’t include the
    <a href="#existing_voices">`existing_voices`</a> taken from the
    provided midi file.
    
    *Default*: `3`

  - <span id="num_reps_super_pattern">**`num_reps_super_pattern`**</span>:
    int. Number of times to repeat the complete “super pattern”.
    
    *Default*: `2`

  - <span id="pattern_len">**`pattern_len`**</span>: a number, or a
    [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Indicates the length of the “basic pattern” in beats. If
    a single number, all voices have the same length; if a sequence,
    sets the length for each voice individually. If
    <a href="#pattern_len">`pattern_len`</a> is 0 or negative, it will
    be assigned the length of the complete harmonic progression
    (determined by <a href="#harmony_len">`harmony_len`</a> and
    <a href="#num_harmonies">`num_harmonies`</a>).
    
    If `cont_rhythms != "none"`, then this argument must consist of a
    single number.
    
    *Default*: `0`

  - <span id="truncate_patterns">**`truncate_patterns`**</span>: bool.
    If True, then repetitions of any values in
    <a href="#pattern_len">`pattern_len`</a> which are not factors of
    the maximum value in <a href="#pattern_len">`pattern_len`</a> will
    be truncated at the maximum value. For example, if voice 0 has
    `pattern_len = 3` and voice 1 has `pattern_len = 5`, every second
    repetition of the pattern in voice 0 will be truncated after two
    beats.
    
    *Default*: `False`

  - <span id="rhythm_len">**`rhythm_len`**</span>: a number, or a
    [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Indicates the length of the rhythmic pattern to be
    generated. If not passed, then will be assigned the value of
    <a href="#pattern_len">`pattern_len`</a>. If a single number, all
    voices have the same length; if a sequence, sets the length for each
    voice individually. The use of
    <a href="#rhythm_len">`rhythm_len`</a> is to make repeated rhythmic
    patterns that are shorter than
    <a href="#pattern_len">`pattern_len`</a>. If
    <a href="#rhythm_len">`rhythm_len`</a> does not divide
    <a href="#pattern_len">`pattern_len`</a> evenly (e.g., if
    `rhythm_len == 3` and `pattern_len == 8`), then the final repetition
    of <a href="#rhythm_len">`rhythm_len`</a> will be truncated.
    Similarly, if <a href="#rhythm_len">`rhythm_len`</a> is longer than
    <a href="#pattern_len">`pattern_len`</a>, it will be truncated; in
    this case, one may as well not pass any value of
    <a href="#rhythm_len">`rhythm_len`</a>, since in the absence of a
    value, <a href="#rhythm_len">`rhythm_len`</a> is assigned the value
    of <a href="#pattern_len">`pattern_len`</a>.
    
    If `cont_rhythms != "none"`, then this argument must consist of a
    single number, which must be the same as the value of
    <a href="#pattern_len">`pattern_len`</a>.

  - <span id="num_harmonies">**`num_harmonies`**</span>: int. The number
    of harmonies in the pattern. If not passed, the length of
    <a href="#foot_pcs">`foot_pcs`</a> will be assigned to this setting.
    If <a href="#foot_pcs">`foot_pcs`</a> is not passed either, will be
    set to a default value of 4.

  - <span id="harmony_len">**`harmony_len`**</span>: a number, or a
    looping sequence of numbers (see above). If a sequence of numbers,
    the harmonies will cycle through the sequence until
    <a href="#num_harmonies">`num_harmonies`</a> is reached. That is,
    the first harmony will have the length of the first number in the
    sequence, the second harmony of the second, and so on. (Unlike
    <a href="#pattern_len">`pattern_len`</a> or
    <a href="#rhythm_len">`rhythm_len`</a>, there is no way of assigning
    different harmony\_lengths to different voices.)
    
    *Default*: `4`

  - <span id="voice_ranges">**`voice_ranges`**</span>: a sequence of
    2-tuples. Each tuple is of form (lowest\_note, highest\_note).
    `er_constants.py` provides a number of useful values for this
    purpose. The sequence must be at least
    <a href="#num_voices">`num_voices`</a> length. (If it is longer,
    excess items will be ignored.) It is not enforced that the sequence
    be in ascending order but I haven’t extensively tested what happens
    if it is not. Note that if
    <a href="#constrain_voice_leading_to_ranges">`constrain_voice_leading_to_ranges`</a>
    is False, than these ranges will only be enforced for the initial
    pattern. See also <a href="#hard_bounds">`hard_bounds`</a>.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html). [See also the
    note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).
    
    *Default*: `"CONTIGUOUS_OCTAVES * OCTAVE3 * C"`

### Scale and chord settings

  - <span id="scales_and_chords_specified_in_midi">**`scales_and_chords_specified_in_midi`**</span>:
    string. If passed, specifies a midi file in a specific format,
    described below, from which the settings
    <a href="#foot_pcs">`foot_pcs`</a>, <a href="#scales">`scales`</a>,
    and <a href="#chords">`chords`</a> below should be inferred (in
    which case any explicit values for these settings are ignored).
    
    The midi file should consist of two tracks.
    <a href="#scales">`scales`</a> are inferred from the first track,
    and <a href="#chords">`chords`</a> and
    <a href="#foot_pcs">`foot_pcs`</a> are inferred from the second
    track (<a href="#foot_pcs">`foot_pcs`</a> are simply the lowest
    sounding pitch of each chord). Each track should consist entirely of
    simultaneous whole notes (i.e., semibreves) constituting the
    intended scales or chords, respectively. For an example, see
    `docs/examples/scales_and_chords_specified_in_midi_example.mid`.
    Note that the rhythm of the harmonic changes is set through the
    <a href="#harmony_len">`harmony_len`</a> parameter above.
    
    You must ensure that chords and scales are consistent (that is, that
    the chords do not contain pitch-classes that do not belong to the
    scales; i.e., that the scales are supersets of the chords), or an
    `InconsistentChordsAndScalesError` will be raised.

  - <span id="foot_pcs">**`foot_pcs`**</span>: sequence of numbers. In
    this script, we call the main bass pitch of each chord its “foot”.
    The main bass pitch is a little like the “root” of a chord, except
    that the main bass pitch doesn’t have to be the root of a chord (as
    in the case of inverted chords). <a href="#foot_pcs">`foot_pcs`</a>
    specifies the “foots” of each harmony. These are the pitch-classes
    that will correspond to `0` in each item of
    <a href="#scales">`scales`</a> and <a href="#chords">`chords`</a>.
    
    For example, if `foot_pcs == [2, 4]` and `chords == [[0, 4, 7],
    [0, 3, 8]]`, then the actually realized chords will have
    pitch-classes `[2, 6, 9]` and `[4, 7, 0]`, respectively (assuming
    `tet == 12`). (In music-theoretic terms, the chords will be a D
    major triad followed by a first- inversion C major triad.)
    
    If <a href="#foot_pcs">`foot_pcs`</a> is shorter than
    <a href="#num_harmonies">`num_harmonies`</a>, it is looped through
    until the necessary length is obtained.
    
    If not passed, or passed an empty sequence,
    <a href="#num_harmonies">`num_harmonies`</a> foots will be generated
    randomly.
    
    Note that if <a href="#interval_cycle">`interval_cycle`</a> below is
    non-empty, all items in this sequence past the first are ignored.
    
    ([See the note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).)

  - <span id="interval_cycle">**`interval_cycle`**</span>: number, or
    sequence of numbers. Specifies a foot-pc interval cycle beginning on
    the first pitch-class of <a href="#foot_pcs">`foot_pcs`</a> (or on a
    randomly chosen pitch-class, if <a href="#foot_pcs">`foot_pcs`</a>
    is not passed). For example, if `foot_pcs == [0]`, and
    
      - `interval_cycle == 3`, the foot pitch-classes will be 0, 3, 6…
    
      - `interval_cycle == [3, -2]`, the foot pitch-classes will be 0,
        3, 1, 4, 2… ([See the note above on specifying pitches and
        intervals](#note-on-specifying-pitches-and-intervals).)

  - <span id="scales">**`scales`**</span>: a sequence of sequences of
    numbers. Each subsequence specifies a scale. Scales should always be
    specified starting from pitch-class 0; they will then be transposed
    to the appropriate pitch-classes according to the settings
    <a href="#foot_pcs">`foot_pcs`</a> or
    <a href="#interval_cycle">`interval_cycle`</a>.
    
    If <a href="#foot_pcs">`foot_pcs`</a> has fewer items than
    <a href="#scales">`scales`</a>, then the excess items in
    <a href="#scales">`scales`</a> will be ignored.
    
    If <a href="#foot_pcs">`foot_pcs`</a> has more items than
    <a href="#scales">`scales`</a>, then <a href="#scales">`scales`</a>
    will be looped through.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html). [See also the
    note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).
    
    *Default*: `["DIATONIC_SCALE"]`

  - <span id="chords">**`chords`**</span>: a sequence of sequences of
    numbers. Each subsequence specifies a chord. Scales should always be
    specified starting from pitch-class 0; they will then be transposed
    to the appropriate pitch-classes according to the settings
    <a href="#foot_pcs">`foot_pcs`</a> or
    <a href="#interval_cycle">`interval_cycle`</a>.
    
    If <a href="#foot_pcs">`foot_pcs`</a> has fewer items than
    <a href="#chords">`chords`</a>, then the excess items in
    <a href="#chords">`chords`</a> will be ignored.
    
    If <a href="#foot_pcs">`foot_pcs`</a> has more items than
    <a href="#chords">`chords`</a>, then <a href="#chords">`chords`</a>
    will be looped through.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html). [See also the
    note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).
    
    *Default*: `["MAJOR_TRIAD"]`

### Midi settings

  - <span id="voices_separate_tracks">**`voices_separate_tracks`**</span>:
    bool. If True, different “voices” in the score are written to
    separate tracks in the output midi file.
    
    *Default*: `True`

  - <span id="choirs_separate_tracks">**`choirs_separate_tracks`**</span>:
    bool. If True, different “choirs” in the score are written to
    separate tracks in the output midi file.
    
    *Default*: `True`

  - <span id="choirs_separate_channels">**`choirs_separate_channels`**</span>:
    bool. If True, different “choirs” in the score are assigned to
    separate channels in the output midi file (up to the maximum of 16
    channels).
    
    *Default*: `True`

  - <span id="write_program_changes">**`write_program_changes`**</span>:
    bool. If True, General Midi program changes are written to the
    output midi file. Depending on the intended use, this may or may not
    be desired.
    
    *Default*: `True`

  - <span id="humanize">**`humanize`**</span>: bool. Whether to apply
    “humanization” to various parameters according to the various
    “humanize” settings below.
    
    *Default*: `True`

  - <span id="humanize_onset">**`humanize_onset`**</span>: float.
    Randomly varies onset times within +- this amount, in quarter notes.
    
    *Default*: `0.0`

  - <span id="humanize_dur">**`humanize_dur`**</span>: float. Randomly
    varies duration times within +- this amount, in quarter notes.
    
    *Default*: `0.0`

  - <span id="humanize_velocity">**`humanize_velocity`**</span>: float
    between 0 and 1. Scales velocities by 1 +- a random amount between 0
    and this amount.
    
    *Default*: `0.1`

  - <span id="humanize_tuning">**`humanize_tuning`**</span>: float. Only
    implemented when `tet != 12`. Randomly varies tuning within +- this
    amount.
    
    *Default*: `0.0`

### Tuning settings

  - <span id="integers_in_12_tet">**`integers_in_12_tet`**</span>: bool.
    If `True`, then any pitch materials (e.g., in
    <a href="#max_interval">`max_interval`</a> or
    <a href="#scales">`scales`</a>) that are indicated by integers
    (rather than floats etc.) will be interpreted as 12-tet intervals
    that will be approximated in the given temperament (if `tet != 12`).
    Thus, if True for example, if `tet == 31`, then an interval of `7`
    (7/12ths of an octave, the nearest 12-tet approximation to a just
    fifth) will converted to `18`, the nearest 31-tet approximation to
    7/12ths of an octave.
    
    *Default*: `False`

  - <span id="logic_type_pitch_bend">**`logic_type_pitch_bend`**</span>:
    bool. If True, turns on a midi-writing scheme that I devised in
    order to make non-12-tet files work in Logic Pro. That is, in order
    to avoide pitch-bend latency problems, as well as to avoid audible
    bends during the release tails of notes, the notes (and their
    associated pitch-bend events) of each voice loop through a number of
    different channels (set by
    <a href="#num_channels_pitch_bend_loop">`num_channels_pitch_bend_loop`</a>).
    
    I have not used these midi files with any other DAWs so I don’t know
    whether this setting is helpful with e.g., ProTools.
    
    *Default*: `False`

  - <span id="num_channels_pitch_bend_loop">**`num_channels_pitch_bend_loop`**</span>:
    int. Defines number of channels to loop through if
    <a href="#logic_type_pitch_bend">`logic_type_pitch_bend`</a> is
    True.
    
    *Default*: `9`

  - <span id="pitch_bend_time_prop">**`pitch_bend_time_prop`**</span>:
    number between 0 and 1. If
    <a href="#logic_type_pitch_bend">`logic_type_pitch_bend`</a> is
    True, then this parameter defines how long between the release of
    the last note on a channel and the onset of the next note on that
    same channel the associated pitch-bend message should be written.
    The value should probably be more than half to avoid an audible bend
    during the release of the previous pitch.
    
    *Default*: `0.75`

### Voice-leading settings

  - <span id="parallel_voice_leading">**`parallel_voice_leading`**</span>:
    bool. If `True`, then the voice-leading between harmonies is
    conducted in pure (generic) parallel motion. The present
    implementation of this setting is incompatible with
    <a href="#constrain_voice_leading_to_ranges">`constrain_voice_leading_to_ranges`</a>,
    so if this setting is `True`, the latter setting is ignored.
    
    *Default*: `False`

  - <span id="parallel_direction">**`parallel_direction`**</span>: str.
    Only has an effect if
    <a href="#parallel_voice_leading">`parallel_voice_leading`</a> is
    True. Governs the direction of the parallel voice-leading. Possible
    values:
    
      - `"closest"`: takes the shortest path to the next chord.
      - `"up"`: voice-leading is always up.
      - `"down"`: voice-leading is always down.
    
    *Default*: `"closest"`

  - <span id="voice_lead_chord_tones">**`voice_lead_chord_tones`**</span>:
    bool. If True, then chord-tones on each harmony are voice-led to
    chord-tones on the next harmony, and non-chord-tones to
    non-chord-tones. So, if moving from a C major chord to an F major
    chord, the pitch-class C will be mapped to one of the pitch-classes
    (F, A, C), the pitch-class E will be mapped to one of the two
    remaining pitch-classes of the F major chord, and the pitch-class G
    will be mapped to the remaining pitch-class of the F major chord. A
    similar mapping will be made among the non-chord tones of the scale.
    
    Setting this parameter to True will greatly reduce the script’s
    ability to find voice-leading solutions (especially in combination
    with `allow_flexible_voice_leading == False`). Note also that it
    will often lead to at least some relatively large voice-leading
    motions.
    
    *Default*: `False`

  - <span id="preserve_foot_in_bass">**`preserve_foot_in_bass`**</span>:
    string. Controls whether the occurrences of the foot in the bass are
    “preserved” when voice-leading the initial pattern to subsequent
    harmonies. For example, if the first two harmonies are C major
    followed by F major, should a C in the bass on the first chord be
    voice-led to an F in the bass on the second chord, preserving the
    foot, or should it be voice-led to a C (which would be more
    efficient, in the sense of moving a smaller interval, a unison,
    rather than a fourth or fifth).
    
    Note that if this settings is not “none”, otherwise forbidden
    intervals may occur.
    
    Possible values:
    
      - `"lowest"`: only the lowest sounding occurrences of the foot on
        each harmony are preserved (so if, e.g., C2 and C3 both occur,
        only C2 will be preserved when voice-led to the next chord,
        while C3 will proceed by efficient voice-leading like all other
        pitches).
      - `"all"`: all occurrences of the foot of each harmony are
        preserved.
      - `"none"`: the foot is voice-led like any other pitch.
    
    *Default*: `"none"`

  - <span id="extend_bass_range_for_foots">**`extend_bass_range_for_foots`**</span>:
    number. If non-zero, permits transposition of the foot lower than
    the normal range of the bass voice, in order to maintain the foot as
    the lowest sounding pitch during a given harmony. Specifically, if
    the lowest sounding occurrences of the foot during a given harmony
    are not the lowest sounding pitch during that harmony, then they
    will be transposed an octave downwards, provided that this
    transposition lies within this extended range.
    
    *Default*: `0`

  - <span id="constrain_voice_leading_to_ranges">**`constrain_voice_leading_to_ranges`**</span>:
    bool. If False, then after the initial pattern is complete, the
    voices may exceed their ranges, if the most efficient voice-leading
    requires it. (For example, if the highest pitch of a voice’s range
    is G, but a subsequent efficient voice-leading requires G-sharp, the
    voice will be allowed to ascend to G-sharp, rather than enforcing a
    less-efficient voice-leading).
    
    *Default*: `False`

  - <span id="allow_flexible_voice_leading">**`allow_flexible_voice_leading`**</span>:
    bool. If True, then the voice-leading (i.e., the mapping of pitches
    from one harmony to the next) will be allowed to change mid-harmony.
    (So that, for example, the pitch C5 might at first be mapped to D5
    by the initial voice-leading, but after the script reaches an
    impasse, a new voice-leading will be chosen, which might map C5 to
    B4.) Setting to True will greatly expand the script’s ability to
    find voice-leading solutions; however, it may tend to destroy the
    audible sense of “pattern”.
    
    *Default*: `False`

  - <span id="vl_maintain_consonance">**`vl_maintain_consonance`**</span>:
    bool. If False, then after the initial pattern is complete,
    voice-leadings will not be checked for consonance. (See the settings
    under “<a href="#consonance-and-dissonance-settings">Consonance and
    dissonance settings</a>” below.)
    
    *Default*: `True`

  - <span id="vl_maintain_limit_intervals">**`vl_maintain_limit_intervals`**</span>:
    string. Determines when and whether, after the initial pattern is
    complete, voice-leadings will be allowed to exceed limit intervals.
    (See settings <a href="#max_interval">`max_interval`</a>,
    <a href="#max_interval_for_non_chord_tones">`max_interval_for_non_chord_tones`</a>,
    <a href="#min_interval">`min_interval`</a>,
    <a href="#min_interval_for_non_chord_tones">`min_interval_for_non_chord_tones`</a>.)
    
    Possible values:
    
      - `"all"`: limit intervals are always maintained.
      - `"across_harmonies"`: limit intervals are maintained when voice-
        leading from one harmony to another, but not when voice- leading
        within a single harmony. (Maintaining the limit intervals within
        a single harmony when a pattern is repeated on that harmony can
        lead the script to switch to a different voice-leading abruptly
        for the repetition, which may not be desired.)
      - `"none"`: limit intervals are never maintained.
    
    *Default*: `"across_harmonies"`

  - <span id="vl_maintain_forbidden_intervals">**`vl_maintain_forbidden_intervals`**</span>:
    bool. If False, then after the initial pattern is complete,
    voice-leadings will be permitted to contain forbidden intervals.
    (See
    <a href="#forbidden_interval_classes">`forbidden_interval_classes`</a>,
    <a href="#forbidden_interval_modulo">`forbidden_interval_modulo`</a>.)
    
    *Default*: `True`

  - <span id="vl_maintain_prohibit_parallels">**`vl_maintain_prohibit_parallels`**</span>:
    bool. If False, then after the initial pattern is complete,
    voice-leadings will be permitted to contain prohibited parallel
    intervals. (See
    <a href="#prohibit_parallels">`prohibit_parallels`</a>.)
    
    *Default*: `True`

### Chord-tone settings

Most chord tone settings only have an effect if
<a href="#chord_tone_selection">`chord_tone_selection`</a> is `True`.
Only <a href="#force_chord_tone">`force_chord_tone`</a> applies
irrespective of
<a href="#chord_tone_selection">`chord_tone_selection`</a>.

  - <span id="chord_tone_and_foot_disable">**`chord_tone_and_foot_disable`**</span>:
    bool. If True, disables all chord-tone and foot specific behavior.
    Specifically, disables
    <a href="#chord_tone_selection">`chord_tone_selection`</a>,
    <a href="#chord_tones_no_diss_treatment">`chord_tones_no_diss_treatment`</a>,
    <a href="#force_chord_tone">`force_chord_tone`</a>,
    <a href="#force_foot_in_bass">`force_foot_in_bass`</a>,
    <a href="#max_interval_for_non_chord_tones">`max_interval_for_non_chord_tones`</a>,
    <a href="#min_interval_for_non_chord_tones">`min_interval_for_non_chord_tones`</a>,
    <a href="#voice_lead_chord_tones">`voice_lead_chord_tones`</a>,
    <a href="#preserve_foot_in_bass">`preserve_foot_in_bass`</a>,
    <a href="#extend_bass_range_for_foots">`extend_bass_range_for_foots`</a>
    
    *Default*: `False`

  - <span id="chord_tone_selection">**`chord_tone_selection`**</span>:
    boolean. If True, then the script will select whether each note
    should be assigned a chord-tone according to a probabilistic
    function (some of whose parameters can be set below). Note that even
    if this setting is True, however, and a particular note is assigned
    to be a chord-tone, if all chord-tones fail to satisfy the various
    conditions (e.g., <a href="#max_interval">`max_interval`</a>, etc.),
    the algorithm will try to find a non-chord-tone that works.
    
      - Note that not all chord tone behavior is controlled by this
        setting, however. Some settings (such as those that begin
        “force\_chord\_tone”) apply regardless. To disable all chord
        tone behavior entirely, use
        <a href="#chord_tone_and_foot_disable">`chord_tone_and_foot_disable`</a>.
    
    *Default*: `True`

  - <span id="chord_tone_prob_func">**`chord_tone_prob_func`**</span>:
    string. If
    <a href="#chord_tone_selection">`chord_tone_selection`</a> is True,
    then the probability of the next note being a nonchord tone falls
    following each nonchord tone. This parameter controls how it falls.
    It can take the following values:
    
      - `"quadratic"`
      - `"linear"`
    
    *Default*: `"linear"`

  - <span id="max_n_between_chord_tones">**`max_n_between_chord_tones`**</span>:
    int. Controls after how many non-chord tones the probability of the
    following note being a chord tone rises to 1. For example, if
    <a href="#chord_tone_prob_func">`chord_tone_prob_func`</a> is
    `"linear"`, <a href="#min_prob_chord_tone">`min_prob_chord_tone`</a>
    is 0.5, and
    <a href="#max_n_between_chord_tones">`max_n_between_chord_tones`</a>
    is 2,
    
      - after a chord tone, the probability of a chord tone will be 0.5
    
      - after one non-chord tone, the probability of a chord tone will
        be 0.75
    
      - after two non-chord tones, the probability of a chord tone will
        be 1
    
    *Default*: `4`

  - <span id="min_prob_chord_tone">**`min_prob_chord_tone`**</span>:
    float. Sets the probability of a chord tone immediately following
    another chord tone. See
    <a href="#max_n_between_chord_tones">`max_n_between_chord_tones`</a>
    for an example.
    
    *Default*: `0.25`

  - <span id="try_to_force_non_chord_tones">**`try_to_force_non_chord_tones`**</span>:
    boolean. If True, then if the chord-tone probability function
    returns false, the script will try to force the pitch to be a
    non-chord tone. If False, then it is selected from the entire scale
    (chord tones and non-chord tones). Even if True, however, if all
    non-chord tones fail, the algorithm will try to find a chord-tone
    that works.
    
    *Default*: `False`

  - <span id="len_to_force_chord_tone">**`len_to_force_chord_tone`**</span>:
    int. If <a href="#chord_tone_selection">`chord_tone_selection`</a>
    is True, then notes of this value or longer will be forced to be
    chord tones. To disable, set to 0.
    
    *Default*: `1`

  - <span id="scale_chord_tone_prob_by_dur">**`scale_chord_tone_prob_by_dur`**</span>:
    bool. If True, and
    <a href="#chord_tone_selection">`chord_tone_selection`</a> is True,
    then the probability of a note being a chord-tone is scaled by the
    duration of that note, so that longer notes are more likely to be
    chord-tones. Specifically, the probability of a note being a chord
    tone is linearly interpolated between what it would have been
    otherwise and 1, according to where the duration lies in the range
    set by
    <a href="#scale_chord_tone_neutral_dur">`scale_chord_tone_neutral_dur`</a>
    and
    <a href="#len_to_force_chord_tone">`len_to_force_chord_tone`</a>.
    (Whether the probability of notes shorter than
    <a href="#scale_chord_tone_neutral_dur">`scale_chord_tone_neutral_dur`</a>
    is reduced depends upon
    <a href="#scale_short_chord_tones_down">`scale_short_chord_tones_down`</a>.)
    Thus if this setting is True, then
    <a href="#len_to_force_chord_tone">`len_to_force_chord_tone`</a>
    must have a non-zero value.
    
    *Default*: `True`

  - <span id="scale_chord_tone_neutral_dur">**`scale_chord_tone_neutral_dur`**</span>:
    number. If
    <a href="#scale_chord_tone_prob_by_dur">`scale_chord_tone_prob_by_dur`</a>
    is True, then this setting determines the note duration where
    chord-tone probability is left unchanged; notes of duration longer
    than this will have their chord-tone probability increased, and
    notes shorter will have their chord-tone probability decreased if
    <a href="#scale_short_chord_tones_down">`scale_short_chord_tones_down`</a>
    is True.
    
    *Default*: `0.5`

  - <span id="scale_short_chord_tones_down">**`scale_short_chord_tones_down`**</span>:
    bool. See
    <a href="#scale_chord_tone_prob_by_dur">`scale_chord_tone_prob_by_dur`</a>
    and
    <a href="#scale_chord_tone_neutral_dur">`scale_chord_tone_neutral_dur`</a>.
    
    *Default*: `False`

  - <span id="chord_tone_before_rests">**`chord_tone_before_rests`**</span>:
    a number, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. If chord\_tone\_selection is true, then rests of this
    length or greater will always be preceded by a chord tone. To
    disable, assign a value of 0.
    
    *Default*: `0.26`

  - <span id="chord_tones_no_diss_treatment">**`chord_tones_no_diss_treatment`**</span>:
    boolean, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of booleans. If true, then chord tones are exempted from the
    conditions of dissonance treatment. (However, dissonances sounding
    *against* these chord tones are still subject to the rules of
    dissonance treatment.)
    
    *Default*: `False`

  - <span id="force_chord_tone">**`force_chord_tone`**</span>: string.
    Possible values:
    
      - `"global_first_beat"`: forces chord tone on onsets on the global
        first beat (i.e., the first beat of the entire piece). Note,
        however, that this does not ensure that there will be an onset
        on the global first beat, and this parameter has no effect on
        notes that sound *after* the first beat. (Compare
        “global\_first\_note”.)
      - `"global_first_note"`: forces chord tones on the first note to
        sound in each voice.
      - `"first_beat"`: forces chord tones on onsets on the first beat
        of each harmony of the initial pattern. Note, however, that this
        does not ensure that there will be an onset on the first beat of
        each harmony, and this parameter has no effect on notes that
        sound *after* the first beat of each harmony. (Compare
        “first\_note”.)
      - `"first_note"`: forces chord tones on the first note of each
        harmony in each voice.
      - `"none"`: does not force any chord tones.
    
    *Default*: `"none"`

  - <span id="chord_tones_sync_onset_in_all_voices">**`chord_tones_sync_onset_in_all_voices`**</span>:
    bool. If True, then chord-tone selection will be synchronized
    between all simultaneously onset voices.
    
    *Default*: `False`

  - <span id="force_foot_in_bass">**`force_foot_in_bass`**</span>:
    string. Possible values are listed below; they work in the same way
    as for `force_chord_string` above.
    
      - `"first_beat"`
      - `"first_note"`
      - `"global_first_beat"`
      - `"global_first_note"`
      - `"none"`
    
    *Default*: `"none"`

### Melody settings

  - <span id="prefer_small_melodic_intervals">**`prefer_small_melodic_intervals`**</span>:
    bool. If true, smaller intervals will be more probable than larger
    intervals within the range of each voice. LONGTERM how, exactly?
    Make documentation more explicit?
    
    *Default*: `True`

  - <span id="prefer_small_melodic_intervals_coefficient">**`prefer_small_melodic_intervals_coefficient`**</span>:
    number. If
    <a href="#prefer_small_melodic_intervals">`prefer_small_melodic_intervals`</a>
    is true, then
    <a href="#prefer_small_melodic_intervals_coefficient">`prefer_small_melodic_intervals_coefficient`</a>
    adjusts how strong the weighting towards smaller intervals is. It
    can take any value \> 0; greater values mean larger intervals are
    relatively more likely. A good range of values is 0 - 10.
    
    *Default*: `1`

  - <span id="unison_weighted_as">**`unison_weighted_as`**</span>: int.
    If prefer\_small\_melodic\_intervals is true, then we have to tell
    the algorithm how to weight melodic unisons, because we usually
    don’t want them to be the most common melodic interval. Unisons
    will be weighted the same as whichever generic interval this
    variable is assigned to.
    
    (If you *DO* want unisons to be the most common melodic interval,
    set to “GENERIC\_UNISON” – you can’t use “UNISON” because that’s a
    just interval constant.)
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html).
    
    *Default*: `"FIFTH"`

  - <span id="max_interval">**`max_interval`**</span>: number, or a
    [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. If `None`, does not apply. If positive, indicates a
    generic interval. Otherwise, indicates a specific interval (in which
    case it can be a float to indicate a just interval which will be
    tempered in pre-processing—[see the note above on specifying pitches
    and intervals](#note-on-specifying-pitches-and-intervals)).
    
    <a href="#max_interval">`max_interval`</a> sets an inclusive bound
    (so if `max_interval == -5`, an interval of 5 semitones is allowed,
    but 6 is not). <a href="#max_interval">`max_interval`</a>, like the
    other similar settings below, applies across rests.
    
    *Default*: `"-OCTAVE"`

  - <span id="max_interval_for_non_chord_tones">**`max_interval_for_non_chord_tones`**</span>:
    number, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Works in the same way as max\_interval, but only applies
    to non-chord tones. If given a value of 1, can be used to apply a
    sort of primitive dissonance treatment. It can, however, also be
    given a value *larger* than max\_interval, for unusual effects.
    min\_interval sets an inclusive bound (so if `min_interval == -3`,
    an interval of 3 semitones is allowed, but 2 is not). If not passed,
    is assigned the value of <a href="#max_interval">`max_interval`</a>.

  - <span id="min_interval">**`min_interval`**</span>: number, or a
    [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Works like <a href="#max_interval">`max_interval`</a>,
    but specifies a minimum, rather than a maximum, interval.
    
    *Default*: `None`

  - <span id="min_interval_for_non_chord_tones">**`min_interval_for_non_chord_tones`**</span>:
    number, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Works like
    <a href="#max_interval_for_non_chord_tones">`max_interval_for_non_chord_tones`</a>,
    but specifies a minimum, rather than a maximum, interval. If not
    passed, is assigned the value of
    <a href="#min_interval">`min_interval`</a>.

  - <span id="force_repeated_notes">**`force_repeated_notes`**</span>:
    bool. If True, then within each harmony, each note is forced to
    repeat the pitch of the previous note.
    
    *Default*: `False`

  - <span id="max_repeated_notes">**`max_repeated_notes`**</span>:
    integer. Sets the maximum allowed number of repeated pitches in a
    single voice. If
    <a href="#force_repeated_notes">`force_repeated_notes`</a> is True,
    this parameter is ignored. “One repeated note” means two notes with
    the same pitch in a row. To disable, set to a negative value.
    
    Warning: for now, only applies to the initial pattern, not to the
    subsequent voice-leading
    
    *Default*: `-1`

  - <span id="max_alternations">**`max_alternations`**</span>: integer,
    or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of integers. Specifies the maximum allowed number of consecutive
    alternations of two pitches in a voice. “One alternation” is two
    pitches (e.g., A, B), and “two alternations” is four pitches (e.g.,
    A, B, A, B). If set to two, then the sequence “A, B, A, B, A” is
    allowed, just not “A, B, A, B, A, B” (or longer). To disable, set to
    0.
    
    *Default*: `2`

  - <span id="pitch_loop">**`pitch_loop`**</span>: int, or a sequence of
    ints. If passed, in each voice, pitches will be repeated in a loop
    of the specified length. (However, at each harmony change, the loop
    will be adjusted to fit the new harmony.)

  - <span id="hard_pitch_loop">**`hard_pitch_loop`**</span>: boolean. If
    True, then after the initial loop of each voice is constructed,
    pitch constraint parameters such as
    <a href="#consonances">`consonances`</a> and
    <a href="#max_interval">`max_interval`</a> will be ignored and the
    pitches will continue to be looped “no matter what.” If False, then
    a “soft” pitch loop is constructed, where a new pitch is chosen each
    time a pitch fails to pass the pitch constraint parameters.
    
    *Default*: `False`

  - <span id="prohibit_parallels">**`prohibit_parallels`**</span>:
    sequence of numbers. The numbers will be treated as
    octave-equivalent intervals (so, e.g., an octave equals a unison).
    Parallel motion by these intervals will be forbidden. The obvious
    use is to prohibit parallel octaves, but can be used however one
    wishes. ([See the note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).)
    
    *Default*: `(OCTAVE,)`

  - <span id="antiparallels">**`antiparallels`**</span>: bool. If True,
    then “antiparallel” versions of the intervals in
    <a href="#prohibit_parallels">`prohibit_parallels`</a> will also be
    prohibited. (E.g., if parallel octaves are forbidden, then an octave
    followed by a unison or a fifteenth will also be forbidden, and vice
    versa.)
    
    *Default*: `True`

  - <span id="force_parallel_motion">**`force_parallel_motion`**</span>:
    bool, or a dictionary where keys are tuples of ints (indicating
    voice indices) and values are bools. If True, then voices will be
    constrained to move in (generic) parallel motion. The parallel
    motion is only enforced within harmonies; across the boundaries
    between harmonies, voices may move freely. When this parameter is
    True between voices that do not have the same onsets, it works as
    follows: it takes the *last* melodic interval in the leader voice,
    and adds the same melodic interval in the follower voice.
    
    If True, <a href="#prohibit_parallels">`prohibit_parallels`</a> is
    nevertheless respected (specifically, the harmonic interval that
    would result from forcing parallel motion is checked for membership
    in <a href="#prohibit_parallels">`prohibit_parallels`</a>). If
    moving in parallel with the leader would cause the follower voice to
    exceed the lowest pitch of its range, it will be moved up an octave;
    conversely, if it would exceed the highest pitch of its range, it
    will be moved down an octave. (Either operation may violate
    <a href="#max_interval">`max_interval`</a> or
    <a href="#max_interval_for_non_chord_tones">`max_interval_for_non_chord_tones`</a>.)
    Note that strange effects may result if the voice’s range is less
    than an octave.
    
    Note that if the follower has a longer
    <a href="#pattern_len">`pattern_len`</a> than the leader, the
    parallel motion will only last until the conclusion of the leader
    pattern.
    
    *Default*: `False`

### Consonance and dissonance settings

  - <span id="consonance_treatment">**`consonance_treatment`**</span>:
    string. Controls among which notes consonance is evaluated. Possible
    values:
    
      - `"all_onsets"`: each pitch is evaluated for consonance with all
        other simulatenously onset pitches.
      - `"all_durs"`: each pitch is evaluated for consonance with all
        other pitches sounding during its duration.
      - `"none"`: no consonance treatment.
    
    *Default*: `"all_onsets"`

  - <span id="consonance_type">**`consonance_type`**</span>: string.
    Controls how notes are evaluated for consonance/dissonance. Possible
    values:
    
      - `"pairwise"`: all pairs of sounding voices are checked against
        the sequence in <a href="#consonances">`consonances`</a>
      - `"chordwise"`: all voices are checked as a group to see if they
        belong to one of the chords in
        <a href="#consonant_chords">`consonant_chords`</a>
    
    *Default*: `"pairwise"`

  - <span id="consonance_modulo">**`consonance_modulo`**</span>: number,
    or a sequence of numbers, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of sequences of numbers.
    
    If a number, only onset times that are 0 modulo this number will
    have consonance settings applied. For example, if `consonance_modulo
    == 1`, then every quarter-note beat will have consonance settings
    applied, but pitches *between* these beats will not.
    
    If a sequence of numbers, the sequence of numbers defines a loop of
    onset times at which consonance settings will be applied. The
    largest number in the sequence defines the loop length. For example,
    if `consonance_modulo == [1, 1.5, 2]`, then consonance settings will
    be applied at beats 0, 1, 1.5, 2, 3, 3.5, 4, 5, etc.
    
    If a sequence of sequences of numbers, each sub-sequence works as
    defined above, and they are applied to individual voices in a
    looping per-voice manner as described above.

  - <span id="min_dur_for_cons_treatment">**`min_dur_for_cons_treatment`**</span>:
    number. Notes with durations shorter than this value will not be
    evaluated for consonance.
    
    *Default*: `0`

  - <span id="forbidden_intervals">**`forbidden_intervals`**</span>: a
    sequence of numbers. The harmonic intervals specified by this
    sequence will be avoided. Octave-equivalent intervals are NOT
    avoided. The main expected use is to avoid unisons. Whether this
    setting persists after the initial pattern depends on the value of
    <a href="#vl_maintain_consonance">`vl_maintain_consonance`</a>.
    ([See the note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).)
    
    *Default*: `()`

  - <span id="forbidden_interval_classes">**`forbidden_interval_classes`**</span>:
    a sequence of numbers. The harmonic interval classes specified by
    this sequence will be avoided. will be entirely avoided, regardless
    of consonance settings, at least in the initial pattern. Whether
    this setting persists after the initial pattern depends on the value
    of <a href="#vl_maintain_consonance">`vl_maintain_consonance`</a>.
    ([See the note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).)
    
    *Default*: `()`

  - <span id="forbidden_interval_modulo">**`forbidden_interval_modulo`**</span>:
    number, or a sequence of number, or a sequence of sequence of
    numbers. Optionally defines onset times at which
    <a href="#forbidden_interval_classes">`forbidden_interval_classes`</a>
    will be enforced. Works similarly to and is specified in the same
    manner as <a href="#consonance_modulo">`consonance_modulo`</a>.

  - <span id="exclude_augmented_triad">**`exclude_augmented_triad`**</span>:
    boolean. Because all the pairwise intervals of the 12-tet augmented
    triad are consonant, if we want to avoid it, we need to explicitly
    exclude it. Only has any effect if consonance\_type is “pairwise”.
    
    *Default*: `True`

  - <span id="consonances">**`consonances`**</span>: a sequence of
    numbers. The sequence items specify the intervals that will be
    treated as consonances if
    <a href="#consonance_type">`consonance_type`</a> is `"pairwise"`.
    (But see <a href="#invert_consonances">`invert_consonances`</a>
    below.) Since it’s just a sequence of numbers, you can specify any
    intervals you like—it does not have to conform to the usual set of
    consonances.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html). [See also the
    note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).
    
    *Default*: `"CONSONANCES"`

  - <span id="invert_consonances">**`invert_consonances`**</span>: bool.
    If True, then the contents of
    <a href="#consonances">`consonances`</a> are replaced by their
    setwise complement. (E.g., if <a href="#tet">`tet`</a> is 12, then
    `[0, 3, 4, 5, 7, 8, 9]` will be replaced by `[1, 2, 6, 10, 11]`.)
    This permits an easy way of specifying so-called “dissonant
    counterpoint”. Has no effect if
    <a href="#consonance_type">`consonance_type`</a> is `"chordwise"`.
    
    *Default*: `False`

  - <span id="consonant_chords">**`consonant_chords`**</span>: a
    sequence of sequences of numbers. Each sub-sequence specifies a
    chord to be understood as consonant if
    <a href="#consonance_type">`consonance_type`</a> is `"chordwise"`.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html). [See also the
    note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).
    
    *Default*: `("MAJOR_TRIAD", "MINOR_TRIAD")`

  - <span id="chord_octave_equi_type">**`chord_octave_equi_type`**</span>:
    string. If <a href="#consonance_type">`consonance_type`</a> is
    `"chordwise"`, controls how the items in
    <a href="#consonant_chords">`consonant_chords`</a> are interpreted
    regarding octave equivalence and octave permutations. Possible
    values:
    
      - `"all"`: all octave-equivalent and octave-permuted voicings are
        allowed. Thus (C4, E4, G4), (C4, G4, E5), and (G3, E4, C4) are
        all equivalent (as are many other voicings of a C major chord).
      - `"bass"`: all octave-equivalent and octave-permuted voicings are
        allowed, except that the bass pitch (the lowest pitch of the
        chord) must be preserved. Thus (C4, E4, G4) and (C4, G4, E5) are
        equivalent, but (G3, E4, C4) is not, because the lowest pitch
        has changed.
      - `"order"`: octave equivalence is allowed but pitches must be in
        the order listed. Thus (C4, E4, G4) is equivalent to (C4, E4,
        G5) but not to (C4, G4, E5).
      - `"none"`: no octave equivalence or octave permutations of
        voicings. Thus (C3, E4, G4) is not equivalent to (C4, E4, G4).
    
    Note that transpositional equivalence always applies, so (C4, E4,
    G4) will always match (F4, A4, C5), and also (C3, E3, G3), even if
    `"none"`.
    
    Note on voice crossings: in all of these settings, “order” refers to
    order by pitch height, and not by voice number. So if voice 0 has E3
    and voice 1 has C3, the order is (C3, E3), because C3 is lower in
    pitch than E3, and not (E3, C3), because voice 0 is lower than voice
    1.
    
    *Default*: `"all"`

  - <span id="chord_permit_doublings">**`chord_permit_doublings`**</span>:
    string. If <a href="#consonance_type">`consonance_type`</a> is
    `"chordwise"`, controls when octave doublings of chord members are
    permitted. Possible values:
    
      - `"all"`: any and all doublings are permitted.
      - `"complete"`: doublings are only permitted once the chord is
        complete. E.g., if the allowed chord is a major triad, then
        after (C4, E4), the doubling E5 will not be permitted because
        the chord is incomplete. However, after (C4, E4, G4), E5 will be
        permitted, because the chord is now complete.
      - `"none"`: all doublings are prohibited.
    
    *Default*: `"all"`

### Rhythm settings

All rhythm settings use <a href="#rhythm_len">`rhythm_len`</a> above.

  - <span id="rhythms_specified_in_midi">**`rhythms_specified_in_midi`**</span>:
    string. If passed, specifies a midi file whose rhythms will be used
    for the output file. In this case, all rhythm settings below are
    ignored, with the sole exception of
    <a href="#overlap">`overlap`</a>. However,
    <a href="#rhythm_len">`rhythm_len`</a> and
    <a href="#pattern_len">`pattern_len`</a> must still be set
    explicitly above. If <a href="#num_voices">`num_voices`</a> is
    greater than the number of tracks in the input midi file, then the
    rhythms will loops through the tracks. If the number of tracks in
    the input midi file is greater than
    <a href="#num_voices">`num_voices`</a>, the excess tracks will be
    ignored.

  - <span id="rhythms_in_midi_reverse_voices">**`rhythms_in_midi_reverse_voices`**</span>:
    boolean. The convention in this program is for the bass voice to be
    track 0. On the other hand, in scores (e.g., those made with
    Sibelius), the convention is for the bass to be the lowest displayed
    (e.g., highest-numbered) track. If the input file was made with this
    latter score-order convention, set this boolean to true.
    
    *Default*: `False`

  - <span id="onset_density">**`onset_density`**</span>: a float from
    0.0 to 1.0, or an int, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of floats and/or ints.
    
    Floats represent a proportion of the available onsets to be filled.
    E.g., if `onset_density == 0.5` and there are 4 possible onset
    times, there will be 2 onsets. (Possible onset times are determined
    by <a href="#onset_subdivision">`onset_subdivision`</a>,
    <a href="#sub_subdivisions">`sub_subdivisions`</a>, and `comma`
    below).
    
    Integers represent a literal number of onsets. E.g., if
    `onset_density == 3`, there will be 3 onsets.
    
    Any negative values will be replaced by a random float between 0.0
    and 1.0.
    
    Note that there will always be at least one onset in each rhythm,
    regardless of how low <a href="#onset_density">`onset_density`</a>
    is set.
    
    *Default*: `0.5`

  - <span id="dur_density">**`dur_density`**</span>: a float from 0.0 to
    1.0, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of floats. Indicates a proportion of the duration of
    <a href="#rhythm_len">`rhythm_len`</a> that should be filled. Any
    negative values will be replaced by a random float between 0.0 and
    1.0.
    
    *Default*: `1.0`

  - <span id="onset_subdivision">**`onset_subdivision`**</span>: a
    number, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Indicates the basic “grid” on which onsets can take
    place, measured in quarter notes. For example, if `onset_subdivision
    == 1/4`, then onsets can occur on every sixteenth note subdivision.
    (But see also `sub_subdivision` below.) If `cont_rhythms == "all"`
    or `cont_rhythms == "grid"`, then this parameter no longer indicates
    the grid on which onsets can take place, but it is still used to
    calculate how many onset positions there should be. Thus, in the
    case of continuous rhythms, this parameter can be thought of as
    indicating the average grid duration, rather than the exact grid
    duration.
    
    *Default*: `Fraction(1, 4)`

  - <span id="sub_subdivisions">**`sub_subdivisions`**</span>: an
    optional sequence of ints, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of sequences of ints. If passed, further subdivides
    <a href="#onset_subdivision">`onset_subdivision`</a>, into parts
    defined by the ratio of the integers in the sequence. This can be
    used to apply “swing” or any other irregular subdivision you like.
    For instance, if passed a value of `(3, 4, 2)`, each unit of length
    <a href="#onset_subdivision">`onset_subdivision`</a> will be
    subdivided into a portion of 3/9, a portion of 4/9, and a portion of
    2/9. If a sequence of sequences, each sub-sequence applies to an
    individual voice, interpreted in the looping per-voice manner
    described above.
    
    Note that this parameter is ignored if `cont_rhythms != "none"`.

  - <span id="dur_subdivision">**`dur_subdivision`**</span>: a number,
    or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Indicates the “grid” on which note durations are
    extended (and thus on which releases take place), which will be
    measured from the note onset. If not passed, or if `None`, will be
    assigned the corresponding value of onset\_subdivision. Note that,
    regardless of this value, all notes will be given a duration of at
    least <a href="#min_dur">`min_dur`</a>, so it is possible that the
    total duration will exceed the value implied by
    <a href="#dur_subdivision">`dur_subdivision`</a> somewhat.

  - <span id="min_dur">**`min_dur`**</span>: a number, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of numbers. Indicates the minimum duration of a note. If not passed,
    or if `None` will be assigned the corresponding value of
    <a href="#onset_subdivision">`onset_subdivision`</a>.

  - <span id="obligatory_onsets">**`obligatory_onsets`**</span>: an
    optional sequence of numbers, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of sequences of numbers. Numbers specify obligatory onset times to
    include in the rhythm. Zero-indexed, so beat “1” (in musical terms)
    is `0`. Thus a value of `[0, 2, 3]`, with an
    <a href="#obligatory_onsets">`obligatory_onsets`</a> value of `4`
    would enforce onsets on beats 0, 2, and 3, repeating every 4 beats;
    in musical terms, we could think of this as onsets on the first,
    third, and fourth beats of every measure of 4/4.
    
    If <a href="#obligatory_onsets">`obligatory_onsets`</a> specifies
    more onsets than would be implied by
    <a href="#onset_density">`onset_density`</a>, the onsets will be
    selected from the obligatory onsets until
    <a href="#onset_density">`onset_density`</a> is reached, but
    precisely which onsets are selected is undefined.

  - <span id="obligatory_onsets_modulo">**`obligatory_onsets_modulo`**</span>:
    a number, or a sequence of numbers. Specifies which times (if any)
    should be understood as equivalent to the values in
    <a href="#obligatory_onsets">`obligatory_onsets`</a>. Thus, if
    <a href="#obligatory_onsets">`obligatory_onsets`</a> is `(0,)`, and
    <a href="#obligatory_onsets_modulo">`obligatory_onsets_modulo`</a>
    is passed a value of `2`, then times of 2, 4, 6, … will be
    equivalent to 0. Has no effect if
    <a href="#obligatory_onsets">`obligatory_onsets`</a> is empty.
    
    *Default*: `4` \# TODO how to handle possible values can be string
    *or* int

  - <span id="comma_position">**`comma_position`**</span>: string, int,
    or sequence of strings and/or ints. If the
    <a href="#rhythm_len">`rhythm_len`</a> is not divisible by
    <a href="#onset_subdivision">`onset_subdivision`</a> (e.g.,
    `rhythm_len == 3` and `onset_subdivision == 2/3`), then there will
    be a “comma” left over that the onsets do not fill. This setting
    controls the placement of any such comma. Possible values: - “end”:
    comma is placed at the end of the rhythm. - “anywhere”: the comma is
    placed randomly anywhere before, after, or during the rhythm. -
    “beginning”: comma is placed at the beginning of the rhythm,
    before any notes. - “middle”: comma is placed randomly in the middle
    of the rhythm. - int: specify the index at which to place the comma.
    
    *Default*: `"end"`

  - <span id="overlap">**`overlap`**</span>: bool. If `True`, then the
    final durations of each pattern repetition can overlap with the
    first durations of the next. If `False`, pattern overlaps are
    avoided.
    
    *Default*: `True`

  - <span id="rhythmic_unison">**`rhythmic_unison`**</span>: bool, or a
    sequence of tuples of ints. Controls whether to apply “rhythmic
    unison” (i.e., simultaneous onsets and releases) to some or all
    voices.
    
    If True, all voices are in rhythmic unison. In this case, the rhythm
    settings that will apply to all voices are those of the bass voice
    (i.e., voice 0).
    
    If False, no voices are in rhythmic unison.
    
    If a sequence of tuples of ints, specifies combinations of voices
    that are in rhythmic unison. For example, `[(0, 1), (2, 3)]` would
    indicate that voices 0 and 1 would be in rhythmic unison with one
    another, while voices 2 and 3 would also be in rhythmic unison with
    one another, but neither of voices 0 and 1 are in rhythmic unison
    with either of voices 2 and 3. Voices that are not specified will
    have an independent rhythm, not in rhythmic unison with any other
    part. Thus, with four voices, `[(0, 2)]` would cause voices 0 and 2
    to be in rhythmic unison with one another, while voices 1 and 3
    would each have independent rhythms. Note that each tuple should be
    in ascending order. The rhythmic parameters that will be used in the
    construction of each rhythm are those of the first-listed voice.
    
    Note that, when using tuples of rhythmic unison voices, it is
    sometimes necessary to provide “dummy” rhythmic parameters. If, for
    instance, the <a href="#rhythmic_unison">`rhythmic_unison`</a>
    tuples are `[(0, 1), (2, 3)]` and a parameter such as
    <a href="#onset_density">`onset_density`</a> is `[0.5, 0.3]`, the
    second value of <a href="#onset_density">`onset_density`</a> will
    never be used, because the first voices of the
    <a href="#rhythmic_unison">`rhythmic_unison`</a> tuples are 0 and 2
    (and 2, modulo the length of
    <a href="#onset_density">`onset_density`</a>, is 0). In this
    situation it is necessary to insert a dummy value into
    <a href="#onset_density">`onset_density`</a> (e.g., \[0.5, 0.0,
    0.3\]) in order to apply the parameter 0.3 to the second
    <a href="#rhythmic_unison">`rhythmic_unison`</a> tuple.
    
    *Default*: `False`

  - <span id="rhythmic_quasi_unison">**`rhythmic_quasi_unison`**</span>:
    bool, or a sequence of tuples of ints. This parameter is specified
    in the same way as <a href="#rhythmic_unison">`rhythmic_unison`</a>
    above. However, whereas
    <a href="#rhythmic_unison">`rhythmic_unison`</a> causes voices to
    have precisely the same rhythms, this parameter works differently.
    It does not override the rhythmic settings (such as
    <a href="#onset_density">`onset_density`</a>) that apply to each
    voice, but it constrains the onsets of “follower” voices to occur at
    the same time as the onsets of “leader” voices, as far as is
    possible. If the follower has a greater
    <a href="#onset_density">`onset_density`</a> than the leader, then
    the follower will have onsets simultaneous with all those of the
    leader, as well as extra onsets to satisfy its
    <a href="#onset_density">`onset_density`</a> value. If the follower
    has a lesser <a href="#onset_density">`onset_density`</a> than the
    leader, then all of the followers onsets will occur simultaneous
    with onsets in the leader, but it will have fewer onsets than the
    leader. The effect on other rhythmic parameters like
    <a href="#dur_density">`dur_density`</a> is similar. See also
    <a href="#rhythmic_quasi_unison_constrain">`rhythmic_quasi_unison_constrain`</a>
    below. \# TODO add examples to make this more immediately obvious
    
    *Default*: `False`

  - <span id="rhythmic_quasi_unison_constrain">**`rhythmic_quasi_unison_constrain`**</span>:
    boolean. If
    <a href="#rhythmic_quasi_unison">`rhythmic_quasi_unison`</a> is
    False, has no effect. If True, and
    <a href="#rhythmic_quasi_unison">`rhythmic_quasi_unison`</a> is
    True, then
    
      - to the extent possible, the follower voice’s note durations will
        be constrained to lie within the note durations of the leader
        voice.
    
      - if the follower has a greater onset density than the leader, it
        will be constrained to have all its onsets occur during the
        durations of the leader, if possible.
    
    *Default*: `False`

  - <span id="hocketing">**`hocketing`**</span>: bool, or a sequence of
    tuples of ints. This parameter is specified in the same way as
    <a href="#rhythmic_unison">`rhythmic_unison`</a> above. Its effect
    is to lead combinations of voices to be “hocketed” —i.e., for, when
    possible, the onsets of one voice to be placed during the pauses of
    another, and vice versa.
    
    Tuples of the form (0, 1, 2) will cause voice 1 to be constructed in
    hocket with voice 0, and then voice 2 to be constructed in hocket
    with voice 1.
    
    Tuples of the form (0, 1) and (1, 2), in contrast, will cause voice
    1 to be constructed in hocket with voice 0 (as before), but voice 2
    to be constructed in hocket with voice 1 *but not* with voice 0.
    
    *Default*: `False`

  - <span id="cont_rhythms">**`cont_rhythms`**</span>: string. Specifies
    whether and how to use “continuous” rhythms. Usually, rhythms in
    music are understood in a discrete manner, as rational subdivisions
    or combinations of unit values like quarter-notes or
    thirty-second-notes. (Of course, in live performance, this is an
    idealization, since humans are not metronomes.) In contrast, this
    script allows for the construction of “continuous” rhythms, where
    the rhythmic values are drawn arbitrarily from the real number line.
    
    <a href="#cont_rhythms">`cont_rhythms`</a> can take the following
    values:
    
      - `"none"`: continuous rhythms are not used.
      - `"all"`: all voices have unique continuous rhythm.
      - `"grid"`: all voices share a continuous-rhythm “grid”, so that
        their rhythmic onsets ( and releases?) will be on a common grid.
    
    If <a href="#cont_rhythms">`cont_rhythms`</a> is not `None`, then
    <a href="#rhythm_len">`rhythm_len`</a> must equal
    <a href="#pattern_len">`pattern_len`</a> and both must have only a
    single value.
    
    *Default*: `"none"`

  - <span id="num_cont_rhythm_vars">**`num_cont_rhythm_vars`**</span>:
    int, or sequence of ints. If `cont_rhythms != "none"`, then,
    optionally, the rhythms can be varied when they recur by perturbing
    them randomly. This parameter determines the number of such
    variations. Setting it to `1` has the effect of disabling it.
    Setting it to a negative value will cause the rhythmic variations to
    continue throughout the super pattern, or throughout the entire
    output, depending on the value of
    <a href="#super_pattern_reps_cont_var">`super_pattern_reps_cont_var`</a>.
    See also
    <a href="#vary_rhythm_consistently">`vary_rhythm_consistently`</a>
    and <a href="#cont_var_increment">`cont_var_increment`</a>.
    
    *Default*: `1`

  - <span id="vary_rhythm_consistently">**`vary_rhythm_consistently`**</span>:
    bool. If True, and `num_cont_rhythm_vars != 1`, then the
    perturbations applied to the rhythm will be the same from one
    variation until the next—at least until
    <a href="#min_dur">`min_dur`</a> is reached in one or more of the
    notes of the rhythm.
    
    *Default*: `True`

  - <span id="cont_var_increment">**`cont_var_increment`**</span>:
    number. If `num_cont_rhythm_vars != 1`, determines how much rhythmic
    perturbation is applied to each variation. Larger values lead to
    larger perturbations.
    
    *Default*: `0.1`

  - <span id="super_pattern_reps_cont_var">**`super_pattern_reps_cont_var`**</span>:
    bool. If True, any variations of the rhythm implied by
    <a href="#num_cont_rhythm_vars">`num_cont_rhythm_vars`</a> will be
    allowed to continue into repetitions of the super pattern.
    
    *Default*: `True`

### Choir settings

  - <span id="choirs">**`choirs`**</span>: sequence of ints and/or
    strings.
    
    Ints specify the program number of a GM midi instrument.
    
    Strings specify integer constants defining GM midi instruments
    defined in `er_constants.py`.
    
    For a list of pre-defined constants that can be used with this
    setting, see [docs/constants.html](constants.html).
    
    *Default*: `("GUITAR", "ELECTRIC_PIANO", "PIANO", "XYLOPHONE")`

  - <span id="choir_assignments">**`choir_assignments`**</span>:
    sequence of ints. Assigns voices to the given index in
    <a href="#choirs">`choirs`</a>. Will be looped through if necessary.
    For example, if `choir_assignments == [1, 0]`, voice 0 will be
    assigned to `choirs[1]`, voice 1 will be assigned to `choirs[0]`,
    voice 2 (if it exists) will be assigned to `choirs[1]`, and so on.
    By default, or if passed an empty sequence, voices are assigned to
    choirs in counting order (i.e., voice 0 is assigned to choir 0,
    voice 1 to choir 1, etc.), except that if there are more voices than
    choirs, the choirs are looped through.
    
    If
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True, then this setting is ignored.

  - <span id="randomly_distribute_between_choirs">**`randomly_distribute_between_choirs`**</span>:
    bool. If True, then voices are randomly assigned to items from
    <a href="#choirs">`choirs`</a>. The precise way in which this occurs
    is controlled by the settings below.
    
    *Default*: `False`

  - <span id="length_choir_segments">**`length_choir_segments`**</span>:
    number. Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. Sets the duration of each random choir assignment in
    quarter notes. If 0 or negative, each voice is permanently assigned
    to a choir at random.
    
    *Default*: `1`

  - <span id="length_choir_loop">**`length_choir_loop`**</span>: number.
    Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. If positive, sets the duration of a loop for the random
    choir assignments. Shorter values will be readily audible loops;
    longer values are likely to be less apparent as loops. If not
    passed, then there is no loop. Note that depending on the
    combination of settings applied, it may not be possible to construct
    a loop of sufficient length. In this case, a warning will be
    emitted, but the script will otherwise continue.

  - <span id="choir_segments_dovetail">**`choir_segments_dovetail`**</span>:
    bool. Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. If True, then choir assignments will be extended by one
    note, so that they overlap with the following choir assignment.
    (This can make this sort of thing easier for humans to play.)
    
    *Default*: `False`

  - <span id="max_consec_seg_from_same_choir">**`max_consec_seg_from_same_choir`**</span>:
    int. Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. If passed, then no voice will be assigned to the same choir
    for more than the specified number of segments in a row.

  - <span id="all_voices_from_different_choirs">**`all_voices_from_different_choirs`**</span>:
    bool. Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. If True, then at each new choir assignment, it will be
    ensured that no two voices are assigned to the same choir. An error
    will be raised if this setting is True and
    <a href="#num_voices">`num_voices`</a> is greater than
    `len(choirs)`.
    
    *Default*: `False`

  - <span id="each_choir_combination_only_once">**`each_choir_combination_only_once`**</span>:
    bool. Only has an effect if
    <a href="#randomly_distribute_between_choirs">`randomly_distribute_between_choirs`</a>
    is True. If True, then each combination of choir assignments will
    occur only once before all others are heard, or before
    <a href="#length_choir_loop">`length_choir_loop`</a> is reached, if
    possible.
    
    *Default*: `False`

### Tempo settings

  - <span id="tempo">**`tempo`**</span>: a number or a sequence of
    numbers. Specifies a tempo or tempi in quarter-note
    beats-per-minute. If a sequence, the length of each tempo segment is
    set with <a href="#tempo_len">`tempo_len`</a>. If a sequence, will
    be looped through if necessary. If not passed, a tempo or tempi will
    be randomly generated.
    
    *Default*: `120`

  - <span id="tempo_len">**`tempo_len`**</span>: a number or a sequence
    of numbers. Specifies the duration of each tempo in
    <a href="#tempo">`tempo`</a> in quarter-note beats. If a sequence,
    will be looped through as necessary. Has no effect if
    <a href="#tempo">`tempo`</a> is a single number. If not passed, then
    the first tempo in <a href="#tempo">`tempo`</a> applies to the whole
    file.
    
    *Default*: `0`

  - <span id="tempo_bounds">**`tempo_bounds`**</span>: a tuple of form
    (number, number). If <a href="#tempo">`tempo`</a> is an empty
    sequence, then tempi are randomly generated within the (inclusive)
    bounds set by this tuple.
    
    *Default*: `(80, 144)`

### Transposition settings

  - <span id="transpose">**`transpose`**</span>: bool. Toggles
    transposition of segments according to the following settings. Note
    that the limits imposed by
    <a href="#voice_ranges">`voice_ranges`</a> are not followed by the
    transposition settings.
    
    *Default*: `False`

  - <span id="transpose_type">**`transpose_type`**</span>: string. For
    explanation of the possible values, see the discussion of “generic”
    and “specific” transposition above. Possible values:
    
      - `"generic"`
      - `"specific"`
    
    *Default*: `"specific"`

  - <span id="transpose_len">**`transpose_len`**</span>: number, or
    sequence of numbers. The length of the segments to be transposed. If
    a single number, all segments have the same length. If a sequence of
    numbers, will be looped through.
    
    *Default*: `4`

  - <span id="transpose_intervals">**`transpose_intervals`**</span>: an
    optional number or sequence of numbers. The interval or intervals by
    which to transpose segments. If a single number, all segments will
    be transposed by the same amount. If a sequence of numbers, will be
    looped through. The transposition is cumulative, so, for example, if
    <a href="#transpose_intervals">`transpose_intervals`</a> is `3`,
    then the first segment will be transposed by `3`, the second by `6`,
    etc. (See also
    <a href="#cumulative_max_transpose_interval">`cumulative_max_transpose_interval`</a>.)
    If not passed, but transpose is True, segments will be transposed at
    random.

  - <span id="cumulative_max_transpose_interval">**`cumulative_max_transpose_interval`**</span>:
    a number. Sets an absolute maximum bound for cumulative
    transposition, after which segments will be transposed up or down an
    octave. The bound is inclusive. To disable, set to 0. Thus, if
    `cumulative_max_transpose_interval == 6` and `transpose_intervals
    == 3`, segments will be transposed by 3, 6, -3, 0, 3, … semitones.
    (If, on the other hand, `cumulative_max_transpose_interval == 0`,
    segments will be transposed by 3, 6, 9, 12, 15, …)

  - <span id="transpose_before_repeat">**`transpose_before_repeat`**</span>:
    boolean. If True, then any transpositions are applied to the
    completed “super pattern” *before* repeating it; thus, the super
    pattern will have the same sequence of transpositions on all
    repetitions. If False, then any transpositions are applied *after*
    repeating the super pattern. Thus, unless the sequence of
    transpositions happen to return to their starting point at exactly
    the beginning of the repetitions of the super pattern, each super
    pattern will feature a new sequence of transpositions.

### Existing voices settings

  - <span id="existing_voices">**`existing_voices`**</span>: string. The
    path to a midi file that contains some pre-existing music to which
    new voices should be added. Settings such as
    <a href="#scales">`scales`</a> or <a href="#chords">`chords`</a> are
    not inferred from the midi file and must be set explicitly by the
    user.

  - <span id="existing_voices_offset">**`existing_voices_offset`**</span>:
    number. Used to set the beat at which the voices in
    <a href="#existing_voices">`existing_voices`</a> should begin. Has
    no effect if <a href="#existing_voices">`existing_voices`</a> is not
    passed.
    
    *Default*: `0`

  - <span id="bass_in_existing_voice">**`bass_in_existing_voice`**</span>:
    boolean. If True, then all bass-specific parameters (like
    <a href="#preserve_foot_in_bass">`preserve_foot_in_bass`</a>) will
    have no effect.
    
    *Default*: `False`

  - <span id="existing_voices_repeat">**`existing_voices_repeat`**</span>:
    boolean. If True, then any existing voices will be truncated at the
    end of the super pattern, and then repeated together with the new
    voices.
    
    *Default*: `True`

  - <span id="existing_voices_transpose">**`existing_voices_transpose`**</span>:
    boolean. If True, then any existing voices will be transposed
    according to the “<a href="#transposition-settings">transposition
    settings</a>” below.
    
    *Default*: `True`

  - <span id="existing_voices_max_denominator">**`existing_voices_max_denominator`**</span>:
    integer. In order to avoid rounding errors and the like, the rhythms
    in <a href="#existing_voices">`existing_voices`</a> are converted to
    Python’s Fraction type. This parameter sets the maximum denominator
    allowed in the conversion.
    
    *Default*: `8192`

### Miscellaneous settings

  - <span id="overwrite">**`overwrite`**</span>: bool. If False, if a
    file with the name specified by
    <a href="#output_path">`output_path`</a> already exists, the name
    will be incremented with a numeric suffix before the extension until
    it does not exist. E.g., if `output_path == 'effrhy.mid'` but
    `effrhy.mid` already exists, `effrhy_001.mid` will be created; if
    `effrhy_001.mid` already exists, `effrhy_002.mid` will be created.
    
    *Default*: `False`

  - <span id="max_super_pattern_len">**`max_super_pattern_len`**</span>:
    number. If positive, the super pattern will be truncated if it
    reaches this length.
    
    *Default*: `128`

  - <span id="hard_bounds">**`hard_bounds`**</span>: a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of 2-tuples. Each tuple is of form (lowest\_note, highest\_note).
    ([See the note above on specifying pitches and
    intervals](#note-on-specifying-pitches-and-intervals).) This setting
    determines a lower and upper bound that will be enforced regardless
    of the setting of
    <a href="#constrain_voice_leading_to_ranges">`constrain_voice_leading_to_ranges`</a>.
    The default values are the lowest and highest notes of an 88-key
    piano, respectively. See also
    <a href="#voice_ranges">`voice_ranges`</a>.
    
    *Default*: `(("OCTAVE0 * A", "OCTAVE8 * C"))`

  - <span id="voice_order_str">**`voice_order_str`**</span>: string. If
    “reverse”, voices will be generated from highest to lowest.
    Otherwise, they are generated from lowest to highest.
    
    *Default*: `"usual"`

  - <span id="allow_voice_crossings">**`allow_voice_crossings`**</span>:
    bool, or a [per-voice
    sequence](#note-on-per-voice-sequences-and-other-looping-sequences)
    of bools. This could be used, for example, to forbid voice-crossings
    in the bass voice, but not in the other voices.
    
    *Default*: `True`

  - <span id="time_sig">**`time_sig`**</span>: an optional tuple of form
    (int, int). The integers are the numerator and denominator of a time
    signature, respectively. The time signature will be written to the
    midi output file and used if exporting notation with Verovio. If no
    time signature is passed, the script will do its best to infer an
    appropriate time signature from the other settings.
    
    *Default*: `None`

  - <span id="initial_pattern_attempts">**`initial_pattern_attempts`**</span>:
    integer. Number of attempts to make at constructing initial pattern
    before giving up or asking whether to make more attempts.
    
    *Default*: `50`

  - <span id="exclude_from_randomization">**`exclude_from_randomization`**</span>:
    optional sequence of strings. A list of attribute names of this
    class. Only has an effect when the script is invoked with “-r” or
    “–random”, in which case any attribute names found in this list
    will be excluded from randomization. (Although note that not all
    attributes are randomized in any case; see the documentation for
    more info.)
    
    *Default*: `()`

  - <span id="voice_leading_attempts">**`voice_leading_attempts`**</span>:
    integer. Number of attempts to make at constructing voice-leading
    pattern before giving up or asking whether to make more attempts.
    
    *Default*: `50`

  - <span id="ask_for_more_attempts">**`ask_for_more_attempts`**</span>:
    bool. If True, if
    <a href="#initial_pattern_attempts">`initial_pattern_attempts`</a>
    or <a href="#voice_leading_attempts">`voice_leading_attempts`</a>
    are made without success, script will prompt user whether to try
    again.
    
    *Default*: `False`

  - <span id="max_available_pitch_materials_deadends">**`max_available_pitch_materials_deadends`**</span>:
    integer. Sets the maximum number of “deadends” the recursive
    algorithm for building the initial pattern can reach before it will
    be aborted.
    
    *Default*: `1000`

  - <span id="timeout">**`timeout`**</span>: number. If passed, the
    script will stop if it has not suceeded in this many seconds.
