<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Efficient rhythms documentation</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="resources/third_party/github-markdown-css/github-markdown.css" />
  <link rel="stylesheet" href="resources/css/markdown-body.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body class="markdown-body">
<header id="title-block-header">
<h1 class="title">Efficient rhythms documentation</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#dependencies-for-music-notation">Dependencies for music notation</a></li>
</ul></li>
<li><a href="#quick-start">Quick start</a></li>
<li><a href="#how-it-works">How it works</a><ul>
<li><a href="#harmony">Harmony</a></li>
<li><a href="#specifying-rhythms">Specifying rhythms</a></li>
<li><a href="#continuous-rhythms">Continuous rhythms</a></li>
</ul></li>
<li><a href="#changers-filters-and-transformers">Changers: filters and transformers</a></li>
</ul>
</nav>
<h2 id="introduction">Introduction</h2>
<p><code>efficient_rhythms</code> is a tool for musical composition. You can find it on Github at <a href="https://github.com/malcolmsailor/efficient_rhythms"><code>https://github.com/malcolmsailor/efficient_rhythms</code></a>. There is also an <a href="http://malcolmsailor.pythonanywhere.com">alpha web app version of this script</a> you are welcome to try.</p>
<p>Here’s a couple examples of things it helped me make:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/YgAUskvRWPM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/owvfdymO9Aw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>The gist of how the script works goes as follows:</p>
<ul>
<li>first it makes an initial <strong>rhythmic</strong> pattern.</li>
<li>then it fills the rhythm with pitches.</li>
<li>finally, it repeats the pattern, adjusting it <strong>efficiently</strong> to fit any chord changes (hence the name “efficient rhythms”).</li>
</ul>
<p>You can then hear the results as a midi file. See <a href="#how-it-works">How it works</a> for a fuller explanation, with many examples. The script also provides a few tools (see <a href="#filters-and-transformers">Filters and Transformers</a>) for reshaping the results.</p>
<h2 id="installation">Installation</h2>
<p>The script requires Python &gt;= 3.8 and has the following Python dependencies:</p>
<ul>
<li>mido</li>
<li>numpy</li>
<li>pygame</li>
<li>python-rtmidi</li>
<li>sortedcontainers</li>
</ul>
<p>These can be installed by running <code>pip3 install -r requirements.txt</code> in the script directory.</p>
<p>As far as installing the script itself goes, you can just clone the Github repository.</p>
<h3 id="dependencies-for-music-notation">Dependencies for music notation</h3>
<p>If you want the script to output music notation, then the following must be in your path:</p>
<ul>
<li>convert (part of <a href="https://www.imagemagick.org/">ImageMagick</a>)</li>
<li><a href="https://gitlab.mister-muffin.de/josch/img2pdf">img2pdf</a></li>
<li><a href="https://www.verovio.org/">verovio</a></li>
</ul>
<p>The first two can be installed as follows:</p>
<pre><code>brew install imagemagick # replace &quot;brew&quot; with your system package manager if not on macOS
pip3 install img2pdf</code></pre>
<p>Verovio installation instructions are <a href="https://github.com/rism-ch/verovio/wiki/Building-instructions#command-line-tool">here</a>.</p>
<h2 id="quick-start">Quick start</h2>
<p>To quickly try the script out, you can run it with the default settings:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><code>python3 -m efficient_rhythms</code></p>
<p>You can also try running it with randomized settings, although be warned that the results are sometimes strange:</p>
<p><code>python3 -m efficient_rhythms</code></p>
<p>There are many configurable settings that shape the output. Full documentation is available in <a href="settings.html"><code>settings.html</code></a>. But a gentler introduction is provided in the next section.</p>
<p>In general, custom settings are applied by putting them into a Python dictionary, saving them in a file, and then passing that file as an argument to the script with the <code>--settings</code> flag. For examples, see <code>docs/examples</code>. (A long-term goal for this project would be to provide a GUI or other more user-friendly interface.)</p>
<h2 id="how-it-works">How it works</h2>
<p>The basic settings that control the script are</p>
<ul>
<li><a href="settings.html#rhythm_len"><code>rhythm_len</code></a>: the length of the basic rhythm</li>
<li><a href="settings.html#pattern_len"><code>pattern_len</code></a>: the length of the initial pattern</li>
<li><a href="settings.html#harmony_len"><code>harmony_len</code></a>: the length of each harmony (i.e., chord)</li>
</ul>
<p>For instance, in <a href="#example1"><code>docs/examples/example1.py</code></a>, the initial pattern is two beats long (i.e., <code>pattern_len = 2</code>). Each harmony, however, is four beats (<code>harmony_len = 4</code>). Thus you can see that the pattern repeats twice on each harmony, and is then adjusted to fit the next harmony.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div id="example1-div" class="example-div">
<p><span id="example1"><strong>Example:</strong> <code>docs/examples/example1.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example1.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example1.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example1_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example1.m4a" controls=""><a href="resources/m4as/example1.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=y&amp;pattern_len=2&amp;harmony_len=4&amp;consonance_treatment=all_onsets&amp;hocketing=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>(By the way, I made the piano-roll figures throughout this documentation with <a href="https://github.com/malcolmsailor/midani">midani</a>.)</p>
<p>Whenever <a href="settings.html#rhythm_len"><code>rhythm_len</code></a> is not set explicitly, it is implicitly assigned the value of <a href="settings.html#pattern_len"><code>pattern_len</code></a>. So in the example above, <a href="settings.html#rhythm_len"><code>rhythm_len</code></a> was implicitly assigned <code>2</code>. In <a href="#example2"><code>docs/examples/example2.py</code></a>, in contrast, we set <code>pattern_len = 4</code>, but <code>rhythm_len = 2</code>. Thus, if you look and/or listen carefully, you’ll find that the same rhythm repeats twice on each harmony, but with different notes each time—the entire pattern of pitches takes four beats to repeat, and by the time it does, its pitches are somewhat different, having been adjusted to the new harmony.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div id="example2-div" class="example-div">
<p><span id="example2"><strong>Example:</strong> <code>docs/examples/example2.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example2.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example2.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example2_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example2.m4a" controls=""><a href="resources/m4as/example2.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;pattern_len=4&amp;rhythm_len=2&amp;harmony_len=4&amp;consonance_treatment=all_onsets" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>We aren’t constrained to have <a href="settings.html#pattern_len"><code>pattern_len</code></a> be a whole multiple of <a href="settings.html#rhythm_len"><code>rhythm_len</code></a>. In <a href="#example3"><code>docs/examples/example3.py</code></a>, <a href="settings.html#pattern_len"><code>pattern_len</code></a> is still <code>4</code>, but <code>rhythm_len = 1.5</code>, so now every third time the rhythm occurs, it is truncated (a bit like a 3–3–2 <em>tresillo</em> pattern).</p>
<div id="example3-div" class="example-div">
<p><span id="example3"><strong>Example:</strong> <code>docs/examples/example3.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example3.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example3.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example3_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example3.m4a" controls=""><a href="resources/m4as/example3.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7%2C+0.85&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;pattern_len=4&amp;rhythm_len=1.5&amp;harmony_len=4&amp;consonance_treatment=all_onsets" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Up to now, we’ve always specified the same settings in both voices. But we need not do so! In <a href="#example4"><code>docs/examples/example4.py</code></a>, the bottom voice again has <code>rhythm_len = 1.5</code>, but the top voice now has <code>rhythm_len = 2</code>.</p>
<div id="example4-div" class="example-div">
<p><span id="example4"><strong>Example:</strong> <code>docs/examples/example4.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example4.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example4.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example4_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example4.m4a" controls=""><a href="resources/m4as/example4.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7%2C+0.85&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;pattern_len=4&amp;rhythm_len=1.5%2C+2&amp;harmony_len=4&amp;consonance_treatment=all_onsets" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>We can also have different values of <a href="settings.html#pattern_len"><code>pattern_len</code></a> in each voice, as in <a href="#example5"><code>docs/examples/example5.py</code></a>. However, if we do so, the script has to work quite a bit harder to find a solution. To help it do so, I made its task a little easier by changing <a href="settings.html#consonance_treatment"><code>consonance_treatment</code></a> from <code>"all_onsets"</code> to <code>"none"</code>. Thus whereas in the previous examples, the simultaneously onset notes all formed intervals like 3rds and fifths, in <a href="#example5"><code>docs/examples/example5.py</code></a>, there are also dissonances like 7ths and 9ths.</p>
<div id="example5-div" class="example-div">
<p><span id="example5"><strong>Example:</strong> <code>docs/examples/example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example5.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example5.m4a" controls=""><a href="resources/m4as/example5.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;pattern_len=1.5%2C+4&amp;truncate_patterns=y&amp;harmony_len=4&amp;consonance_treatment=none&amp;hocketing=y&amp;overlap=n" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Up until now, whenever one pattern or rhythm didn’t line up with the other, we have truncated the shorter one, so that subsequent repetitions began together in both voices. But the script doesn’t require this. In <a href="#example6"><code>docs/examples/example6.py</code></a>, I have changed <a href="settings.html#truncate_patterns"><code>truncate_patterns</code></a> to <code>False</code>. Now the 1.5-beat pattern in the lower part isn’t truncated after 4 beats. Instead, it is displaced relative to both the 4-beat pattern in the upper part, as well as the 4-beat harmony changes. (The two patterns finally come into sync after 12 beats, the least-common-multiple of 1.5 and 4.)</p>
<div id="example6-div" class="example-div">
<p><span id="example6"><strong>Example:</strong> <code>docs/examples/example6.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example6.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example6.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example6_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example6.m4a" controls=""><a href="resources/m4as/example6.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=global_first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;pattern_len=1.5%2C+4&amp;truncate_patterns=n&amp;harmony_len=4&amp;consonance_treatment=none&amp;hocketing=y&amp;overlap=n" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Another feature of all the examples up to now is that <a href="settings.html#harmony_len"><code>harmony_len</code></a> has always been at least as long as <a href="settings.html#pattern_len"><code>pattern_len</code></a>. But there’s no reason why this has to be so. In <a href="#example7"><code>docs/examples/example7.py</code></a>, I’ve set <code>harmony_len = 2</code> but <code>pattern_len = 4</code> so that each pattern covers two harmonies.</p>
<div id="example7-div" class="example-div">
<p><span id="example7"><strong>Example:</strong> <code>docs/examples/example7.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/example7.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/example7.svg" class="notation" alt=" notation" /> <img src="resources/pngs/example7_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/example7.m4a" controls=""><a href="resources/m4as/example7.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;num_voices=2&amp;foot_pcs=0&amp;interval_cycle=3&amp;prohibit_parallels=0&amp;overwrite=True&amp;max_repeated_notes=0&amp;num_harmonies=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;max_interval=4&amp;force_foot_in_bass=first_beat&amp;force_chord_tone=global_first_note&amp;forbidden_interval_classes=0&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;scales=DIATONIC_SCALE&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=y&amp;pattern_len=4&amp;harmony_len=2&amp;obligatory_onsets=%5B0%5D%2C+%5B%5D&amp;obligatory_onsets_modulo=2&amp;voice_ranges=%2848%2C+60%29%2C+%2860%2C+72%29&amp;extend_bass_range_for_foots=6&amp;consonance_treatment=all_onsets&amp;hocketing=y&amp;num_reps_super_pattern=4" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<h3 id="harmony">Harmony</h3>
<p>In the preceding sections, we looked at how to adjust the lengths of patterns, rhythms and harmonies. Now we’ll see how to specify chords and scales to create harmonic progressions.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>The most straightforward way is to specify all chords and scales explicitly. As a first example, I’ve specified <a href="https://youtu.be/5pidokakU4I">one of the most (over?-)used chord progressions</a> in pop music, the I-V-vi-IV progression, in C major. The results are in <a href="#harmony_example1"><code>docs/examples/harmony_example1.py</code></a>. The relevant lines in <code>harmony_example1.py</code> are</p>
<pre><code>&quot;foot_pcs&quot;: (&quot;C&quot;, &quot;G&quot;, &quot;A&quot;, &quot;F&quot;),
&quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;, &quot;MINOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;),
&quot;scales&quot;: (&quot;MAJOR_SCALE&quot;, &quot;MIXOLYDIAN&quot;, &quot;AEOLIAN&quot;, &quot;LYDIAN&quot;),</code></pre>
<div id="harmony_example1-div" class="example-div">
<p><span id="harmony_example1"><strong>Example:</strong> <code>docs/examples/harmony_example1.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example1.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example1.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example1_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example1.m4a" controls=""><a href="resources/m4as/harmony_example1.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C+MIXOLYDIAN%2C+AEOLIAN%2C+LYDIAN&amp;chords=MAJOR_TRIAD%2C+MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_TRIAD&amp;foot_pcs=C%2C+G%2C+A%2C+F" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>There’s a lot to explain here:</p>
<ol type="1">
<li>Strings like <code>"C"</code> and <code>"MAJOR_TRIAD"</code> name constants that are defined in <code>src\er_constants.py</code> and documented <a href="constants.html">here</a>. If you know any music theory, the meaning of the constants above shouldn’t require any further explanation for now.</li>
<li>In this script, we call the main bass pitch of each chord its “foot”. The main bass pitch is a little like the “root” of a chord, except that the main bass pitch doesn’t have to be the root of a chord (as in the case of inverted chords).</li>
<li>Each foot is associated with the chord and the scale in the same serial position. Both the chord and the scale will be transposed so that they begin on the foot. Thus, there is a one-to-one correspondence between chords and scales (much like the “chord-scale” approach sometimes used in jazz pedagogy).</li>
</ol>
<p>We can easily put the progression into another key by changing <a href="settings.html#foot_pcs"><code>foot_pcs</code></a>. For instance, here it is in E major:</p>
<pre><code>&quot;foot_pcs&quot;: (&quot;E&quot;, &quot;B&quot;, &quot;C#&quot;, &quot;A&quot;),
&quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;, &quot;MINOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;),
&quot;scales&quot;: (&quot;MAJOR_SCALE&quot;, &quot;MIXOLYDIAN&quot;, &quot;AEOLIAN&quot;, &quot;LYDIAN&quot;),</code></pre>
<p>There are no constraints on <a href="settings.html#foot_pcs"><code>foot_pcs</code></a>, so we can get a different progression by changing <a href="settings.html#foot_pcs"><code>foot_pcs</code></a> arbitrarily. For example, in <a href="#harmony_example2"><code>docs/examples/harmony_example2.py</code></a> I’ve changed the middle two members of <a href="settings.html#foot_pcs"><code>foot_pcs</code></a> to create a more chromatic progression:</p>
<pre><code>&quot;foot_pcs&quot;: (&quot;E&quot;, &quot;G&quot;, &quot;D&quot;, &quot;A&quot;), # was (&quot;E&quot;, &quot;B&quot;, &quot;C#&quot;, &quot;A&quot;)
&quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;, &quot;MINOR_TRIAD&quot;, &quot;MAJOR_TRIAD&quot;),
&quot;scales&quot;: (&quot;MAJOR_SCALE&quot;, &quot;MIXOLYDIAN&quot;, &quot;AEOLIAN&quot;, &quot;LYDIAN&quot;),</code></pre>
<div id="harmony_example2-div" class="example-div">
<p><span id="harmony_example2"><strong>Example:</strong> <code>docs/examples/harmony_example2.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example2.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example2.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example2_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example2.m4a" controls=""><a href="resources/m4as/harmony_example2.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C+MIXOLYDIAN%2C+AEOLIAN%2C+LYDIAN&amp;chords=MAJOR_TRIAD%2C+MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_TRIAD&amp;foot_pcs=E%2C+G%2C+D%2C+A" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>There are, however, two important constraints on <a href="settings.html#chords"><code>chords</code></a> and <a href="settings.html#scales"><code>scales</code></a>.</p>
<ol type="1">
<li>All the items of <a href="settings.html#chords"><code>chords</code></a> must have the same number of pitch-classes, and all the items of <a href="settings.html#scales"><code>scales</code></a> must as well. This means, for example, you can’t go from a major triad to a seventh chord, or from a major scale to a whole-tone scale. (You can, however, use scales or chords with any number of pitch-classes you like—as long as that number remains the same.)<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></li>
<li>Every scale must be a superset of the associated chord. So, for example
<ul>
<li><code>"MAJOR_TRIAD"</code> will work with <code>"MAJOR_SCALE"</code>, <code>"MIXOLYDIAN"</code>, or any other scale that contains a major triad beginning on its first pitch</li>
<li><code>"MAJOR_TRIAD"</code> will <em>not</em> work with <code>"AEOLIAN"</code>, <code>"DORIAN"</code>, etc., because these scales contain a minor triad beginning on their first pitch</li>
</ul></li>
</ol>
<p>Both <a href="settings.html#chords"><code>chords</code></a> and <a href="settings.html#scales"><code>scales</code></a> will be looped through if they are shorter than <a href="settings.html#foot_pcs"><code>foot_pcs</code></a>. <a href="#harmony_example3"><code>docs/examples/harmony_example3.py</code></a> illustrates with the following short loop:</p>
<pre><code>    &quot;foot_pcs&quot;: (&quot;E&quot;, &quot;G&quot;),
    &quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;,), # the trailing commas before the parentheses
    &quot;scales&quot;: (&quot;MIXOLYDIAN&quot;,),  #   are necessary!</code></pre>
<div id="harmony_example3-div" class="example-div">
<p><span id="harmony_example3"><strong>Example:</strong> <code>docs/examples/harmony_example3.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example3.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example3.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example3_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example3.m4a" controls=""><a href="resources/m4as/harmony_example3.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MIXOLYDIAN%2C&amp;chords=MAJOR_TRIAD%2C&amp;foot_pcs=E%2C+G" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>The sequences <a href="settings.html#chords"><code>chords</code></a> and <a href="settings.html#scales"><code>scales</code></a> do not have to have the same number of items, as <a href="#harmony_example4"><code>docs/examples/harmony_example4.py</code></a> demonstrates:</p>
<pre><code>    &quot;foot_pcs&quot;: (&quot;E&quot;, &quot;G&quot;, &quot;E&quot;, &quot;C&quot;),
    &quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;,),
    &quot;scales&quot;: (&quot;MIXOLYDIAN&quot;, &quot;LYDIAN&quot;),</code></pre>
<div id="harmony_example4-div" class="example-div">
<p><span id="harmony_example4"><strong>Example:</strong> <code>docs/examples/harmony_example4.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example4.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example4.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example4_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example4.m4a" controls=""><a href="resources/m4as/harmony_example4.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MIXOLYDIAN%2C+LYDIAN&amp;chords=MAJOR_TRIAD%2C&amp;foot_pcs=E%2C+G%2C+E%2C+C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>So far, the length of the progression has always been taken implicitly from the length of <a href="settings.html#foot_pcs"><code>foot_pcs</code></a>. But it is also possible to set the length of the progression explicitly, using <a href="settings.html#num_harmonies"><code>num_harmonies</code></a>, as in <a href="#harmony_example5"><code>docs/examples/harmony_example5.py</code></a>. Doing so allows us to create “pedal points” on a repeated bass note:</p>
<pre><code>    &quot;num_harmonies&quot;: 4,
    &quot;foot_pcs&quot;: (&quot;D&quot;,),
    # This example also illustrates a strategy for simulating mixing seventh
    #   chords with triads, using incomplete seventh chords.
    &quot;chords&quot;: (&quot;MAJOR_7TH_NO5&quot;, &quot;DOMINANT_7TH_NO3&quot;, &quot;MAJOR_64&quot;, &quot;MAJOR_63&quot;),
    &quot;scales&quot;: (&quot;MAJOR_SCALE&quot;, &quot;MIXOLYDIAN&quot;, &quot;DORIAN&quot;, &quot;AEOLIAN&quot;),</code></pre>
<div id="harmony_example5-div" class="example-div">
<p><span id="harmony_example5"><strong>Example:</strong> <code>docs/examples/harmony_example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example5.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example5.m4a" controls=""><a href="resources/m4as/harmony_example5.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C+MIXOLYDIAN%2C+MIXOLYDIAN%2C+AEOLIAN&amp;chords=MAJOR_7TH_NO5%2C+DOMINANT_7TH_NO3%2C+MAJOR_64%2C+MAJOR_63&amp;num_harmonies=4&amp;foot_pcs=D%2C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Another useful setting for creating harmonic progressions is <a href="settings.html#interval_cycle"><code>interval_cycle</code></a>. If we pass <a href="settings.html#interval_cycle"><code>interval_cycle</code></a> to the script, then any values of <a href="settings.html#foot_pcs"><code>foot_pcs</code></a> beyond the first are ignored. Instead, the progression of <a href="settings.html#foot_pcs"><code>foot_pcs</code></a> is created by repeatedly progressing upwards by <a href="settings.html#interval_cycle"><code>interval_cycle</code></a>. See <a href="#harmony_example6"><code>docs/examples/harmony_example6.py</code></a>:</p>
<pre><code>    &quot;num_harmonies&quot;: 4,
    &quot;interval_cycle&quot;: &quot;PERFECT_4TH&quot;,
    &quot;foot_pcs&quot;: (&quot;Eb&quot;,),
    # The preceding three lines are equivalent to:
    #   `&quot;foot_pcs&quot;: (&quot;Eb&quot;, &quot;Ab&quot;, &quot;Db&quot;, &quot;Gb&quot;)`
    &quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;,),
    &quot;scales&quot;: (&quot;MAJOR_SCALE&quot;,),</code></pre>
<div id="harmony_example6-div" class="example-div">
<p><span id="harmony_example6"><strong>Example:</strong> <code>docs/examples/harmony_example6.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example6.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example6.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example6_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example6.m4a" controls=""><a href="resources/m4as/harmony_example6.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C&amp;chords=MAJOR_TRIAD%2C&amp;num_harmonies=4&amp;interval_cycle=PERFECT_4TH&amp;foot_pcs=Eb%2C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p><a href="settings.html#interval_cycle"><code>interval_cycle</code></a> can also consist of more than one interval, as in <a href="#harmony_example7"><code>docs/examples/harmony_example7.py</code></a>. (Note that, since the intervals in <a href="settings.html#interval_cycle"><code>interval_cycle</code></a> are always understood <em>upwards</em>, <code>"MINOR_6TH"</code> in this example is equivalent to a descending major third.)</p>
<pre><code>{
    &quot;num_harmonies&quot;: 4,
    &quot;interval_cycle&quot;: (&quot;PERFECT_4TH&quot;, &quot;MINOR_6TH&quot;),
    &quot;foot_pcs&quot;: (&quot;Eb&quot;,),
    # The preceding three lines are equivalent to:
    #   `&quot;foot_pcs&quot;: (&quot;Eb&quot;, &quot;Ab&quot;, &quot;E&quot;, &quot;A&quot;)`
    &quot;chords&quot;: (&quot;MAJOR_TRIAD&quot;,),
    &quot;scales&quot;: (&quot;MAJOR_SCALE&quot;,),
}</code></pre>
<div id="harmony_example7-div" class="example-div">
<p><span id="harmony_example7"><strong>Example:</strong> <code>docs/examples/harmony_example7.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example7.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example7.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example7_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example7.m4a" controls=""><a href="resources/m4as/harmony_example7.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C&amp;chords=MAJOR_TRIAD%2C&amp;num_harmonies=4&amp;interval_cycle=PERFECT_4TH%2C+MINOR_6TH&amp;foot_pcs=Eb%2C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Before concluding this introduction to specifying harmonies, I should add a few words about what the script actually does with <a href="settings.html#chords"><code>chords</code></a> and <a href="settings.html#scales"><code>scales</code></a>.</p>
<ul>
<li><a href="settings.html#scales"><code>scales</code></a> are used unconditionally: during each harmony, pitches are drawn exclusively from the associated scale. When a pattern is voice-led from one harmony to another, a bijective mapping is effected between the associated scales.</li>
<li>the use of <a href="settings.html#chords"><code>chords</code></a> is more contingent. The most important relevant settings are
<ul>
<li>if <a href="settings.html#chord_tone_selection"><code>chord_tone_selection</code></a> is <code>True</code>, then when constructing the initial pattern, the script probabilistically decides whether each note should be a chord-tone (according to <a href="settings.html#chord-tone-settings">parameters that you specify</a>).</li>
<li>if <a href="settings.html#voice_lead_chord_tones"><code>voice_lead_chord_tones</code></a> is <code>True</code>, then when voice-leading the pattern over subsequent harmonies, the script will ensure that chord-tones are mapped to chord-tones (and non-chord-tones to non-chord-tones).</li>
</ul></li>
</ul>
<p>In the preceding examples of this section both <a href="settings.html#chord_tone_selection"><code>chord_tone_selection</code></a> and <a href="settings.html#voice_lead_chord_tones"><code>voice_lead_chord_tones</code></a> have been <code>True</code>. As a contrasting illustration, <a href="#harmony_example8"><code>docs/examples/harmony_example8.py</code></a> repeats the settings of <a href="#harmony_example6"><code>docs/examples/harmony_example6.py</code></a>, with the sole difference that <a href="settings.html#voice_lead_chord_tones"><code>voice_lead_chord_tones</code></a> is now set to <code>False</code>. (Note, however, that the settings <code>force_foot_in_bass = True</code> and <code>extend_bass_range_for_foots = 7</code> in <code>examples/harmony_example_base.py</code> are still causing the foot of each scale/chord to sound on beat one of each harmony.)</p>
<div id="harmony_example8-div" class="example-div">
<p><span id="harmony_example8"><strong>Example:</strong> <code>docs/examples/harmony_example8.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example8.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example8.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example8_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example8.m4a" controls=""><a href="resources/m4as/harmony_example8.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=n&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C&amp;chords=MAJOR_TRIAD%2C&amp;num_harmonies=4&amp;interval_cycle=PERFECT_4TH&amp;foot_pcs=Eb%2C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p><a href="#harmony_example9"><code>docs/examples/harmony_example9.py</code></a> is similar, but with <code>chord_tone_selection = False</code> as well.</p>
<div id="harmony_example9-div" class="example-div">
<p><span id="harmony_example9"><strong>Example:</strong> <code>docs/examples/harmony_example9.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example9.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example9.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example9_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example9.m4a" controls=""><a href="resources/m4as/harmony_example9.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=n&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C&amp;chords=MAJOR_TRIAD%2C&amp;num_harmonies=4&amp;interval_cycle=PERFECT_4TH&amp;foot_pcs=Eb%2C&amp;chord_tone_selection=n" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<h3 id="specifying-rhythms">Specifying rhythms</h3>
<p>Besides setting <a href="settings.html#rhythm_len"><code>rhythm_len</code></a> as we did <a href="#how-it-works">above</a>, there are many other ways of controlling the rhythms that are produced.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p>To begin with, we have <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> and <a href="settings.html#onset_density"><code>onset_density</code></a>:</p>
<ul>
<li><a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> indicates the basic “grid” on which note onsets can take place, measured in quarter notes.</li>
<li><a href="settings.html#onset_density"><code>onset_density</code></a> indicates the proportion of grid points that should have an onset.</li>
</ul>
<p>So for example, in <a href="#rhythm_example1"><code>docs/examples/rhythm_example1.py</code></a>, <code>"onset_subdivision" = 1/4</code> indicates a sixteenth-note grid, and <code>"onset_density" = 1.0</code> indicates that every point in the grid should have an onset, creating a <em>moto perpetuo</em> texture. (For clarity/brevity, this example has only one voice.)</p>
<pre><code>{
&quot;num_voices&quot;: 1,
&quot;onset_density&quot;: 0.5,
&quot;onset_subdivision&quot;: 1/4,
}</code></pre>
<div id="rhythm_example1-div" class="example-div">
<p><span id="rhythm_example1"><strong>Example:</strong> <code>docs/examples/rhythm_example1.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example1.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example1.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example1_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example1.m4a" controls=""><a href="resources/m4as/rhythm_example1.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=1.0&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>If we reduce <a href="settings.html#onset_density"><code>onset_density</code></a>, as in <a href="#rhythm_example2"><code>docs/examples/rhythm_example2.py</code></a>, the proportion of the sixteenth-grid that is filled with onsets will be correspondingly reduced.</p>
<pre><code>{
    &quot;num_voices&quot;: 1,
    &quot;onset_density&quot;: 0.5,
    &quot;onset_subdivision&quot;: 1 / 4,
}</code></pre>
<div id="rhythm_example2-div" class="example-div">
<p><span id="rhythm_example2"><strong>Example:</strong> <code>docs/examples/rhythm_example2.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example2.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example2.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example2_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example2.m4a" controls=""><a href="resources/m4as/rhythm_example2.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.5&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Another important rhythmic parameter is <a href="settings.html#dur_density"><code>dur_density</code></a>. It specifies the proportion of time that should be filled by note durations, irrespective of how many onsets there are. So far we have left <a href="settings.html#dur_density"><code>dur_density</code></a> at the default value of <code>1.0</code>, which means that all notes last until the next onset in that voice. (In musical terms, all notes are <em>legato</em>.) If we decrease it to 0.75, as in <a href="#rhythm_example3"><code>docs/examples/rhythm_example3.py</code></a>, some of the notes will become shorter, so that 75% of the total time of the rhythm is filled by sounding notes.</p>
<pre><code>{
    &quot;num_voices&quot;: 1,
    &quot;onset_density&quot;: 0.5,
    &quot;dur_density&quot;: 0.75,
    &quot;onset_subdivision&quot;: 1 / 4,
}}</code></pre>
<div id="rhythm_example3-div" class="example-div">
<p><span id="rhythm_example3"><strong>Example:</strong> <code>docs/examples/rhythm_example3.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example3.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example3.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example3_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example3.m4a" controls=""><a href="resources/m4as/rhythm_example3.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.5&amp;dur_density=0.75&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>To obtain a <em>staccato</em> effect, we can make <a href="settings.html#dur_density"><code>dur_density</code></a> still shorter, but to obtain <em>really</em> short notes, we may have to adjust <a href="settings.html#min_dur"><code>min_dur</code></a> as well, which sets the minimum duration of each pitch as well.</p>
<pre><code>{
    &quot;num_voices&quot;: 1,
    &quot;onset_density&quot;: 0.5,
    &quot;dur_density&quot;: 0.25,
    &quot;min_dur&quot;: 1/8,
    &quot;onset_subdivision&quot;: 1 / 4,
}</code></pre>
<div id="rhythm_example4-div" class="example-div">
<p><span id="rhythm_example4"><strong>Example:</strong> <code>docs/examples/rhythm_example4.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example4.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example4.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example4_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example4.m4a" controls=""><a href="resources/m4as/rhythm_example4.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.5&amp;dur_density=0.25&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;min_dur=0.125&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>We can change <code>"onset_subdivision"</code> as well. For example, to have a grid of eighth-note triplets, we would set <code>"onset_subdivision" = 1/3</code>. And since computers have no problem with precise, strange rhythms, we could also set it to unusual values like <code>5/13</code> or <code>math.pi / 12</code>.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<pre><code>{
    &quot;num_voices&quot;: 1,
    &quot;onset_density&quot;: 0.75,
    &quot;dur_density&quot;: 0.25,
    &quot;min_dur&quot;: 1/8,
    &quot;onset_subdivision&quot;: 3/ 13,
}</code></pre>
<div id="rhythm_example5-div" class="example-div">
<p><span id="rhythm_example5"><strong>Example:</strong> <code>docs/examples/rhythm_example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/rhythm_example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example5.m4a" controls=""><a href="resources/m4as/rhythm_example5.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.75&amp;dur_density=0.25&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;min_dur=0.125&amp;onset_subdivision=0.23076923076923078" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>All of the settings we have been looking at so far are “per-voice”, meaning that they can be set to a different value in each voice. If we set <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> to a different unusual value in each voice, we get a particularly chaotic effect. (I find that the chaos can be reined in a bit by setting <a href="settings.html#rhythm_len"><code>rhythm_len</code></a> to a short value, creating a brief rhythmic loop.)</p>
<pre><code>{
    &quot;rhythm_len&quot;: 1,
    &quot;num_voices&quot;: 3,
    &quot;onset_density&quot;: [0.25, 0.5, 0.75],
    &quot;dur_density&quot;: [0.25, 0.5, 0.25],
    &quot;min_dur&quot;: [0.25, 0.25, 1/8],
    &quot;onset_subdivision&quot;: [3/ 13, 5/12, 6/11],
}</code></pre>
<div id="rhythm_example6-div" class="example-div">
<p><span id="rhythm_example6"><strong>Example:</strong> <code>docs/examples/rhythm_example6.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example6.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/rhythm_example6_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example6.m4a" controls=""><a href="resources/m4as/rhythm_example6.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.4%2C+0.5%2C+0.75&amp;dur_density=0.4%2C+0.5%2C+0.25&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=3&amp;min_dur=0.25%2C+0.25%2C+0.125&amp;onset_subdivision=0.23076923076923078%2C+0.4166666666666667%2C+0.5454545454545454" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>There are also a few settings that govern the relation between different voices. If <a href="settings.html#hocketing"><code>hocketing</code></a> is <code>True</code>, then, to the extent possible, the onsets of each voice will occur when there is no onset in any other voice. (In textures with many voices, it is also possible to assign specific pairs of voices to hocket with one another.)</p>
<pre><code>{
    &quot;num_voices&quot;: 2,
    &quot;onset_density&quot;: 0.4,
    &quot;dur_density&quot;: 0.4,
    &quot;min_dur&quot;: 0.25,
    &quot;onset_subdivision&quot;: 0.25,
    &quot;hocketing&quot;: True,
}</code></pre>
<div id="rhythm_example7-div" class="example-div">
<p><span id="rhythm_example7"><strong>Example:</strong> <code>docs/examples/rhythm_example7.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example7.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example7.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example7_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example7.m4a" controls=""><a href="resources/m4as/rhythm_example7.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.4&amp;dur_density=0.4&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=2&amp;min_dur=0.25&amp;onset_subdivision=0.25&amp;hocketing=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Another setting that governs the rhythmic relation between voices is <a href="settings.html#rhythmic_unison"><code>rhythmic_unison</code></a>, which causes voices to have exactly the same rhythm. (Like <a href="settings.html#hocketing"><code>hocketing</code></a>, it can be provided a boolean, or a list of tuples of voices; see the settings documentation for more details.)</p>
<pre><code>{
    &quot;num_voices&quot;: 3,
    &quot;rhythmic_unison&quot;: True,
    &quot;onset_density&quot;: .7,
    &quot;dur_density&quot;: 0.6,
    &quot;min_dur&quot;: 0.25,
    &quot;onset_subdivision&quot;: 1/4,
}</code></pre>
<div id="rhythm_example8-div" class="example-div">
<p><span id="rhythm_example8"><strong>Example:</strong> <code>docs/examples/rhythm_example8.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example8.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example8.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example8_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example8.m4a" controls=""><a href="resources/m4as/rhythm_example8.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.7&amp;dur_density=0.6&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=3&amp;rhythmic_unison=y&amp;min_dur=0.25&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>When <a href="settings.html#rhythmic_unison"><code>rhythmic_unison</code></a> is applied, rhythmic settings like <a href="settings.html#onset_density"><code>onset_density</code></a> only have any effect in the “leader” voice, whose rhythm is simply copied into the other voices. If we wanted to specify a different <a href="settings.html#onset_density"><code>onset_density</code></a> in a “follower” voice, it would be ignored. This situation would call for the related setting <a href="settings.html#rhythmic_quasi_unison"><code>rhythmic_quasi_unison</code></a>. When <a href="settings.html#rhythmic_quasi_unison"><code>rhythmic_quasi_unison</code></a> applies, then, instead of copying the “leader” rhythm into the “follower” voices, the onsets of the “follower” voices are constrained so far as possible to coincide with those of the “leader.” In <a href="#rhythm_example9"><code>docs/examples/rhythm_example9.py</code></a>, the leader is the bass voice (midi guitar). The middle voice (midi piano) has a <em>lower</em> <a href="settings.html#onset_density"><code>onset_density</code></a>, and the top voice (midi electric piano) has a <em>higher</em> <a href="settings.html#onset_density"><code>onset_density</code></a>.</p>
<pre><code>{
    &quot;num_voices&quot;: 3,
    &quot;rhythmic_quasi_unison&quot;: True,
    &quot;onset_density&quot;: [0.5, 0.4, 0.6],
    &quot;dur_density&quot;: [0.5, 0.4, 0.6],
    &quot;min_dur&quot;: 0.25,
    &quot;onset_subdivision&quot;: 1 / 4,
}</code></pre>
<div id="rhythm_example9-div" class="example-div">
<p><span id="rhythm_example9"><strong>Example:</strong> <code>docs/examples/rhythm_example9.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example9.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example9.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example9_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example9.m4a" controls=""><a href="resources/m4as/rhythm_example9.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.5%2C+0.4%2C+0.6&amp;dur_density=0.5%2C+0.4%2C+0.6&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=3&amp;rhythmic_quasi_unison=y&amp;min_dur=0.25&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>We can obtain more explicit control of the rhythms through the <a href="settings.html#obligatory_onsets"><code>obligatory_onsets</code></a> setting, which specifies a sequence of times at which the rhythms will be “obliged” to have a note onset. It’s also necessary to specify <a href="settings.html#obligatory_onsets_modulo"><code>obligatory_onsets_modulo</code></a> in order to specify when these onsets should repeat (e.g., every two beats).</p>
<p>For example, in <a href="#rhythm_example10"><code>docs/examples/rhythm_example10.py</code></a>, I’ve set <a href="settings.html#obligatory_onsets"><code>obligatory_onsets</code></a> to <code>[0, 0.75, 1.5]</code> and <a href="settings.html#obligatory_onsets_modulo"><code>obligatory_onsets_modulo</code></a> to <code>2</code> in order to specify a <em>tresillo</em> 3–3–2 rhythm. Since the value of <a href="settings.html#onset_density"><code>onset_density</code></a> implies more than three onsets every two beats, additional onsets are added to the underlying scaffold supplied by the values in <a href="settings.html#obligatory_onsets"><code>obligatory_onsets</code></a>.</p>
<pre><code>{
    &quot;num_voices&quot;: 3,
    &quot;obligatory_onsets&quot;: [0, 0.75, 1.5],
    &quot;obligatory_onsets_modulo&quot;: 2,
    &quot;onset_density&quot;: 0.5,
    &quot;dur_density&quot;: 0.5,
    &quot;min_dur&quot;: 0.25,
    &quot;onset_subdivision&quot;: 0.25,
}</code></pre>
<div id="rhythm_example10-div" class="example-div">
<p><span id="rhythm_example10"><strong>Example:</strong> <code>docs/examples/rhythm_example10.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example10.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/rhythm_example10.svg" class="notation" alt=" notation" /> <img src="resources/pngs/rhythm_example10_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example10.m4a" controls=""><a href="resources/m4as/rhythm_example10.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.5&amp;dur_density=0.5&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=3&amp;obligatory_onsets=0%2C+0.75%2C+1.5&amp;obligatory_onsets_modulo=2&amp;min_dur=0.25&amp;onset_subdivision=0.25" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>It is possible to specify an irregular grid upon which note onsets will take place using <a href="settings.html#sub_subdivisions"><code>sub_subdivisions</code></a>. This setting takes a sequence of integers and subdivides the grid specified by <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> into parts defined by the ratio of these integers. For example, in <a href="#rhythm_example11"><code>docs/examples/rhythm_example11.py</code></a> below, <a href="settings.html#sub_subdivisions"><code>sub_subdivisions</code></a> is <code>[4,3]</code>, which creates an uneven “swing” feel where every first note is 4/3rds as long as every second note.[^To keep the number of total onsets consistent, you’ll probably want to increase <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> by taking the value you otherwise would have chosen and multiplying it by the length of <a href="settings.html#sub_subdivisions"><code>sub_subdivisions</code></a>.] You’ll notice that <a href="#rhythm_example11"><code>docs/examples/rhythm_example11.py</code></a> is precisely the same as <a href="#rhythm_example1"><code>docs/examples/rhythm_example1.py</code></a>, except for the uneven rhythms.</p>
<pre><code>{
    &quot;num_voices&quot;: 1,
    &quot;onset_density&quot;: 1.0,
    &quot;onset_subdivision&quot;: 0.5,
    &quot;sub_subdivisions&quot;: [4, 3],
}</code></pre>
<div id="rhythm_example11-div" class="example-div">
<p><span id="rhythm_example11"><strong>Example:</strong> <code>docs/examples/rhythm_example11.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example11.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/rhythm_example11_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example11.m4a" controls=""><a href="resources/m4as/rhythm_example11.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=1.0&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=1&amp;onset_subdivision=0.5&amp;sub_subdivisions=4%2C+3" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>I think, however, that it is more interesting to experiment with values of <a href="settings.html#sub_subdivisions"><code>sub_subdivisions</code></a> that are further from what a human would be likely to produce, as I have tried to do in <a href="#rhythm_example12"><code>docs/examples/rhythm_example12.py</code></a>.</p>
<pre><code>{
    &quot;num_voices&quot;: 3,
    &quot;onset_density&quot;: 0.4,
    &quot;onset_subdivision&quot;: 2,
    &quot;sub_subdivisions&quot;: [12, 13, 11, 15, 17, 10],
    &quot;obligatory_onsets&quot;: 0,
    &quot;obligatory_onsets_modulo&quot;: 2,
    &quot;hocketing&quot;: True,
}</code></pre>
<div id="rhythm_example12-div" class="example-div">
<p><span id="rhythm_example12"><strong>Example:</strong> <code>docs/examples/rhythm_example12.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/rhythm_example12.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/rhythm_example12_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/rhythm_example12.m4a" controls=""><a href="resources/m4as/rhythm_example12.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=0&amp;pattern_len=4&amp;num_harmonies=3&amp;harmony_len=4%2C+2%2C+2&amp;num_reps_super_pattern=4&amp;foot_pcs=6&amp;interval_cycle=4&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+D+%2A+OCTAVE3&amp;scales=PENTATONIC_SCALE&amp;force_foot_in_bass=global_first_note&amp;max_repeated_notes=0&amp;forbidden_intervals=0%2C&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;onset_density=0.4&amp;dur_density=1.0&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;chords=MAJOR_TRIAD&amp;voice_lead_chord_tones=n&amp;num_voices=3&amp;onset_subdivision=2&amp;sub_subdivisions=12%2C+13%2C+11%2C+15%2C+17%2C+10&amp;obligatory_onsets=0&amp;obligatory_onsets_modulo=2&amp;hocketing=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<h3 id="continuous-rhythms">Continuous rhythms</h3>
<p>What do I mean by “continuous” rhythms? Well, most if not all, human music uses “rational” rhythms, where the durations are (at least notionally) small-integer ratios of one another. For example, a quarter-note is 2 times an eighth-note, 3 times a triplet, 4/3rds of a dotted eighth-note, and so on. But computers don’t need to restrict themselves in this way! We can have a computer make rhythms that arbitrarily chop up the real number line. I have implemented this possibility in this script.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<p>To better introduce the effect of these continuous rhythms, let’s start with a pattern, without continuous rhythms, that is, with <code>cont_rhythms = "none"</code>, its default value. To place a single rhythm as our focus, I’ve set <code>rhythmic_unison = True</code>.</p>
<div id="cont_rhythm_example1-div" class="example-div">
<p><span id="cont_rhythm_example1"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example1.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example1.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example1_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example1.m4a" controls=""><a href="resources/m4as/cont_rhythm_example1.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.25&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=none&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>Now compare the effect of <a href="#cont_rhythm_example2"><code>docs/examples/cont_rhythm_example2.py</code></a>, where all the settings are the same, except for <code>cont_rhythms = "all"</code>. To me, the rhythm sounds jagged, off-kilter, and sort of incomprehensible, like some sort of alien time signature.</p>
<div id="cont_rhythm_example2-div" class="example-div">
<p><span id="cont_rhythm_example2"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example2.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example2.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example2_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example2.m4a" controls=""><a href="resources/m4as/cont_rhythm_example2.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.25&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=all&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>However, the strangeness of the preceding example is somewhat constrained by the fact that <a href="settings.html#pattern_len"><code>pattern_len</code></a> is not so long that we can’t still readily hear it as a loop. If we set <a href="settings.html#pattern_len"><code>pattern_len</code></a> to a briefer value, like <code>2</code>, as in <a href="#cont_rhythm_example3"><code>docs/examples/cont_rhythm_example3.py</code></a>, this looping effect is made still stronger, to the extent that the effect of continuous rhythms is fairly subtle.</p>
<div id="cont_rhythm_example3-div" class="example-div">
<p><span id="cont_rhythm_example3"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example3.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example3.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example3_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example3.m4a" controls=""><a href="resources/m4as/cont_rhythm_example3.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.25&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=2&amp;cont_rhythms=all&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>On the other hand, if we increase pattern_len to <code>8</code>, as in <a href="#cont_rhythm_example4"><code>docs/examples/cont_rhythm_example4.py</code></a>, the strangeness is increased, and the pattern made less obvious.</p>
<div id="cont_rhythm_example4-div" class="example-div">
<p><span id="cont_rhythm_example4"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example4.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example4.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example4_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example4.m4a" controls=""><a href="resources/m4as/cont_rhythm_example4.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.25&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=8&amp;cont_rhythms=all&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>The number of onsets in a continuous rhythm is calculated as <code>rhythm_len * onset_density / onset_subdivision</code>. Thus you can increase the number of notes by increasing <a href="settings.html#onset_density"><code>onset_density</code></a> or decreasing <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a>. The onsets and releases are selected at random from the number line, but this randomness is subject to some constraints. In particular, consecutive note onsets are constrained to be at least <a href="settings.html#min_dur"><code>min_dur</code></a> from one another. This has the effect of causing the notes to be somewhat evenly spaced, and the larger the value of min_dur, the more evenly spaced they will be, as in <a href="#cont_rhythm_example5"><code>docs/examples/cont_rhythm_example5.py</code></a>. <a href="settings.html#onset_subdivision"><code>onset_subdivision</code></a> / <a href="settings.html#onset_density"><code>onset_density</code></a> forms an upper bound on min_dur. If <code>min_dur &gt;= onset_density * onset_subdivision</code> in a certain voice, then the notes of that voice will be evenly spaced and <a href="settings.html#cont_rhythms"><code>cont_rhythms</code></a> will have no real effect.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<pre><code>&quot;onset_density&quot;: 0.5,
&quot;onset_subdivision&quot;: 0.25,
&quot;min_dur&quot;: 0.45,</code></pre>
<div id="cont_rhythm_example5-div" class="example-div">
<p><span id="cont_rhythm_example5"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example5.m4a" controls=""><a href="resources/m4as/cont_rhythm_example5.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.45&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=all&amp;onset_subdivision=0.25&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>On the other hand, the more we <em>decrease</em> <a href="settings.html#min_dur"><code>min_dur</code></a>, the less evenly spaced the notes are constrained to be, and the more they may happen to cluster together randomly. To illustrate, in <a href="#cont_rhythm_example6"><code>docs/examples/cont_rhythm_example6.py</code></a>, I’ve reduced <a href="settings.html#min_dur"><code>min_dur</code></a> from <code>0.1</code>, its value in the preceding examples, to <code>0.01</code>.</p>
<div id="cont_rhythm_example6-div" class="example-div">
<p><span id="cont_rhythm_example6"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example6.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example6.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example6_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example6.m4a" controls=""><a href="resources/m4as/cont_rhythm_example6.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.6&amp;dur_density=0.5&amp;min_dur=0.01&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=all&amp;rhythmic_unison=y" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>So far, all the examples have used rhythmic unison. If we set <code>rhythmic_unison = False</code>, then each voice will have its own rhythm, as in <a href="#cont_rhythm_example7"><code>docs/examples/cont_rhythm_example7.py</code></a>, which has the same settings as <a href="#cont_rhythm_example2"><code>docs/examples/cont_rhythm_example2.py</code></a>, except for <a href="settings.html#rhythmic_unison"><code>rhythmic_unison</code></a>. As you can hear, the effect becomes quite chaotic.</p>
<div id="cont_rhythm_example7-div" class="example-div">
<p><span id="cont_rhythm_example7"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example7.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example7.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example7_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example7.m4a" controls=""><a href="resources/m4as/cont_rhythm_example7.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.25&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=all&amp;rhythmic_unison=n" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>This chaos emerges because, even though most music features different voices each with their own rhythm, we nevertheless expect the different rhythms to relate to a common metric structure. Here, there is no such common structure—the notes of the various voices seem to occur as random, because they do!</p>
<p>We can reconcile continuous rhythms with a shared metric structure among the different voices by setting <code>cont_rhythms = 'grid'</code>. With this setting, the script begins by constructing a continuous metric structure or “grid”, and then creating the rhythms of the various parts by selecting onsets from this grid. You can hear the effect in <a href="#cont_rhythm_example8"><code>docs/examples/cont_rhythm_example8.py</code></a>.</p>
<div id="cont_rhythm_example8-div" class="example-div">
<p><span id="cont_rhythm_example8"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example8.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example8.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example8_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example8.m4a" controls=""><a href="resources/m4as/cont_rhythm_example8.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.2&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=3&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=grid&amp;rhythmic_unison=n" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>If <code>cont_rhythms = 'grid'</code>, you can also use other rhythmic settings, such as <a href="settings.html#hocketing"><code>hocketing</code></a>, as in <a href="#cont_rhythm_example9"><code>docs/examples/cont_rhythm_example9.py</code></a>.</p>
<div id="cont_rhythm_example9-div" class="example-div">
<p><span id="cont_rhythm_example9"><strong>Example:</strong> <code>docs/examples/cont_rhythm_example9.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/cont_rhythm_example9.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/pngs/cont_rhythm_example9_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/cont_rhythm_example9.m4a" controls=""><a href="resources/m4as/cont_rhythm_example9.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?seed=2&amp;foot_pcs=2%2C+2%2C+2%2C+1&amp;chords=MAJOR_TRIAD%2C+MINOR_TRIAD%2C+MAJOR_63%2C+MAJOR_TRIAD&amp;scales=LYDIAN%2C+DORIAN%2C+LOCRIAN%2C+MAJOR_SCALE&amp;force_foot_in_bass=global_first_note&amp;onset_density=0.5&amp;dur_density=0.5&amp;min_dur=0.2&amp;voice_ranges=AUTHENTIC_OCTAVES+%2A+C+%2A+OCTAVE3&amp;voice_lead_chord_tones=y&amp;num_voices=2&amp;max_repeated_notes=-1&amp;allow_voice_crossings=n&amp;forbidden_intervals=0&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;randomly_distribute_between_choirs=n&amp;tempo=120&amp;max_consec_seg_from_same_choir=0&amp;length_choir_segments=1&amp;preserve_foot_in_bass=none&amp;pattern_len=4&amp;cont_rhythms=grid&amp;hocketing=y&amp;rhythmic_unison=%281%2C+2%29" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<h2 id="changers-filters-and-transformers">Changers: filters and transformers</h2>
<p>To make our loops more dynamic and unpredictable, we can use “changers”, functions that take the music produced by the script and filter or transform it in some way.</p>
<p>There are two ways to apply changers:</p>
<ul>
<li>The shell script provides an interactive prompt through which changers can be applied and adjusted.</li>
<li>Changer settings stored in a Python source file can be provided with the <code>--changers\-c</code> command-line argument (see the bottom of this section for details).</li>
</ul>
<p>(Changers are not yet implemented in the web version of Efficient Rhythms.) To illustrate, I will re-use <a href="#harmony_example5"><code>docs/examples/harmony_example5.py</code></a>, already seen above, but repeated just below for your convenience.</p>
<div id="harmony_example5-div" class="example-div">
<p><span id="harmony_example5"><strong>Example:</strong> <code>docs/examples/harmony_example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/harmony_example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/harmony_example5.svg" class="notation" alt=" notation" /> <img src="resources/pngs/harmony_example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/harmony_example5.m4a" controls=""><a href="resources/m4as/harmony_example5.m4a"> audio</a></audio> <a href="http://malcolmsailor.pythonanywhere.com/?num_reps_super_pattern=4&amp;seed=2&amp;pattern_len=4&amp;consonance_treatment=none&amp;harmony_len=4&amp;output_path=EFFRHY%2Fdocs%2Fexamples%2Fmidi%2F&amp;overwrite=True&amp;force_foot_in_bass=first_beat&amp;extend_bass_range_for_foots=7&amp;voice_lead_chord_tones=y&amp;onset_density=0.7&amp;dur_density=0.7&amp;unison_weighted_as=SECOND&amp;randomly_distribute_between_choirs=y&amp;length_choir_segments=0.25&amp;tempo=132&amp;choirs_separate_tracks=False&amp;max_consec_seg_from_same_choir=0&amp;preserve_foot_in_bass=none&amp;scales=MAJOR_SCALE%2C+MIXOLYDIAN%2C+MIXOLYDIAN%2C+AEOLIAN&amp;chords=MAJOR_7TH_NO5%2C+DOMINANT_7TH_NO3%2C+MAJOR_64%2C+MAJOR_63&amp;num_harmonies=4&amp;foot_pcs=D%2C" target="_blank" rel="noopener noreferrer">Click to open this example in the web app</a></p>
</div>
<p>There are two types of changers, “filters,” and “transformers”. Filters remove notes from the score, whereas transformers apply some change to the notes of the score.</p>
<p>The simplest filter is <code>PitchFilter</code>, which filters <em>all</em> notes from the score. Of course, we probably don’t want to remove all the notes from the score—we’ll be left with silence. Thus we apply the filter <em>probabilistically</em>. In <a href="#changer_example1"><code>docs/examples/changer_example1.py</code></a>, the notes are filtered with a probability of 0.5. Thus, (approximately) half of the notes have been removed, and half remain. To my ears, the effect is quite dynamic; the harmonic gist of <a href="#harmony_example5"><code>docs/examples/harmony_example5.py</code></a> remains present, yet in an unpredictable, ever-shifting guise.</p>
<div id="changer_example1-div" class="example-div">
<p><span id="changer_example1"><strong>Example:</strong> <code>docs/examples/changer_example1.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example1.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example1.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example1_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example1.m4a" controls=""><a href="resources/m4as/changer_example1.m4a"> audio</a></audio></p>
</div>
<p>This is how the interactive prompt that applies the settings from <a href="#changer_example1"><code>docs/examples/changer_example1.py</code></a> looks. To save space in subsequent examples, I will show only those settings that have been changed from their default values.</p>
<pre><code>## Pitch filter ################################################################
Description: Pitch filter removes notes of any pitch

     (1) Probability curve: Static
     (2) Segment length range: (1, 1)
     (3) Rhythmic granularity: 0
     (4) Static probability: 0.5
     (5) Only apply to notes marked by:
     (6) Start time: 0
     (7) End time: 64.0                                 Total length: 64.0
     (8) By voice: True
     (9) Voices: [0, 1, 2]                          Number of voices: 3
    (10) Exemptions: off
    (11) Adjust durations: None</code></pre>
<p>We can also apply the filter according to “probability curves”; i.e., functions that take the onset time of a note as argument, and return a probability. In <a href="#changer_example2"><code>docs/examples/changer_example2.py</code></a>, I apply the filter according to a linear probability curve that decreases steadily from 1.0 to 0.0. Thus, at the start of the score, <em>all</em> of the notes are filtered; by the end, none of them are.</p>
<pre><code>## Pitch filter ################################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...</code></pre>
<div id="changer_example2-div" class="example-div">
<p><span id="changer_example2"><strong>Example:</strong> <code>docs/examples/changer_example2.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example2.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example2.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example2_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example2.m4a" controls=""><a href="resources/m4as/changer_example2.m4a"> audio</a></audio></p>
</div>
<p>Although each changer can only take a single probability curve, we can include multiple changers, each with its own start and end times, in order to achieve the effect of multiple probability curves. In <a href="#changer_example3"><code>docs/examples/changer_example3.py</code></a>, I have combined a <em>decreasing</em> curve from the beginning of the score to its middle with an <em>increasing</em> curve from the middle to the end. The effect is that the score begins in silence, emerges in full half way through, and then retreats to silence again.</p>
<pre><code>## Pitch filter ################################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...
     (8) Start time: 0.0
     (9) End time: 32.0                                 Total length: 64.0
     ...</code></pre>
<pre><code>## Pitch filter ################################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: False
     ...
     (8) Start time: 32.0
     (9) End time: 64.0                                 Total length: 64.0
     ...</code></pre>
<div id="changer_example3-div" class="example-div">
<p><span id="changer_example3"><strong>Example:</strong> <code>docs/examples/changer_example3.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example3.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example3.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example3_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example3.m4a" controls=""><a href="resources/m4as/changer_example3.m4a"> audio</a></audio></p>
</div>
<p>If <code>by_voice</code> is <code>True</code> (its default value), we can apply the filter only to specific voices. We do this by setting <code>voices</code> to a list of voice indices. <a href="#changer_example4"><code>docs/examples/changer_example4.py</code></a> uses the same decreasing pitch filter as <a href="#changer_example1"><code>docs/examples/changer_example1.py</code></a>, but now the filter applies only to voices 1 and 2. The bass voice (voice 0) is unfiltered and so sounds below the other parts throughout.</p>
<pre><code>## Pitch filter ################################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...
    (11) Voices: [1, 2]                             Number of voices: 3
     ...</code></pre>
<div id="changer_example4-div" class="example-div">
<p><span id="changer_example4"><strong>Example:</strong> <code>docs/examples/changer_example4.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example4.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example4.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example4_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example4.m4a" controls=""><a href="resources/m4as/changer_example4.m4a"> audio</a></audio></p>
</div>
<p>On the other hand, if <code>by_voice</code> is <code>False</code>, then at each onset, all notes in the score sounding at that onset will be filtered as a group. Ref:changer_example5 illustrates by repeating the settings from <a href="#changer_example1"><code>docs/examples/changer_example1.py</code></a>, but with <code>by_voice = False</code>.</p>
<pre><code>## Pitch filter ################################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...
    (10) By voice: False
     ...</code></pre>
<div id="changer_example5-div" class="example-div">
<p><span id="changer_example5"><strong>Example:</strong> <code>docs/examples/changer_example5.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example5.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example5.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example5_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example5.m4a" controls=""><a href="resources/m4as/changer_example5.m4a"> audio</a></audio></p>
</div>
<p>Other filters will filter pitches based on some specific condition. For example, <code>FilterUnselectedPCs</code> takes a list <code>selected_pcs</code> of pitch-classes. The pitch-classes in this list will always pass through the filter, while the remaining pitch-classes will be filtered as normal. This is illustrated in <a href="#changer_example6"><code>docs/examples/changer_example6.py</code></a>. Since the original music is in the key of D, I have selected pitch classes D and A (= 2 and 9). The effect is that these pitch classes solidly establish the key at the outset, while the other pitches enter gradually like increasingly elaborate embellishments.</p>
<pre><code>## Unselected pitch-class filter ###############################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...
    (14) Pitch-classes not to filter: [2, 9]                     TET: 12</code></pre>
<div id="changer_example6-div" class="example-div">
<p><span id="changer_example6"><strong>Example:</strong> <code>docs/examples/changer_example6.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example6.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example6.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example6_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example6.m4a" controls=""><a href="resources/m4as/changer_example6.m4a"> audio</a></audio></p>
</div>
<p>A simple example of a transformer is <code>ForcePitchTransformer</code>. This transformer takes the argument <code>force_pitches</code>, consisting of one or more pitches. It then takes each note and, with probability determined by its probability curve, assigns that note a pitch from <code>force_pitches</code>. (If <code>force_pitches</code> has more than one element, the choice of pitch is made randomly.) In <a href="#changer_example7"><code>docs/examples/changer_example7.py</code></a>, I illustrate using pitches 50 (=D3) and 62 (=D4)</p>
<pre><code>## Force pitch transformer #####################################################
     (1) Probability curve: Linear
     ...
     (6) Decreasing: True
     ...
    (13) Pitches to force: [50, 62]</code></pre>
<div id="changer_example7-div" class="example-div">
<p><span id="changer_example7"><strong>Example:</strong> <code>docs/examples/changer_example7.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example7.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example7.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example7_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example7.m4a" controls=""><a href="resources/m4as/changer_example7.m4a"> audio</a></audio></p>
</div>
<p>Because the music being transformed is in D major, the transformed pitches in the preceding example sound highly consonant. But there’s no requirement that we choose such consonant pitches. As a contrasting example, <a href="#changer_example8"><code>docs/examples/changer_example8.py</code></a> assigns <code>force_pitches = [56, 57, 65]</code> (i.e., G#3, A3, F4). The result is that D major emerges gradually from the ambiguous opening.</p>
<pre><code>## Force pitch transformer #####################################################
     (1) Probability curve: Linear
    ...
     (6) Decreasing: True
    ...
    (13) Pitches to force: [56, 57, 65]</code></pre>
<div id="changer_example8-div" class="example-div">
<p><span id="changer_example8"><strong>Example:</strong> <code>docs/examples/changer_example8.py</code></span> <a href="https://github.com/malcolmsailor/efficient_rhythms/blob/master/docs/examples/changer_example8.py"target="_blank" rel="noopener noreferrer">View source</a><img src="resources/svgs/changer_example8.svg" class="notation" alt=" notation" /> <img src="resources/pngs/changer_example8_00001.png" class="piano_roll" style="max-height: 300px" alt=" piano roll" /> <audio src="resources/m4as/changer_example8.m4a" controls=""><a href="resources/m4as/changer_example8.m4a"> audio</a></audio></p>
</div>
<p>There are many other filters and transformers that I have not illustrated here. Preliminary documentation of these changers can be found in <a href="changers.html">changers.html</a>.</p>
<p>If you wish to save your changers using a Python dictionary, the file should consist of a list of 2-tuples. The first item of each tuple is the name of the changer class (e.g., <code>"PitchFilter"</code>); the second item is a (possibly empty) dictionary containing the settings for that changer.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> For concrete illustration, see the source files for the above examples.</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>This command needs to be run from the root directory of the repository.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>You can find the settings files that generated all the examples in this section in the <code>docs/examples</code> folder. <code>docs/examples/example_base.py</code> is shared among each example. So you can build the first example with the command <code>python3 -m efficient_rhythms --settings docs/examples/example_base.py docs/examples/example1.py</code>; for subsequent examples, just replace <code>example1.py</code> with the appropriate file.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>The music-theoretically fastidious among you may have observed that these examples contain plentiful parallel fifths (for example, the first two sixteenth-notes in <a href="#example2"><code>docs/examples/example2.py</code></a>). If desired, parallel fifths could be avoided by including <code>7</code> (i.e., the number of semitones in a perfect fifth) in the sequence provided to the setting <a href="settings.html#prohibit_parallels"><code>prohibit_parallels</code></a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>The settings files that generated the examples in this section all begin with <code>harmony_example</code> and are found in the <code>docs/examples</code> folder. <code>docs/examples/harmony_example_base.py</code> is shared among each example. So you can build the first example with the command <code>python3 -m efficient_rhythms --settings docs/examples/harmony_example_base.py docs/examples/harmony_example1.py</code>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>There is a technical reason for this constraint, (namely, that the script works by finding bijective voice-leadings between chords and scales), but in the longterm, I would very much like to remove it.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>The settings files that generated the examples in this section all begin with <code>rhythm_example</code> and are found in the <code>docs/examples</code> folder. <code>docs/examples/rhythm_example_base.py</code> is shared among each example. So you can build the first example with the command <code>python3 -m efficient_rhythms --settings docs/examples/rhythm_example_base.py docs/examples/rhythm_example1.py</code>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>However, we’ll have to give up on representing these in conventional music notation. In fact, for the time being only duple note-values (i.e., eighth-notes, quarter-notes, and the like) can be exported to notation.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p>Of course, unless you have invented an infinite precision computer, the rhythms aren’t truly drawn from the continuous real number line.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9" role="doc-endnote"><p>In general, you probably won’t want this to occur: if you’ve set <a href="settings.html#cont_rhythms"><code>cont_rhythms</code></a> to a value other than <code>'none'</code>, you probably want it to have an effect. But as a special effect, one can have the notes evenly spaced in one voice, while <a href="settings.html#cont_rhythms"><code>cont_rhythms</code></a> is allowed to wreak havoc in the other voices.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10" role="doc-endnote"><p>If you’re wondering why a list of 2-tuples, rather than a dictionary, it is to allow for more than one changer of the same class.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
