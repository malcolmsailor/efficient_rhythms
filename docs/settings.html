<h1 id="efficient-rhythms-settings">Efficient rhythms settings</h1>
<!-- This file was auto-generated by get_settings_md_and_html.py and pandoc from er_settings.py -->
<p>The many settings below control the behavior of this script. The recommended way of using the script is to store the desired settings as a Python dictionary in a file and then pass the file into the script with the <code>--settings</code> flag. For examples, see the files in the <code>examples/</code> directory. For a high-level overview of the script, see <code>/docs/general.html</code></p>
<h3 id="note-on-per-voice-sequences-and-other-looping-sequences">Note on “per-voice sequences” and other “looping sequences”</h3>
<p>Many arguments below can take “per-voice sequences” as arguments. These are sequences (e.g., tuples or lists) that assign a different setting to each voice. Importantly, however, it is possible to provide a sequence that is shorter than the number of voices. In this case, the sequence will be looped through as many times as is necessary. For example, if <code>num_voices == 5</code>, but <code>len(pattern_len) == 2</code>, voices 0, 2, and 4 will be assigned the first value in <a href="#pattern_len"><code>pattern_len</code></a>, while voices 1 and 3 will be assigned the second value. (The voices are zero-indexed.)</p>
<p>There are also a number of arguments that take sequences that, if necessary, will be looped through in a similar manner, but where the items of the sequence are not applied to voices, but to something else. An example is <a href="#harmony_len"><code>harmony_len</code></a>. I refer to these as “looping sequences”.</p>
<h3 id="note-on-specifying-pitches-and-intervals">Note on specifying pitches and intervals</h3>
<p>In general, pitches can be specified either as integers, or as other numeric types (e.g., floats). <strong>If you don’t care about tuning or temperament, just specify all intervals as integers</strong> (e.g., one semitone = <code>1</code>). Otherwise, read on:</p>
<ul class="incremental">
<li><p>integers specify equal-tempered intervals. For example, in 12-tet (the usual temperament employed in Western music), an interval of <code>7</code> corresponds to a perfect fifth. How exactly integers function in other temperaments depends on the setting <a href="#integers_in_12_tet"><code>integers_in_12_tet</code></a>; see its documentation below for details.</p></li>
<li><p>other numeric types are interpreted as just intervals, and then approximated in the specified equal-division-of-the-octave temperament (the default being 12). Thus an interval of 1.5 (which in tuning theory is more often specified as a ratio of 3:2) corresponds to a perfect fifth. If <code>tet = 12</code>, this will be approximated as 7 semitones (7/12ths of an octave). If <code>tet = 31</code>, on the other hand, this will be approximated as 18/31sts of an octave.</p></li>
</ul>
<h3 id="generic-and-specific-intervals">“Generic” and “specific” intervals</h3>
<p>In the settings below, I sometimes use the terms “generic” or “specific” in reference to intervals. These terms come from academic music theory (e.g., Clough and Myerson 1985).</p>
<p>A “generic” interval defines an interval with respect to some reference scale, by counting the number of scale steps the interval contains. They might also be called “scalar” intervals (using “scalar” in a completely different sense from its linear algebra meaning). “Specific” intervals define intervals “absolutely”, by simply counting the number of semitones the interval comprises, irrespective of any reference scale.</p>
<p>In typical musical usage, “thirds”, “fifths”, and the like refer to generic intervals: a third is the distance between any pitch in a scale and the pitch two steps above or below it. (It would be more practical to call a “third” a “second” but, unfortunately, this usage has now been established for many centuries!) Depending on the structure of the scale, and the location of the interval within it, the exact pitch distance connoted by one and the same generic interval may vary. For instance, in the C major scale, the third from C to E is 4 semitones, but the third from D to F is 3 semitones. To distinguish these cases, music theory has developed an armory of interval “qualities” like “major”, “minor”, “diminished”, and so on. A generic interval together with a quality, like “minor third”, is somewhat like a specific interval, but it is not quite the same thing, because there can be more than one generic interval + quality that correspond to one specific interval. For example, both “minor thirds” and “augmented seconds” comprise 3 semitones. (Thus, the mapping from generic intervals with qualities to specific intervals is onto but not one-to-one.)</p>
<p>Note that “root” below doesn’t strictly mean root, in music-theoretic sense. See <a href="#foot_pcs"><code>foot_pcs</code></a> below for more explanation. # TODO complete this note</p>
<h3 id="general-settings">General settings</h3>
<p>Less often used general settings are under “<a href="#miscellaneous-settings">Miscellaneous settings</a>” below.</p>
<ul class="incremental">
<li><p><span id="seed"><strong><code>seed</code></strong></span>: int. Seed for random number generation.</p></li>
<li><p><span id="output_path"><strong><code>output_path</code></strong></span>: str. Path for output midi file. If a relative path, will be created relative to the current directory, unless the path begins with the string “EFFRHY/”, in which case “EFFRHY/” will be replaced with the directory of the efficient_rhythms script. If any folder in the path does not exist, it will be created. If the path is a directory (ending with <code>"/"</code>), a midi file will be created within that directory with the same basename as the last settings file, but with the extension <code>.mid</code>. (If there are no settings files, the basename will be <code>effrhy.mid</code>.)</p>
<p>See also <a href="#overwrite"><code>overwrite</code></a>.</p>
<p><em>Default</em>: <code>"EFFRHY/output_midi/effrhy.mid"</code></p></li>
<li><p><span id="tet"><strong><code>tet</code></strong></span>: int. Specifies equal division of the octave.</p>
<p><em>Default</em>: <code>12</code></p></li>
<li><p><span id="num_voices"><strong><code>num_voices</code></strong></span>: int. The number of “voices” (or “parts”) to be created. If <a href="#existing_voices"><code>existing_voices</code></a> below is passed, then <a href="#num_voices"><code>num_voices</code></a> specifies the number of <em>new</em> voices to be added, and doesn’t include the <a href="#existing_voices"><code>existing_voices</code></a> taken from the provided midi file.</p>
<p><em>Default</em>: <code>3</code></p></li>
<li><p><span id="num_reps_super_pattern"><strong><code>num_reps_super_pattern</code></strong></span>: int. Number of times to repeat the complete “super pattern”.</p>
<p><em>Default</em>: <code>2</code></p></li>
<li><p><span id="pattern_len"><strong><code>pattern_len</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Indicates the length of the “basic pattern” in beats. If a single number, all voices have the same length; if a sequence, sets the length for each voice individually. If <a href="#pattern_len"><code>pattern_len</code></a> is 0 or negative, it will be assigned the length of the complete harmonic progression (determined by <a href="#harmony_len"><code>harmony_len</code></a> and <a href="#num_harmonies"><code>num_harmonies</code></a>)</p>
<p>If <code>cont_rhythms != "none"</code>, then this argument must consist of a single number.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="truncate_patterns"><strong><code>truncate_patterns</code></strong></span>: bool. If True, then repetitions of any values in <a href="#pattern_len"><code>pattern_len</code></a> which are not factors of the maximum value in <a href="#pattern_len"><code>pattern_len</code></a> will be truncated at the maximum value. For example, if voice 0 has <code>pattern_len = 3</code> and voice 1 has <code>pattern_len = 5</code>, every second repetition of the pattern in voice 0 will be truncated after two beats.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="rhythm_len"><strong><code>rhythm_len</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Indicates the length of the rhythmic pattern to be generated. If not passed, then will be assigned the value of <a href="#pattern_len"><code>pattern_len</code></a>. If a single number, all voices have the same length; if a sequence, sets the length for each voice individually. The use of <a href="#rhythm_len"><code>rhythm_len</code></a> is to make repeated rhythmic patterns that are shorter than <a href="#pattern_len"><code>pattern_len</code></a>. If <a href="#rhythm_len"><code>rhythm_len</code></a> does not divide <a href="#pattern_len"><code>pattern_len</code></a> evenly (e.g., if <code>rhythm_len == 3</code> and <code>pattern_len == 8</code>), then the final repetition of <a href="#rhythm_len"><code>rhythm_len</code></a> will be truncated. Similarly, if <a href="#rhythm_len"><code>rhythm_len</code></a> is longer than <a href="#pattern_len"><code>pattern_len</code></a>, it will be truncated; in this case, one may as well not pass any value of <a href="#rhythm_len"><code>rhythm_len</code></a>, since in the absence of a value, <a href="#rhythm_len"><code>rhythm_len</code></a> is assigned the value of <a href="#pattern_len"><code>pattern_len</code></a>.</p>
<p>If <code>cont_rhythms != "none"</code>, then this argument must consist of a single number, which must be the same as the value of <a href="#pattern_len"><code>pattern_len</code></a>.</p></li>
<li><p><span id="num_harmonies"><strong><code>num_harmonies</code></strong></span>: int. The number of harmonies in the pattern. If a not passed, the length of <a href="#foot_pcs"><code>foot_pcs</code></a> will be assigned to this setting. If <a href="#foot_pcs"><code>foot_pcs</code></a> is not passed either, will be set to a default value of 4.</p></li>
<li><p><span id="harmony_len"><strong><code>harmony_len</code></strong></span>: a number, or a looping sequence of numbers (see above). If a sequence of numbers, the harmonies will cycle through the sequence until <a href="#num_harmonies"><code>num_harmonies</code></a> is reached. That is, the first harmony will have the length of the first number in the sequence, the second harmony of the second, and so on. (Unlike <a href="#pattern_len"><code>pattern_len</code></a> or <a href="#rhythm_len"><code>rhythm_len</code></a>, there is no way of assigning different harmony_lengths to different voices.)</p>
<p><em>Default</em>: <code>4</code></p></li>
<li><p><span id="voice_ranges"><strong><code>voice_ranges</code></strong></span>: a sequence of 2-tuples. Each tuple is of form (lowest_note, highest_note). (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.) <code>er_constants.py</code> provides a number of useful values for this purpose. The sequence must be at least <a href="#num_voices"><code>num_voices</code></a> length. (If it is longer, excess items will be ignored.) It is not enforced that the sequence be in ascending order but I haven’t extensively tested what happens if it is not. Note that if <a href="#constrain_voice_leading_to_ranges"><code>constrain_voice_leading_to_ranges</code></a> is False, than these ranges will only be enforced for the initial pattern. See also <a href="#hard_bounds"><code>hard_bounds</code></a>.</p>
<p><em>Default</em>: <code>CONTIGUOUS_OCTAVES * OCTAVE3 * C</code></p></li>
</ul>
<h3 id="scale-and-chord-settings">Scale and chord settings</h3>
<ul class="incremental">
<li><p><span id="scales_and_chords_specified_in_midi"><strong><code>scales_and_chords_specified_in_midi</code></strong></span>: string. If passed, specifies a midi file in a specific format, described below, from which the settings <a href="#foot_pcs"><code>foot_pcs</code></a>, <a href="#scales"><code>scales</code></a>, and <a href="#chords"><code>chords</code></a> below should be inferred (in which case any explicit values for these settings are ignored).</p>
<p>The midi file should consist of two tracks. <a href="#scales"><code>scales</code></a> are inferred from the first track, and <a href="#chords"><code>chords</code></a> and <a href="#foot_pcs"><code>foot_pcs</code></a> are inferred from the second track (<a href="#foot_pcs"><code>foot_pcs</code></a> are simply the lowest sounding pitch of each chord). Each track should consist entirely of simultaneous whole notes (i.e., semibreves) constituting the intended scales or chords, respectively. For an example, see <code>examples/scales_and_chords_specified_in_midi_example.mid</code>. Note that the rhythm of the harmonic changes is set through the <a href="#harmony_len"><code>harmony_len</code></a> parameter above.</p>
<p>You must ensure that chords and scales are consistent (that is, that the chords do not contain pitch-classes that do not belong to the scales; i.e., that the scales are supersets of the chords), or an <code>InconsistentChordsAndScalesError</code> will be raised.</p></li>
<li><p><span id="foot_pcs"><strong><code>foot_pcs</code></strong></span>: sequence of numbers. Specifies the <code>foots</code> of each item in <a href="#scales"><code>scales</code></a> and <a href="#chords"><code>chords</code></a>—i.e., the pitch-classes that will correspond to <code>0</code> in each item of <a href="#scales"><code>scales</code></a> and <a href="#chords"><code>chords</code></a>.</p>
<p>TODO refer to explanation of <a href="#foot_pcs"><code>foot_pcs</code></a> elsewhere?</p>
<p>For example, if <code>foot_pcs == [2, 4]</code> and <code>chords == [[0, 4, 7], [0,           3, 8]]</code>, then the actually realized chords will have pitch-classes <code>[2, 6, 9]</code> and <code>[4, 7, 0]</code>, respectively (assuming <code>tet == 12</code>). (In music-theoretic terms, the chords will be a D major triad followed by a first- inversion C major triad.)</p>
<p>If <a href="#foot_pcs"><code>foot_pcs</code></a> is shorter than <a href="#num_harmonies"><code>num_harmonies</code></a>, it is looped through until the necessary length is obtained.</p>
<p>If not passed, or passed an empty sequence, <a href="#num_harmonies"><code>num_harmonies</code></a> foots will be generated randomly.</p>
<p>Note that if <a href="#interval_cycle"><code>interval_cycle</code></a> below is non-empty, all items in this sequence past the first are ignored.</p>
<p>(<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p></li>
<li><p><span id="interval_cycle"><strong><code>interval_cycle</code></strong></span>: number, or sequence of numbers. Specifies a foot-pc interval cycle beginning on the first pitch-class of <a href="#foot_pcs"><code>foot_pcs</code></a> (or on a randomly chosen pitch-class, if <a href="#foot_pcs"><code>foot_pcs</code></a> is not passed). For example, if <code>foot_pcs == [0]</code>, and</p>
<ul class="incremental">
<li><p><code>interval_cycle == 3</code>, the foot pitch-classes will be 0, 3, 6…</p></li>
<li><p><code>interval_cycle == [3, -2]</code>, the foot pitch-classes will be 0, 3, 1, 4, 2… (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p></li>
</ul></li>
<li><p><span id="scales"><strong><code>scales</code></strong></span>: a sequence of sequences of numbers. Each subsequence specifies a scale. Scales should always be specified starting from pitch-class 0; they will then be transposed to the appropriate pitch-classes according to the settings <a href="#foot_pcs"><code>foot_pcs</code></a> or <a href="#interval_cycle"><code>interval_cycle</code></a>.</p>
<p>If <a href="#foot_pcs"><code>foot_pcs</code></a> has fewer items than <a href="#scales"><code>scales</code></a>, then the excess items in <a href="#scales"><code>scales</code></a> will be ignored.</p>
<p>If <a href="#foot_pcs"><code>foot_pcs</code></a> has more items than <a href="#scales"><code>scales</code></a>, then <a href="#scales"><code>scales</code></a> will be looped through.</p>
<p>(<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>[er_constants.DIATONIC_SCALE]</code></p></li>
<li><p><span id="chords"><strong><code>chords</code></strong></span>: a sequence of sequences of numbers. Each subsequence specifies a chord. Scales should always be specified starting from pitch-class 0; they will then be transposed to the appropriate pitch-classes according to the settings <a href="#foot_pcs"><code>foot_pcs</code></a> or <a href="#interval_cycle"><code>interval_cycle</code></a>.</p>
<p>If <a href="#foot_pcs"><code>foot_pcs</code></a> has fewer items than <a href="#chords"><code>chords</code></a>, then the excess items in <a href="#chords"><code>chords</code></a> will be ignored.</p>
<p>If <a href="#foot_pcs"><code>foot_pcs</code></a> has more items than <a href="#chords"><code>chords</code></a>, then <a href="#chords"><code>chords</code></a> will be looped through.</p>
<p>(<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>[er_constants.MAJOR_TRIAD]</code></p></li>
</ul>
<h3 id="midi-settings">Midi settings</h3>
<ul class="incremental">
<li><p><span id="voices_separate_tracks"><strong><code>voices_separate_tracks</code></strong></span>: bool. If True, different “voices” in the score are written to separate tracks in the output midi file.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="choirs_separate_tracks"><strong><code>choirs_separate_tracks</code></strong></span>: bool. If True, different “choirs” in the score are written to separate tracks in the output midi file.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="choirs_separate_channels"><strong><code>choirs_separate_channels</code></strong></span>: bool. If True, different “choirs” in the score are assigned to separate channels in the output midi file (up to the maximum of 16 channels).</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="write_program_changes"><strong><code>write_program_changes</code></strong></span>: bool. If True, General Midi program changes are written to the output midi file. Depending on the intended use, this may or may not be desired.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="humanize"><strong><code>humanize</code></strong></span>: bool. Whether to apply “humanization” to various parameters according to the various “humanize” settings below.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="humanize_attack"><strong><code>humanize_attack</code></strong></span>: float. Randomly varies attack times within +- this amount, in quarter notes.</p>
<p><em>Default</em>: <code>0.0</code></p></li>
<li><p><span id="humanize_dur"><strong><code>humanize_dur</code></strong></span>: float. Randomly varies duration times within +- this amount, in quarter notes.</p>
<p><em>Default</em>: <code>0.0</code></p></li>
<li><p><span id="humanize_velocity"><strong><code>humanize_velocity</code></strong></span>: float between 0 and 1. Scales velocities by 1 +- a random amount between 0 and this amount.</p>
<p><em>Default</em>: <code>0.1</code></p></li>
<li><p><span id="humanize_tuning"><strong><code>humanize_tuning</code></strong></span>: float. Only implemented when <code>tet != 12</code>. Randomly varies tuning within +- this amount.</p>
<p><em>Default</em>: <code>0.0</code></p></li>
</ul>
<h3 id="tuning-settings">Tuning settings</h3>
<ul class="incremental">
<li><p><span id="integers_in_12_tet"><strong><code>integers_in_12_tet</code></strong></span>: bool. If <code>True</code>, then any pitch materials (e.g., in <a href="#max_interval"><code>max_interval</code></a> or <a href="#scales"><code>scales</code></a>) that are indicated by integers (rather than floats etc.) will be interpreted as 12-tet intervals that will be approximated in the given temperament (if <code>tet != 12</code>). Thus, if True for example, if <code>tet == 31</code>, then an interval of <code>7</code> (7/12ths of an octave, the nearest 12-tet approximation to a just fifth) will converted to <code>18</code>, the nearest 31-tet approximation to 7/12ths of an octave.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="logic_type_pitch_bend"><strong><code>logic_type_pitch_bend</code></strong></span>: bool. If True, turns on a midi-writing scheme that I devised in order to make non-12-tet files work in Logic Pro. That is, in order to avoide pitch-bend latency problems, as well as to avoid audible bends during the release tails of notes, the notes (and their associated pitch-bend events) of each voice loop through a number of different channels (set by <a href="#num_channels_pitch_bend_loop"><code>num_channels_pitch_bend_loop</code></a>).</p>
<p>I have not used these midi files with any other DAWs so I don’t know whether this setting is helpful with e.g., ProTools.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="num_channels_pitch_bend_loop"><strong><code>num_channels_pitch_bend_loop</code></strong></span>: int. Defines number of channels to loop through if <a href="#logic_type_pitch_bend"><code>logic_type_pitch_bend</code></a> is True.</p>
<p><em>Default</em>: <code>9</code></p></li>
<li><p><span id="pitch_bend_time_prop"><strong><code>pitch_bend_time_prop</code></strong></span>: number between 0 and 1. If <a href="#logic_type_pitch_bend"><code>logic_type_pitch_bend</code></a> is True, then this parameter defines how long between the release of the last note on a channel and the attack of the next note on that same channel the associated pitch-bend message should be written. The value should probably be more than half to avoid an audible bend during the release of the previous pitch.</p>
<p><em>Default</em>: <code>0.75</code></p></li>
</ul>
<h3 id="voice-leading-settings">Voice-leading settings</h3>
<ul class="incremental">
<li><p><span id="parallel_voice_leading"><strong><code>parallel_voice_leading</code></strong></span>: bool. If <code>True</code>, then the voice-leading between harmonies is conducted in pure (generic) parallel motion.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="parallel_direction"><strong><code>parallel_direction</code></strong></span>: int. Only has an effect if <a href="#parallel_voice_leading"><code>parallel_voice_leading</code></a> is True. Governs the direction of the parallel voice-leading:</p>
<ul class="incremental">
<li><p>if positive, the motion is always upwards</p></li>
<li><p>if negative, the motion is always downwards</p></li>
<li><p>if 0, then the motion is either upwards or downwards, depending on which is shorter.</p></li>
</ul>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="voice_lead_chord_tones"><strong><code>voice_lead_chord_tones</code></strong></span>: bool. If True, then chord-tones on each harmony are voice-led to chord-tones on the next harmony, and non-chord-tones to non-chord-tones. So, if moving from a C major chord to an F major chord, the pitch-class C will be mapped to one of the pitch-classes (F, A, C), the pitch-class E will be mapped to one of the two remaining pitch-classes of the F major chord, and the pitch-class G will be mapped to the remaining pitch-class of the F major chord. A similar mapping will be made among the non-chord tones of the scale.</p>
<p>Setting this parameter to True will greatly reduce the script’s ability to find voice-leading solutions (especially in combination with <code>allow_flexible_voice_leading == False</code>). Note also that it will often lead to at least some relatively large voice-leading motions.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="preserve_foot_in_bass"><strong><code>preserve_foot_in_bass</code></strong></span>: string. Controls whether the occurrences of the foot in the bass are “preserved” when voice-leading the initial pattern to subsequent harmonies. For example, if the first two harmonies are C major followed by F major, should a C in the bass on the first chord be voice-led to an F in the bass on the second chord, preserving the foot, or should it be voice-led to a C (which would be more efficient, in the sense of moving a smaller interval, a unison, rather than a fourth or fifth).</p>
<p>Note that if this settings is not “none”, otherwise forbidden intervals may occur.</p>
<p>Possible values:</p>
<ul class="incremental">
<li><code>"lowest"</code>: only the lowest sounding occurrences of the foot on each harmony are preserved (so if, e.g., C2 and C3 both occur, only C2 will be preserved when voice-led to the next chord, while C3 will proceed by efficient voice-leading like all other pitches).</li>
<li><code>"all"</code>: all occurrences of the foot of each harmony are preserved.</li>
<li><code>"none"</code>: the foot is voice-led like any other pitch.</li>
</ul>
<p><em>Default</em>: <code>"none"</code></p></li>
<li><p><span id="extend_bass_range_for_foots"><strong><code>extend_bass_range_for_foots</code></strong></span>: number. If non-zero, permits transposition of the foot lower than the normal range of the bass voice, in order to maintain the foot as the lowest sounding pitch during a given harmony. Specifically, if the lowest sounding occurrences of the foot during a given harmony are not the lowest sounding pitch during that harmony, then they will be transposed an octave downwards, provided that this transposition lies within this extended range.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="constrain_voice_leading_to_ranges"><strong><code>constrain_voice_leading_to_ranges</code></strong></span>: bool. If False, then after the initial pattern is complete, the voices may exceed their ranges, if the most efficient voice-leading requires it. (For example, if the highest pitch of a voice’s range is G, but a subsequent efficient voice-leading requires G-sharp, the voice will be allowed to ascend to G-sharp, rather than enforcing a less-efficient voice-leading).</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="allow_flexible_voice_leading"><strong><code>allow_flexible_voice_leading</code></strong></span>: bool. If True, then the voice-leading (i.e., the mapping of pitches from one harmony to the next) will be allowed to change mid-harmony. (So that, for example, the pitch C5 might at first be mapped to D5 by the initial voice-leading, but after the script reaches an impasse, a new voice-leading will be chosen, which might map C5 to B4.) Setting to True will greatly expand the script’s ability to find voice-leading solutions; however, it may tend to destroy the audible sense of “pattern”.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="vl_maintain_consonance"><strong><code>vl_maintain_consonance</code></strong></span>: bool. If False, then after the initial pattern is complete, voice-leadings will not be checked for consonance. (See the settings under “<a href="#consonance-and-dissonance-settings">Consonance and dissonance settings</a>” below.)</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="vl_maintain_limit_intervals"><strong><code>vl_maintain_limit_intervals</code></strong></span>: bool. If False, then after the initial pattern is complete, voice-leadings will be allowed to exceed limit intervals. (See settings <a href="#max_interval"><code>max_interval</code></a>, <a href="#max_interval_for_non_chord_tones"><code>max_interval_for_non_chord_tones</code></a>, <a href="#min_interval"><code>min_interval</code></a>, <a href="#min_interval_for_non_chord_tones"><code>min_interval_for_non_chord_tones</code></a>.)</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="vl_maintain_forbidden_intervals"><strong><code>vl_maintain_forbidden_intervals</code></strong></span>: bool. If False, then after the initial pattern is complete, voice-leadings will be permitted to contain forbidden intervals. (See <a href="#forbidden_interval_classes"><code>forbidden_interval_classes</code></a>, <a href="#forbidden_interval_modulo"><code>forbidden_interval_modulo</code></a>.)</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="vl_maintain_prohibit_parallels"><strong><code>vl_maintain_prohibit_parallels</code></strong></span>: bool. If False, then after the initial pattern is complete, voice-leadings will be permitted to contain prohibited parallel intervals. (See <a href="#prohibit_parallels"><code>prohibit_parallels</code></a>.)</p>
<p><em>Default</em>: <code>True</code></p></li>
</ul>
<h3 id="chord-tone-settings">Chord-tone settings</h3>
<p>Parameters that begin “force_chord_tone” (though not “force_non_chord_tone”) apply regardless of whether <a href="#chord_tone_selection"><code>chord_tone_selection</code></a> is true. Other chord tone settings modify the behavior activated by <a href="#chord_tone_selection"><code>chord_tone_selection</code></a>. # TODO it seems to me that <a href="#force_chord_tone"><code>force_chord_tone</code></a> is the only setting that # begins <a href="#force_chord_tone"><code>force_chord_tone</code></a>?</p>
<ul class="incremental">
<li><p><span id="chord_tone_and_foot_disable"><strong><code>chord_tone_and_foot_disable</code></strong></span>: bool. If True, disables all chord-tone and foot specific behavior. Specifically, disables <a href="#chord_tone_selection"><code>chord_tone_selection</code></a>, <a href="#chord_tones_no_diss_treatment"><code>chord_tones_no_diss_treatment</code></a>, <a href="#force_chord_tone"><code>force_chord_tone</code></a>, <a href="#force_foot_in_bass"><code>force_foot_in_bass</code></a>, <a href="#max_interval_for_non_chord_tones"><code>max_interval_for_non_chord_tones</code></a>, <a href="#min_interval_for_non_chord_tones"><code>min_interval_for_non_chord_tones</code></a>, <a href="#voice_lead_chord_tones"><code>voice_lead_chord_tones</code></a>, <a href="#preserve_foot_in_bass"><code>preserve_foot_in_bass</code></a>, <a href="#extend_bass_range_for_foots"><code>extend_bass_range_for_foots</code></a></p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="chord_tone_selection"><strong><code>chord_tone_selection</code></strong></span>: boolean. If True, then the script will select whether each note should be assigned a chord-tone according to a probabilistic function (some of whose parameters can be set below). Note that even if this setting is True, however, and a particular note is assigned to be a chord-tone, if all chord-tones fail to satisfy the various conditions (e.g., <a href="#max_interval"><code>max_interval</code></a>, etc.), the algorithm will try to find a non-chord-tone that works.</p>
<ul class="incremental">
<li>Note that not all chord tone behavior is controlled by this setting, however. Some settings (such as those that begin “force_chord_tone”) apply regardless. To disable all chord tone behavior entirely, use <a href="#chord_tone_and_foot_disable"><code>chord_tone_and_foot_disable</code></a>.</li>
</ul>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="chord_tone_prob_func"><strong><code>chord_tone_prob_func</code></strong></span>: string. If <a href="#chord_tone_selection"><code>chord_tone_selection</code></a> is True, then the probability of the next note being a nonchord tone falls following each nonchord tone. This parameter controls how it falls. It can take the following values:</p>
<ul class="incremental">
<li><code>"quadratic"</code></li>
<li><code>"linear"</code></li>
</ul>
<p><em>Default</em>: <code>"linear"</code></p></li>
<li><p><span id="max_n_between_chord_tones"><strong><code>max_n_between_chord_tones</code></strong></span>: int. Controls after how many non-chord tones the probability of the following note being a chord tone rises to 1. For example, if <a href="#chord_tone_prob_func"><code>chord_tone_prob_func</code></a> is <code>"linear"</code>, <a href="#min_prob_chord_tone"><code>min_prob_chord_tone</code></a> is 0.5, and <a href="#max_n_between_chord_tones"><code>max_n_between_chord_tones</code></a> is 2,</p>
<ul class="incremental">
<li><p>after a chord tone, the probability of a chord tone will be 0.5</p></li>
<li><p>after one non-chord tone, the probability of a chord tone will be 0.75</p></li>
<li><p>after two non-chord tones, the probability of a chord tone will be 1</p></li>
</ul>
<p><em>Default</em>: <code>4</code></p></li>
<li><p><span id="min_prob_chord_tone"><strong><code>min_prob_chord_tone</code></strong></span>: float. Sets the probability of a chord tone immediately following another chord tone. See <a href="#max_n_between_chord_tones"><code>max_n_between_chord_tones</code></a> for an example.</p>
<p><em>Default</em>: <code>0.25</code></p></li>
<li><p><span id="try_to_force_non_chord_tones"><strong><code>try_to_force_non_chord_tones</code></strong></span>: boolean. If True, then if the chord-tone probability function returns false, the script will try to force the pitch to be a non-chord tone. If False, then it is selected from the entire scale (chord tones and non-chord tones). Even if True, however, if all non-chord tones fail, the algorithm will try to find a chord-tone that works.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="len_to_force_chord_tone"><strong><code>len_to_force_chord_tone</code></strong></span>: int. If <a href="#chord_tone_selection"><code>chord_tone_selection</code></a> is True, then notes of this value or longer will be forced to be chord tones. To disable, set to 0.</p>
<p><em>Default</em>: <code>1</code></p></li>
<li><p><span id="scale_chord_tone_prob_by_dur"><strong><code>scale_chord_tone_prob_by_dur</code></strong></span>: bool. If True, and <a href="#chord_tone_selection"><code>chord_tone_selection</code></a> is True, then the probability of a note being a chord-tone is scaled by the duration of that note, so that longer notes are more likely to be chord-tones. Specifically, the probability of a note being a chord tone is linearly interpolated between what it would have been otherwise and 1, according to where the duration lies in the range set by <a href="#scale_chord_tone_neutral_dur"><code>scale_chord_tone_neutral_dur</code></a> and <a href="#len_to_force_chord_tone"><code>len_to_force_chord_tone</code></a>. (Whether the probability of notes shorter than <a href="#scale_chord_tone_neutral_dur"><code>scale_chord_tone_neutral_dur</code></a> is reduced depends upon <a href="#scale_short_chord_tones_down"><code>scale_short_chord_tones_down</code></a>.) Thus if this setting is True, then <a href="#len_to_force_chord_tone"><code>len_to_force_chord_tone</code></a> must have a non-zero value.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="scale_chord_tone_neutral_dur"><strong><code>scale_chord_tone_neutral_dur</code></strong></span>: number. If <a href="#scale_chord_tone_prob_by_dur"><code>scale_chord_tone_prob_by_dur</code></a> is True, then this setting determines the note duration where chord-tone probability is left unchanged; notes of duration longer than this will have their chord-tone probability increased, and notes shorter will have their chord-tone probability decreased if <a href="#scale_short_chord_tones_down"><code>scale_short_chord_tones_down</code></a> is True.</p>
<p><em>Default</em>: <code>0.5</code></p></li>
<li><p><span id="scale_short_chord_tones_down"><strong><code>scale_short_chord_tones_down</code></strong></span>: bool. See <a href="#scale_chord_tone_prob_by_dur"><code>scale_chord_tone_prob_by_dur</code></a> and <a href="#scale_chord_tone_neutral_dur"><code>scale_chord_tone_neutral_dur</code></a>.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="chord_tone_before_rests"><strong><code>chord_tone_before_rests</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. If chord_tone_selection is true, then rests of this length or greater will always be preceded by a chord tone. To disable, assign a value of 0.</p>
<p><em>Default</em>: <code>0.26</code></p></li>
<li><p><span id="chord_tones_no_diss_treatment"><strong><code>chord_tones_no_diss_treatment</code></strong></span>: boolean, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of booleans. If true, then chord tones are exempted from the conditions of dissonance treatment. (However, dissonances sounding <em>against</em> these chord tones are still subject to the rules of dissonance treatment.)</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="force_chord_tone"><strong><code>force_chord_tone</code></strong></span>: string. Possible values:</p>
<ul class="incremental">
<li><code>"global_first_beat"</code>: forces chord tone on attacks on the global first beat (i.e., the first beat of the entire piece). Note, however, that this does not ensure that there will be an attack on the global first beat, and this parameter has no effect on notes that sound <em>after</em> the first beat. (Compare “global_first_note”.)</li>
<li><code>"global_first_note"</code>: forces chord tones on the first note to sound in each voice.</li>
<li><code>"first_beat"</code>: forces chord tones on attacks on the first beat of each harmony of the initial pattern. Note, however, that this does not ensure that there will be an attack on the first beat of each harmony, and this parameter has no effect on notes that sound <em>after</em> the first beat of each harmony. (Compare “first_note”.)</li>
<li><code>"first_note"</code>: forces chord tones on the first note of each harmony in each voice.</li>
<li><code>"none"</code>: does not force any chord tones.</li>
</ul>
<p><em>Default</em>: <code>"none"</code></p></li>
<li><p><span id="chord_tones_sync_attack_in_all_voices"><strong><code>chord_tones_sync_attack_in_all_voices</code></strong></span>: bool. If True, then chord-tone selection will be synchronized between all simultaneously attacked voices.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="force_foot_in_bass"><strong><code>force_foot_in_bass</code></strong></span>: string. Possible values are listed below; they work in the same way as for <code>force_chord_string</code> above.</p>
<ul class="incremental">
<li><code>"first_beat"</code></li>
<li><code>"first_note"</code></li>
<li><code>"global_first_beat"</code></li>
<li><code>"global_first_note"</code></li>
<li><code>"none"</code></li>
</ul>
<p><em>Default</em>: <code>"none"</code></p></li>
</ul>
<h3 id="melody-settings">Melody settings</h3>
<ul class="incremental">
<li><p><span id="prefer_small_melodic_intervals"><strong><code>prefer_small_melodic_intervals</code></strong></span>: bool. If true, smaller intervals will be more probable than larger intervals within the range of each voice. LONGTERM how, exactly? Make documentation more explicit?</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="prefer_small_melodic_intervals_coefficient"><strong><code>prefer_small_melodic_intervals_coefficient</code></strong></span>: number. If <a href="#prefer_small_melodic_intervals"><code>prefer_small_melodic_intervals</code></a> is true, then <a href="#prefer_small_melodic_intervals_coefficient"><code>prefer_small_melodic_intervals_coefficient</code></a> adjusts how strong the weighting towards smaller intervals is. It can take any value &gt; 0; greater values mean larger intervals are relatively more likely. A good range of values is 0 - 10.</p>
<p><em>Default</em>: <code>1</code></p></li>
<li><p><span id="unison_weighted_as"><strong><code>unison_weighted_as</code></strong></span>: int. If prefer_small_melodic_intervals is true, then we have to tell the algorithm how to weight melodic unisons, because we usually don’t want them to be the most common melodic interval. Unisons will be weighted the same as whichever generic interval this variable is assigned to.</p>
<p>(If you <em>DO</em> want unisons to be the most common melodic interval, set to GENERIC_UNISON – you can’t use UNISON because that’s a just interval constant.)</p>
<p><em>Default</em>: <code>er_constants.FIFTH</code></p></li>
<li><p><span id="max_interval"><strong><code>max_interval</code></strong></span>: number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. If <code>None</code>, does not apply. If positive, indicates a generic interval. Otherwise, indicates a specific interval (in which case it can be a float to indicate a just interval which will be tempered in pre-processing—<a href="#note-on-specifying-pitches-and-intervals">see the note above on specifying pitches and intervals</a>).</p>
<p><a href="#max_interval"><code>max_interval</code></a> sets an inclusive bound (so if <code>max_interval == -5</code>, an interval of 5 semitones is allowed, but 6 is not). <a href="#max_interval"><code>max_interval</code></a>, like the other similar settings below, applies across rests.</p>
<p><em>Default</em>: <code>-er_constants.OCTAVE</code></p></li>
<li><p><span id="max_interval_for_non_chord_tones"><strong><code>max_interval_for_non_chord_tones</code></strong></span>: number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Works in the same way as max_interval, but only applies to non-chord tones. If given a value of 1, can be used to apply a sort of primitive dissonance treatment. It can, however, also be given a value <em>larger</em> than max_interval, for unusual effects. min_interval sets an inclusive bound (so if <code>min_interval == -3</code>, an interval of 3 semitones is allowed, but 2 is not). If not passed, is assigned the value of <a href="#max_interval"><code>max_interval</code></a>.</p></li>
<li><p><span id="min_interval"><strong><code>min_interval</code></strong></span>: number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Works like <a href="#max_interval"><code>max_interval</code></a>, but specifies a minimum, rather than a maximum, interval.</p>
<p><em>Default</em>: <code>None</code></p></li>
<li><p><span id="min_interval_for_non_chord_tones"><strong><code>min_interval_for_non_chord_tones</code></strong></span>: number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Works like <a href="#max_interval_for_non_chord_tones"><code>max_interval_for_non_chord_tones</code></a>, but specifies a minimum, rather than a maximum, interval. If not passed, is assigned the value of <a href="#min_interval"><code>min_interval</code></a>.</p></li>
<li><p><span id="force_repeated_notes"><strong><code>force_repeated_notes</code></strong></span>: bool. If True, then within each harmony, each note is forced to repeat the pitch of the previous note.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="max_repeated_notes"><strong><code>max_repeated_notes</code></strong></span>: integer. Sets the maximum allowed number of repeated pitches in a single voice. If <a href="#force_repeated_notes"><code>force_repeated_notes</code></a> is True, this parameter is ignored. “One repeated note” means two notes with the same pitch in a row. To disable, set to a negative value.</p>
<p>Warning: for now, only applies to the initial pattern, not to the subsequent voice-leading</p>
<p><em>Default</em>: <code>-1</code></p></li>
<li><p><span id="max_alternations"><strong><code>max_alternations</code></strong></span>: integer, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of integers. Specifies the maximum allowed number of consecutive alternations of two pitches in a voice. “One alternation” is two pitches (e.g., A, B), and “two alternations” is four pitches (e.g., A, B, A, B). If set to two, then the sequence “A, B, A, B, A” is allowed, just not “A, B, A, B, A, B” (or longer). To disable, set to 0.</p>
<p><em>Default</em>: <code>2</code></p></li>
<li><p><span id="pitch_loop"><strong><code>pitch_loop</code></strong></span>: int, or a sequence of ints. If passed, in each voice, pitches will be repeated in a loop of the specified length. (However, at each harmony change, the loop will be adjusted to fit the new harmony.)</p></li>
<li><p><span id="hard_pitch_loop"><strong><code>hard_pitch_loop</code></strong></span>: boolean. If True, then after the initial loop of each voice is constructed, pitch constraint parameters such as <a href="#consonances"><code>consonances</code></a> and <a href="#max_interval"><code>max_interval</code></a> will be ignored and the pitches will continue to be looped “no matter what.” If False, then a “soft” pitch loop is constructed, where a new pitch is chosen each time a pitch fails to pass the pitch constraint parameters.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="prohibit_parallels"><strong><code>prohibit_parallels</code></strong></span>: sequence of numbers. The numbers will be treated as octave-equivalent intervals (so, e.g., an octave equals a unison). Parallel motion by these intervals will be forbidden. The obvious use is to prohibit parallel octaves, but can be used however one wishes. (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>(OCTAVE,)</code></p></li>
<li><p><span id="antiparallels"><strong><code>antiparallels</code></strong></span>: bool. If True, then “antiparallel” versions of the intervals in <a href="#prohibit_parallels"><code>prohibit_parallels</code></a> will also be prohibited. (E.g., if parallel octaves are forbidden, then an octave followed by a unison or a fifteenth will also be forbidden, and vice versa.)</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="force_parallel_motion"><strong><code>force_parallel_motion</code></strong></span>: bool, or a dictionary where keys are tuples of ints (indicating voice indices) and values are bools. If True, then voices will be constrained to move in (generic) parallel motion. The parallel motion is only enforced within harmonies; across the boundaries between harmonies, voices may move freely. When this parameter is True between voices that do not have the same attacks, it works as follows: it takes the <em>last</em> melodic interval in the leader voice, and adds the same melodic interval in the follower voice.</p>
<p>If True, <a href="#prohibit_parallels"><code>prohibit_parallels</code></a> is nevertheless respected (specifically, the harmonic interval that would result from forcing parallel motion is checked for membership in <a href="#prohibit_parallels"><code>prohibit_parallels</code></a>). If moving in parallel with the leader would cause the follower voice to exceed the lowest pitch of its range, it will be moved up an octave; conversely, if it would exceed the highest pitch of its range, it will be moved down an octave. (Either operation may violate <a href="#max_interval"><code>max_interval</code></a> or <a href="#max_interval_for_non_chord_tones"><code>max_interval_for_non_chord_tones</code></a>.) Note that strange effects may result if the voice’s range is less than an octave.</p>
<p>Note that if the follower has a longer <a href="#pattern_len"><code>pattern_len</code></a> than the leader, the parallel motion will only last until the conclusion of the leader pattern.</p>
<p><em>Default</em>: <code>False</code></p></li>
</ul>
<h3 id="consonance-and-dissonance-settings">Consonance and dissonance settings</h3>
<ul class="incremental">
<li><p><span id="consonance_treatment"><strong><code>consonance_treatment</code></strong></span>: string. Controls among which notes consonance is evaluated. Possible values:</p>
<ul class="incremental">
<li><code>"all_attacks"</code>: each pitch is evaluated for consonance with all other simulatenously attacked pitches.</li>
<li><code>"all_durs"</code>: each pitch is evaluated for consonance with all other pitches sounding during its duration.</li>
<li><code>"none"</code>: no consonance treatment.</li>
</ul>
<p><em>Default</em>: <code>"all_attacks"</code></p></li>
<li><p><span id="consonance_type"><strong><code>consonance_type</code></strong></span>: string. Controls how notes are evaluated for consonance/dissonance. Possible values:</p>
<ul class="incremental">
<li><code>"pairwise"</code>: all pairs of sounding voices are checked against the sequence in <a href="#consonances"><code>consonances</code></a></li>
<li><code>"chordwise"</code>: all voices are checked as a group to see if they belong to one of the chords in <a href="#consonant_chords"><code>consonant_chords</code></a></li>
</ul>
<p><em>Default</em>: <code>"pairwise"</code></p></li>
<li><p><span id="consonance_modulo"><strong><code>consonance_modulo</code></strong></span>: number, or a sequence of numbers, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of sequences of numbers.</p>
<p>If a number, only attack times that are 0 modulo this number will have consonance settings applied. For example, if <code>consonance_modulo == 1</code>, then every quarter-note beat will have consonance settings applied, but pitches <em>between</em> these beats will not.</p>
<p>If a sequence of numbers, the sequence of numbers defines a loop of attack times at which consonance settings will be applied. The largest number in the sequence defines the loop length. For example, if <code>consonance_modulo == [1, 1.5, 2]</code>, then consonance settings will be applied at beats 0, 1, 1.5, 2, 3, 3.5, 4, 5, etc.</p>
<p>If a sequence of sequences of numbers, each sub-sequence works as defined above, and they are applied to individual voices in a looping per-voice manner as described above.</p></li>
<li><p><span id="min_dur_for_cons_treatment"><strong><code>min_dur_for_cons_treatment</code></strong></span>: number. Notes with durations shorter than this value will not be evaluated for consonance.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="forbidden_interval_classes"><strong><code>forbidden_interval_classes</code></strong></span>: a sequence of numbers. The intervals in this sequence (interpreted as harmonic intervals) will be entirely avoided, regardless of consonance settings, at least in the initial pattern. Whether this setting persists after the initial pattern depends on the value of <a href="#vl_maintain_consonance"><code>vl_maintain_consonance</code></a>. (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>()</code></p></li>
<li><p><span id="forbidden_interval_modulo"><strong><code>forbidden_interval_modulo</code></strong></span>: number, or a sequence of number, or a sequence of sequence of numbers. Optionally defines attack times at which <a href="#forbidden_interval_classes"><code>forbidden_interval_classes</code></a> will be enforced. Works similarly to and is specified in the same manner as <a href="#consonance_modulo"><code>consonance_modulo</code></a>.</p></li>
<li><p><span id="exclude_augmented_triad"><strong><code>exclude_augmented_triad</code></strong></span>: boolean. Because all the pairwise intervals of the 12-tet augmented triad are consonant, if we want to avoid it, we need to explicitly exclude it. Only has any effect if consonance_type is “pairwise”.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="consonances"><strong><code>consonances</code></strong></span>: a sequence of numbers. The sequence items specify the intervals that will be treated as consonances if <a href="#consonance_type"><code>consonance_type</code></a> is <code>"pairwise"</code>. (But see <a href="#invert_consonances"><code>invert_consonances</code></a> below.) Since it’s just a sequence of numbers, you can specify any intervals you like—it does not have to conform to the usual set of consonances. (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>er_constants.CONSONANCES</code></p></li>
<li><p><span id="invert_consonances"><strong><code>invert_consonances</code></strong></span>: bool. If True, then the contents of <a href="#consonances"><code>consonances</code></a> are replaced by their setwise complement. (E.g., if <a href="#tet"><code>tet</code></a> is 12, then <code>[0, 3, 4, 5, 7, 8, 9]</code> will be replaced by <code>[1, 2, 6, 10,           11]</code>.) This permits an easy way of specifying so-called “dissonant counterpoint”. Has no effect if <a href="#consonance_type"><code>consonance_type</code></a> is <code>"chordwise"</code>.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="consonant_chords"><strong><code>consonant_chords</code></strong></span>: a sequence of sequences of numbers. Each sub-sequence specifies a chord to be understood as consonant if <a href="#consonance_type"><code>consonance_type</code></a> is <code>"chordwise"</code>. (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.)</p>
<p><em>Default</em>: <code>(er_constants.MAJOR_TRIAD, er_constants.MINOR_TRIAD)</code></p></li>
<li><p><span id="chord_octave_equi_type"><strong><code>chord_octave_equi_type</code></strong></span>: string. If <a href="#consonance_type"><code>consonance_type</code></a> is <code>"chordwise"</code>, controls how the items in <a href="#consonant_chords"><code>consonant_chords</code></a> are interpreted regarding octave equivalence and octave permutations. Possible values:</p>
<ul class="incremental">
<li><code>"all"</code>: all octave-equivalent and octave-permuted voicings are allowed. Thus (C4, E4, G4), (C4, G4, E5), and (G3, E4, C4) are all equivalent (as are many other voicings of a C major chord).</li>
<li><code>"bass"</code>: all octave-equivalent and octave-permuted voicings are allowed, except that the bass pitch (the lowest pitch of the chord) must be preserved. Thus (C4, E4, G4) and (C4, G4, E5) are equivalent, but (G3, E4, C4) is not, because the lowest pitch has changed.</li>
<li><code>"order"</code>: octave equivalence is allowed but pitches must be in the order listed. Thus (C4, E4, G4) is equivalent to (C4, E4, G5) but not to (C4, G4, E5).</li>
<li><code>"none"</code>: no octave equivalence or octave permutations of voicings. Thus (C3, E4, G4) is not equivalent to (C4, E4, G4).</li>
</ul>
<p>Note that transpositional equivalence always applies, so (C4, E4, G4) will always match (F4, A4, C5), and also (C3, E3, G3), even if <code>"none"</code>.</p>
<p>Note on voice crossings: in all of these settings, “order” refers to order by pitch height, and not by voice number. So if voice 0 has E3 and voice 1 has C3, the order is (C3, E3), because C3 is lower in pitch than E3, and not (E3, C3), because voice 0 is lower than voice 1.</p>
<p><em>Default</em>: <code>"all"</code></p></li>
<li><p><span id="chord_permit_doublings"><strong><code>chord_permit_doublings</code></strong></span>: string. If <a href="#consonance_type"><code>consonance_type</code></a> is <code>"chordwise"</code>, controls when octave doublings of chord members are permitted. Possible values:</p>
<ul class="incremental">
<li><code>"all"</code>: any and all doublings are permitted.</li>
<li><code>"complete"</code>: doublings are only permitted once the chord is complete. E.g., if the allowed chord is a major triad, then after (C4, E4), the doubling E5 will not be permitted because the chord is incomplete. However, after (C4, E4, G4), E5 will be permitted, because the chord is now complete.</li>
<li><code>"none"</code>: all doublings are prohibited.</li>
</ul>
<p><em>Default</em>: <code>"all"</code></p></li>
</ul>
<h3 id="rhythm-settings">Rhythm settings</h3>
<p>All rhythm settings use <a href="#rhythm_len"><code>rhythm_len</code></a> above.</p>
<ul class="incremental">
<li><p><span id="rhythms_specified_in_midi"><strong><code>rhythms_specified_in_midi</code></strong></span>: string. If passed, specifies a midi file whose rhythms will be used for the output file. In this case, all rhythm settings below are ignored, with the sole exception of <a href="#overlap"><code>overlap</code></a>. However, <a href="#rhythm_len"><code>rhythm_len</code></a> and <a href="#pattern_len"><code>pattern_len</code></a> must still be set explicitly above. If <a href="#num_voices"><code>num_voices</code></a> is greater than the number of tracks in the input midi file, then the rhythms will loops through the tracks. If the number of tracks in the input midi file is greater than <a href="#num_voices"><code>num_voices</code></a>, the excess tracks will be ignored.</p></li>
<li><p><span id="rhythms_in_midi_reverse_voices"><strong><code>rhythms_in_midi_reverse_voices</code></strong></span>: boolean. The convention in this program is for the bass voice to be track 0. On the other hand, in scores (e.g., those made with Sibelius), the convention is for the bass to be the lowest displayed (e.g., highest-numbered) track. If the input file was made with this latter score-order convention, set this boolean to true.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="attack_density"><strong><code>attack_density</code></strong></span>: a float from 0.0 to 1.0, or an int, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of floats and/or ints.</p>
<p>Floats represent a proportion of the available attacks to be filled. E.g., if <code>attack_density == 0.5</code> and there are 4 possible attack times, there will be 2 attacks. (Possible attack times are determined by <a href="#attack_subdivision"><code>attack_subdivision</code></a>, <a href="#sub_subdivisions"><code>sub_subdivisions</code></a>, and <code>comma</code> below).</p>
<p>Integers represent a literal number of attacks. E.g., if <code>attack_density == 3</code>, there will be 3 attacks.</p>
<p>Any negative values will be replaced by a random float between 0.0 and 1.0.</p>
<p>Note that there will always be at least one attack in each rhythm, regardless of how low <a href="#attack_density"><code>attack_density</code></a> is set.</p>
<p><em>Default</em>: <code>0.5</code></p></li>
<li><p><span id="dur_density"><strong><code>dur_density</code></strong></span>: a float from 0.0 to 1.0, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of floats. Indicates a proportion of the duration of <a href="#rhythm_len"><code>rhythm_len</code></a> that should be filled. Any negative values will be replaced by a random float between 0.0 and 1.0.</p>
<p><em>Default</em>: <code>1.0</code></p></li>
<li><p><span id="attack_subdivision"><strong><code>attack_subdivision</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Indicates the basic “grid” on which attacks can take place, measured in quarter notes. For example, if <code>attack_subdivision == 1/4</code>, then attacks can occur on every sixteenth note subdivision. (But see also <code>sub_subdivision</code> below.) If <code>cont_rhythms == "all"</code> or <code>cont_rhythms == "grid"</code>, then this parameter no longer indicates the grid on which attacks can take place, but it is still used to calculate how many attack positions there should be. Thus, in the case of continuous rhythms, this parameter can be thought of as indicating the average grid duration, rather than the exact grid duration.</p>
<p><em>Default</em>: <code>Fraction(1, 4)</code></p></li>
<li><p><span id="sub_subdivisions"><strong><code>sub_subdivisions</code></strong></span>: a sequence of ints, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of sequences of ints. Further subdivides <a href="#attack_subdivision"><code>attack_subdivision</code></a>, into parts defined by the ratio of the integers in the sequence. This can be used to apply “swing” or any other irregular subdivision you like. For instance, if passed a value of <code>(3, 4, 2)</code>, each unit of length <a href="#attack_subdivision"><code>attack_subdivision</code></a> will be subdivided into a portion of 3/9, a portion of 4/9, and a portion of 2/9. If a sequence of sequences, each sub-sequence applies to an individual voice, interpreted in the looping per-voice manner described above.</p>
<p>Note that this parameter is ignored if <code>cont_rhythms != "none"</code>.</p></li>
<li><p><span id="dur_subdivision"><strong><code>dur_subdivision</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Indicates the “grid” on which note durations are extended (and thus on which releases take place), which will be measured from the note attack. Values of 0 will be assigned the corresponding value of attack_subdivision. Note that, regardless of this value, all notes will be given a duration of at least <a href="#min_dur"><code>min_dur</code></a>, so it is possible that the total duration will exceed the value implied by <a href="#dur_subdivision"><code>dur_subdivision</code></a> somewhat.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="min_dur"><strong><code>min_dur</code></strong></span>: a number, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of numbers. Indicates the minimum duration of a note. Values &lt;= 0 will be assigned the corresponding value of <a href="#attack_subdivision"><code>attack_subdivision</code></a>.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="obligatory_attacks"><strong><code>obligatory_attacks</code></strong></span>: a sequence of numbers, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of sequences of numbers. Numbers specify obligatory attack times to include in the rhythm. Zero-indexed, so beat “1” (in musical terms) is <code>0</code>. Thus a value of <code>[0, 2, 3]</code>, with an <a href="#obligatory_attacks"><code>obligatory_attacks</code></a> value of <code>4</code> would enforce attacks on beats 0, 2, and 3, repeating every 4 beats; in musical terms, we could think of this as attacks on the first, third, and fourth beats of every measure of 4/4.</p>
<p><em>Default</em>: <code>()</code></p></li>
<li><p><span id="obligatory_attacks_modulo"><strong><code>obligatory_attacks_modulo</code></strong></span>: a number, or a sequence of numbers. Specifies which times (if any) should be understood as equivalent to the values in <a href="#obligatory_attacks"><code>obligatory_attacks</code></a>. Thus, if <a href="#obligatory_attacks"><code>obligatory_attacks</code></a> is <code>(0,)</code>, and <a href="#obligatory_attacks_modulo"><code>obligatory_attacks_modulo</code></a> is passed a value of <code>2</code>, then times of 2, 4, 6, … will be equivalent to 0. Has no effect if <a href="#obligatory_attacks"><code>obligatory_attacks</code></a> is empty.</p>
<p><em>Default</em>: <code>4</code></p></li>
<li><p><span id="comma_position"><strong><code>comma_position</code></strong></span>: string, int, or sequence of strings and/or ints. If the <a href="#rhythm_len"><code>rhythm_len</code></a> is not divisible by <a href="#attack_subdivision"><code>attack_subdivision</code></a> (e.g., <code>rhythm_len == 3</code> and <code>attack_subdivision == 2/3</code>), then there will be a “comma” left over that the attacks do not fill. This setting controls the placement of any such comma. Possible values: - “end”: comma is placed at the end of the rhythm. - “anywhere”: the comma is placed randomly anywhere before, after, or during the rhythm. - “beginning”: comma is placed at the beginning of the rhythm, before any notes. - “middle”: comma is placed randomly in the middle of the rhythm. - int: specify the index at which to place the comma.</p>
<p><em>Default</em>: <code>"end"</code></p></li>
<li><p><span id="overlap"><strong><code>overlap</code></strong></span>: bool. If <code>True</code>, then the final durations of each pattern repetition can overlap with the first durations of the next. If <code>False</code>, pattern overlaps are avoided.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="rhythmic_unison"><strong><code>rhythmic_unison</code></strong></span>: bool, or a sequence of tuples of ints. Controls whether to apply “rhythmic unison” (i.e., simultaneous attacks and releases) to some or all voices.</p>
<p>If True, all voices are in rhythmic unison. In this case, the rhythm settings that will apply to all voices are those of the bass voice (i.e., voice 0).</p>
<p>If False, no voices are in rhythmic unison.</p>
<p>If a sequence of tuples of ints, specifies combinations of voices that are in rhythmic unison. For example, <code>[(0, 1), (2, 3)]</code> would indicate that voices 0 and 1 would be in rhythmic unison with one another, while voices 2 and 3 would also be in rhythmic unison with one another, but neither of voices 0 and 1 are in rhythmic unison with either of voices 2 and 3. Voices that are not specified will have an independent rhythm, not in rhythmic unison with any other part. Thus, with four voices, <code>[(0, 2)]</code> would cause voices 0 and 2 to be in rhythmic unison with one another, while voices 1 and 3 would each have independent rhythms. Note that each tuple should be in ascending order. The rhythmic parameters that will be used in the construction of each rhythm are those of the first-listed voice.</p>
<p>Note that, when using tuples of rhythmic unison voices, it is sometimes necessary to provide “dummy” rhythmic parameters. If, for instance, the <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> tuples are <code>[(0, 1), (2, 3)]</code> and a parameter such as <a href="#attack_density"><code>attack_density</code></a> is <code>[0.5, 0.3]</code>, the second value of <a href="#attack_density"><code>attack_density</code></a> will never be used, because the first voices of the <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> tuples are 0 and 2 (and 2, modulo the length of <a href="#attack_density"><code>attack_density</code></a>, is 0). In this situation it is necessary to insert a dummy value into <a href="#attack_density"><code>attack_density</code></a> (e.g., [0.5, 0.0, 0.3]) in order to apply the parameter 0.3 to the second <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> tuple.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="rhythmic_quasi_unison"><strong><code>rhythmic_quasi_unison</code></strong></span>: bool, or a sequence of tuples of ints. This parameter is specified in the same way as <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> above. However, whereas <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> causes voices to have precisely the same rhythms, this parameter works differently. It does not override the rhythmic settings (such as <a href="#attack_density"><code>attack_density</code></a>) that apply to each voice, but it constrains the attacks of “follower” voices to occur at the same time as the attacks of “leader” voices, as far as is possible. If the follower has a greater <a href="#attack_density"><code>attack_density</code></a> than the leader, then the follower will have attacks simultaneous with all those of the leader, as well as extra attacks to satisfy its <a href="#attack_density"><code>attack_density</code></a> value. If the follower has a lesser <a href="#attack_density"><code>attack_density</code></a> than the leader, then all of the followers attacks will occur simultaneous with attacks in the leader, but it will have fewer attacks than the leader. The effect on other rhythmic parameters like <a href="#dur_density"><code>dur_density</code></a> is similar. See also <a href="#rhythmic_quasi_unison_constrain"><code>rhythmic_quasi_unison_constrain</code></a> below.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="rhythmic_quasi_unison_constrain"><strong><code>rhythmic_quasi_unison_constrain</code></strong></span>: boolean. If <a href="#rhythmic_quasi_unison"><code>rhythmic_quasi_unison</code></a> is False, has no effect. If True, and <a href="#rhythmic_quasi_unison"><code>rhythmic_quasi_unison</code></a> is True, then</p>
<ul class="incremental">
<li><p>if the follower voice has a smaller attack density than the leader, it will be constrained not to contain any durations that lie outside the durations of the leader.</p></li>
<li><p>if the follower has a greater attack density than the leader, it will be constrained to have all its attacks occur during the durations of the leader, if possible.</p></li>
</ul>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="hocketing"><strong><code>hocketing</code></strong></span>: bool, or a sequence of tuples of ints. This parameter is specified in the same way as <a href="#rhythmic_unison"><code>rhythmic_unison</code></a> above. Its effect is to lead combinations of voices to be “hocketed” —i.e., for, when possible, the attacks of one voice to be placed during the pauses of another, and vice versa.</p>
<p>Tuples of the form (0, 1, 2) will cause voice 1 to be constructed in hocket with voice 0, and then voice 2 to be constructed in hocket with voice 1.</p>
<p>Tuples of the form (0, 1) and (1, 2), in contrast, will cause voice 1 to be constructed in hocket with voice 0 (as before), but voice 2 to be constructed in hocket with voice 1 <em>but not</em> with voice 0.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="cont_rhythms"><strong><code>cont_rhythms</code></strong></span>: string. Specifies whether and how to use “continuous” rhythms. Usually, rhythms in music are understood in a discrete manner, as rational subdivisions or combinations of unit values like quarter-notes or thirty-second-notes. (Of course, in live performance, this is an idealization, since humans are not metronomes.) In contrast, this script allows for the construction of “continuous” rhythms, where the rhythmic values are drawn arbitrarily from the real number line.</p>
<p><a href="#cont_rhythms"><code>cont_rhythms</code></a> can take the following values:</p>
<ul class="incremental">
<li><code>"none"</code>: continuous rhythms are not used.</li>
<li><code>"all"</code>: all voices have unique continuous rhythm.</li>
<li><code>"grid"</code>: all voices share a continuous-rhythm “grid”, so that their rhythmic attacks ( and releases?) will be on a common grid.</li>
</ul>
<p>If <a href="#cont_rhythms"><code>cont_rhythms</code></a> is not <code>None</code>, then <a href="#rhythm_len"><code>rhythm_len</code></a> must equal <a href="#pattern_len"><code>pattern_len</code></a> and both must have only a single value.</p>
<p><em>Default</em>: <code>"none"</code></p></li>
<li><p><span id="num_cont_rhythm_vars"><strong><code>num_cont_rhythm_vars</code></strong></span>: int, or sequence of ints. If <code>cont_rhythms != "none"</code>, then, optionally, the rhythms can be varied when they recur by perturbing them randomly. This parameter determines the number of such variations. Setting it to <code>1</code> has the effect of disabling it. Setting it to a negative value will cause the rhythmic variations to continue throughout the super pattern, or throughout the entire output, depending on the value of <a href="#super_pattern_reps_cont_var"><code>super_pattern_reps_cont_var</code></a>. See also <a href="#vary_rhythm_consistently"><code>vary_rhythm_consistently</code></a> and <a href="#cont_var_increment"><code>cont_var_increment</code></a>.</p>
<p><em>Default</em>: <code>1</code></p></li>
<li><p><span id="vary_rhythm_consistently"><strong><code>vary_rhythm_consistently</code></strong></span>: bool. If True, and <code>num_cont_rhythm_vars !=           1</code>, then the perturbations applied to the rhythm will be the same from one variation until the next—at least until <a href="#min_dur"><code>min_dur</code></a> is reached in one or more of the notes of the rhythm.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="cont_var_increment"><strong><code>cont_var_increment</code></strong></span>: number. If <code>num_cont_rhythm_vars != 1</code>, determines how much rhythmic perturbation is applied to each variation. Larger values lead to larger perturbations.</p>
<p><em>Default</em>: <code>0.1</code></p></li>
<li><p><span id="super_pattern_reps_cont_var"><strong><code>super_pattern_reps_cont_var</code></strong></span>: bool. If True, any variations of the rhythm implied by <a href="#num_cont_rhythm_vars"><code>num_cont_rhythm_vars</code></a> will be allowed to continue into repetitions of the super pattern.</p>
<p><em>Default</em>: <code>True</code></p></li>
</ul>
<h3 id="choir-settings">Choir settings</h3>
<ul class="incremental">
<li><p><span id="choirs"><strong><code>choirs</code></strong></span>: a sequence of ints or tuples.</p>
<p>Integers specify the program numbers of GM midi instruments. Constants defining these can be found in <code>er_constants.py</code>.</p>
<p>Tuples can be used to combine multiple instruments (e.g., violins and cellos) into a single “choir”. They should consist of two items:</p>
<ul class="incremental">
<li><p>a sequence of GM midi instruments, listed from low to high</p></li>
<li><p>an integer or sequence of integers, specifying a split point or split points, that is, the pitches at which the instruments should be switched between.</p></li>
</ul>
<p><em>Default</em>: <code>(er_constants.MARIMBA, er_constants.VIBRAPHONE,</code> er_constants.ELECTRIC_PIANO, er_constants.GUITAR,)</p></li>
<li><p><span id="choir_assignments"><strong><code>choir_assignments</code></strong></span>: sequence of ints. Assigns voices to the given index in <a href="#choirs"><code>choirs</code></a>. Will be looped through if necessary. For example, if <code>choir_assignments == [1, 0]</code>, voice 0 will be assigned to <code>choirs[1]</code>, voice 1 will be assigned to <code>choirs[0]</code>, voice 2 (if it exists) will be assigned to <code>choirs[1]</code>, and so on. By default, or if passed an empty sequence, all voices are assigned to choir 0. # TODO change this default to loop through choirs by default</p>
<p>If <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True, then this setting is ignored.</p></li>
<li><p><span id="randomly_distribute_between_choirs"><strong><code>randomly_distribute_between_choirs</code></strong></span>: bool. If True, then voices are randomly assigned to items from <a href="#choirs"><code>choirs</code></a>. The precise way in which this occurs is controlled by the settings below.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="length_choir_segments"><strong><code>length_choir_segments</code></strong></span>: number. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. Sets the duration of each random choir assignment in quarter notes. If 0 or negative, each voice is permanently assigned to a choir at random.</p>
<p><em>Default</em>: <code>1</code></p></li>
<li><p><span id="length_choir_loop"><strong><code>length_choir_loop</code></strong></span>: number. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. If positive, sets the duration of a loop for the random choir assignments. Shorter values will be readily audible loops; longer values are likely to be less apparent as loops. If 0 or negative, then no loop. Note that depending on the combination of settings applied, it may not be possible to construct a loop of sufficient length. In this case, a warning will be emitted, but the script will otherwise continue.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="choir_segments_dovetail"><strong><code>choir_segments_dovetail</code></strong></span>: bool. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. If True, then choir assignments will be extended by one note, so that they overlap with the following choir assignment. (This can make this sort of thing easier for humans to play.)</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="max_consec_seg_from_same_choir"><strong><code>max_consec_seg_from_same_choir</code></strong></span>: int. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. If positive, then no voice will be assigned to the same choir for more than the specified number of segments in a row.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="all_voices_from_different_choirs"><strong><code>all_voices_from_different_choirs</code></strong></span>: bool. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. If True, then at each new choir assignment, it will be ensured that no two voices are assigned to the same choir. An error will be raised if this setting is True and <a href="#num_voices"><code>num_voices</code></a> is greater than <code>len(choirs)</code>.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="each_choir_combination_only_once"><strong><code>each_choir_combination_only_once</code></strong></span>: bool. Only has an effect if <a href="#randomly_distribute_between_choirs"><code>randomly_distribute_between_choirs</code></a> is True. If True, then each combination of choir assignments will occur only once before all others are heard, or before <a href="#length_choir_loop"><code>length_choir_loop</code></a> is reached, if possible.</p>
<p><em>Default</em>: <code>False</code></p></li>
</ul>
<h3 id="tempo-settings">Tempo settings</h3>
<ul class="incremental">
<li><p><span id="tempo"><strong><code>tempo</code></strong></span>: a number or a sequence of numbers. Specifies a tempo or tempi in quarter-note beats-per-minute. If a sequence, the length of each tempo segment is set with <a href="#tempo_len"><code>tempo_len</code></a>. If a sequence, will be looped through if necessary. If an empty sequence, a tempo or tempi will be randomly generated.</p>
<p><em>Default</em>: <code>120</code></p></li>
<li><p><span id="tempo_len"><strong><code>tempo_len</code></strong></span>: a number or a sequence of numbers. Specifies the duration of each tempo in <a href="#tempo"><code>tempo</code></a> in quarter-note beats. If a sequence, will be looped through as necessary. Has no effect if <a href="#tempo"><code>tempo</code></a> is a single number. If 0, then the first tempo in <a href="#tempo"><code>tempo</code></a> applies to the whole file.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="tempo_bounds"><strong><code>tempo_bounds</code></strong></span>: a tuple of form (number, number). If <a href="#tempo"><code>tempo</code></a> is an empty sequence, then tempi are randomly generated within the (inclusive) bounds set by this tuple.</p>
<p><em>Default</em>: <code>(80, 144)</code></p></li>
</ul>
<h3 id="transposition-settings">Transposition settings</h3>
<ul class="incremental">
<li><p><span id="transpose"><strong><code>transpose</code></strong></span>: bool. Toggles transposition of segments according to the following settings. Note that the limits imposed by <a href="#voice_ranges"><code>voice_ranges</code></a> are not followed by the transposition settings.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="tranpose_type"><strong><code>tranpose_type</code></strong></span>: string. For explanation of the possible values, see the discussion of “generic” and “specific” transposition above. Possible values:</p>
<ul class="incremental">
<li><code>"generic"</code></li>
<li><code>"specific"</code></li>
</ul>
<p><em>Default</em>: <code>"specific"</code></p></li>
<li><p><span id="transpose_len"><strong><code>transpose_len</code></strong></span>: number, or sequence of numbers. The length of the segments to be transposed. If a single number, all segments have the same length. If a sequence of numbers, will be looped through.</p>
<p><em>Default</em>: <code>4</code></p></li>
<li><p><span id="transpose_intervals"><strong><code>transpose_intervals</code></strong></span>: number, or sequence of numbers. The interval or intervals by which to transpose segments. If a single number, all segments will be transposed by the same amount. If a sequence of numbers, will be looped through. The transposition is cumulative, so, for example, if <a href="#transpose_intervals"><code>transpose_intervals</code></a> is <code>3</code>, then the first segment will be transposed by <code>3</code>, the second by <code>6</code>, etc. (See also <a href="#cumulative_max_transpose_interval"><code>cumulative_max_transpose_interval</code></a>.) If an empty sequence, segments will be transposed at random.</p>
<p><em>Default</em>: <code>()</code></p></li>
<li><p><span id="cumulative_max_transpose_interval"><strong><code>cumulative_max_transpose_interval</code></strong></span>: a number. Sets an absolute maximum bound for cumulative transposition, after which segments will be transposed up or down an octave. The bound is inclusive. To disable, set to 0. Thus, if <code>cumulative_max_transpose_interval == 6</code> and <code>transpose_intervals == 3</code>, segments will be transposed by 3, 6, -3, 0, 3, … semitones. (If, on the other hand, <code>cumulative_max_transpose_interval == 0</code>, segments will be transposed by 3, 6, 9, 12, 15, …)</p></li>
<li><p><span id="transpose_before_repeat"><strong><code>transpose_before_repeat</code></strong></span>: boolean. If True, then any transpositions are applied to the completed “super pattern” <em>before</em> repeating it; thus, the super pattern will have the same sequence of transpositions on all repetitions. If False, then any transpositions are applied <em>after</em> repeating the super pattern. Thus, unless the sequence of transpositions happen to return to their starting point at exactly the beginning of the repetitions of the super pattern, each super pattern will feature a new sequence of transpositions.</p></li>
</ul>
<h3 id="existing-voices-settings">Existing voices settings</h3>
<ul class="incremental">
<li><p><span id="existing_voices"><strong><code>existing_voices</code></strong></span>: string. The path to a midi file that contains some pre-existing music to which new voices should be added. Settings such as <a href="#scales"><code>scales</code></a> or <a href="#chords"><code>chords</code></a> are not inferred from the midi file and must be set explicitly by the user.</p></li>
<li><p><span id="existing_voices_offset"><strong><code>existing_voices_offset</code></strong></span>: number. Used to set the beat at which the voices in <a href="#existing_voices"><code>existing_voices</code></a> should begin. Has no effect if <a href="#existing_voices"><code>existing_voices</code></a> is not passed.</p>
<p><em>Default</em>: <code>0</code></p></li>
<li><p><span id="bass_in_existing_voice"><strong><code>bass_in_existing_voice</code></strong></span>: boolean. If True, then all bass-specific parameters (like <a href="#preserve_foot_in_bass"><code>preserve_foot_in_bass</code></a>) will have no effect.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="existing_voices_repeat"><strong><code>existing_voices_repeat</code></strong></span>: boolean. If True, then any existing voices will be truncated at the end of the super pattern, and then repeated together with the new voices.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="existing_voices_transpose"><strong><code>existing_voices_transpose</code></strong></span>: boolean. If True, then any existing voices will be transposed according to the “<a href="#transposition-settings">transposition settings</a>” below.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="existing_voices_max_denominator"><strong><code>existing_voices_max_denominator</code></strong></span>: integer. In order to avoid rounding errors and the like, the rhythms in <a href="#existing_voices"><code>existing_voices</code></a> are converted to Python’s Fraction type. This parameter sets the maximum denominator allowed in the conversion.</p>
<p><em>Default</em>: <code>8192</code></p></li>
</ul>
<h3 id="miscellaneous-settings">Miscellaneous settings</h3>
<ul class="incremental">
<li><p><span id="overwrite"><strong><code>overwrite</code></strong></span>: bool. If False, if a file with the name specified by <a href="#output_path"><code>output_path</code></a> already exists, the name will be incremented with a numeric suffix before the extension until it does not exist. E.g., if <code>output_path == 'effrhy.mid'</code> but <code>effrhy.mid</code> already exists, <code>effrhy_001.mid</code> will be created; if <code>effrhy_001.mid</code> already exists, <code>effrhy_002.mid</code> will be created.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="max_super_pattern_len"><strong><code>max_super_pattern_len</code></strong></span>: number. If positive, the super pattern will be truncated if it reaches this length.</p>
<p><em>Default</em>: <code>128</code></p></li>
<li><p><span id="hard_bounds"><strong><code>hard_bounds</code></strong></span>: a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of 2-tuples. Each tuple is of form (lowest_note, highest_note). (<a href="#note-on-specifying-pitches-and-intervals">See the note above on specifying pitches and intervals</a>.) This setting determines a lower and upper bound that will be enforced regardless of the setting of <a href="#constrain_voice_leading_to_ranges"><code>constrain_voice_leading_to_ranges</code></a>. The default values are the lowest and highest notes of an 88-key piano, respectively. See also <a href="#voice_ranges"><code>voice_ranges</code></a>.</p>
<p><em>Default</em>: <code>((OCTAVE0 * A, OCTAVE8 * C))</code></p></li>
<li><p><span id="voice_order_str"><strong><code>voice_order_str</code></strong></span>: string. If “reverse”, voices will be generated from highest to lowest. Otherwise, they are generated from lowest to highest.</p>
<p><em>Default</em>: <code>"usual"</code></p></li>
<li><p><span id="allow_voice_crossings"><strong><code>allow_voice_crossings</code></strong></span>: bool, or a <a href="#note-on-per-voice-sequences-and-other-looping-sequences">per-voice sequence</a> of bools. This could be used, for example, to forbid voice-crossings in the bass voice, but not in the other voices.</p>
<p><em>Default</em>: <code>True</code></p></li>
<li><p><span id="time_sig"><strong><code>time_sig</code></strong></span>: an optional tuple of form (int, int). The integers are the numerator and denominator of a time signature, respectively. The time signature will be written to the midi output file and used if exporting notation with Verovio. If no time signature is passed, the script will do its best to infer an appropriate time signature from the other settings.</p>
<p><em>Default</em>: <code>None</code></p></li>
<li><p><span id="initial_pattern_attempts"><strong><code>initial_pattern_attempts</code></strong></span>: integer. Number of attempts to make at constructing initial pattern before giving up or asking whether to make more attempts.</p>
<p><em>Default</em>: <code>50</code></p></li>
<li><p><span id="exclude_from_randomization"><strong><code>exclude_from_randomization</code></strong></span>: sequence of strings. A list of attribute names of this class. Only has an effect when the script is invoked with “-r” or “–random”, in which case any attribute names found in this list will be excluded from randomization. (Although note that not all attributes are randomized in any case; see the documentation for more info.)</p>
<p><em>Default</em>: <code>()</code></p></li>
<li><p><span id="voice_leading_attempts"><strong><code>voice_leading_attempts</code></strong></span>: integer. Number of attempts to make at constructing voice-leading pattern before giving up or asking whether to make more attempts.</p>
<p><em>Default</em>: <code>50</code></p></li>
<li><p><span id="ask_for_more_attempts"><strong><code>ask_for_more_attempts</code></strong></span>: bool. If True, if <a href="#initial_pattern_attempts"><code>initial_pattern_attempts</code></a> or <a href="#voice_leading_attempts"><code>voice_leading_attempts</code></a> are made without success, script will prompt user whether to try again.</p>
<p><em>Default</em>: <code>False</code></p></li>
<li><p><span id="max_available_pitch_materials_deadends"><strong><code>max_available_pitch_materials_deadends</code></strong></span>: integer. Sets the maximum number of “deadends” the recursive algorithm for building the initial pattern can reach before it will be aborted.</p>
<p><em>Default</em>: <code>1000</code></p></li>
</ul>
